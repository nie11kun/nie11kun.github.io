<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
xmlns:atom="http://www.w3.org/2005/Atom"
xmlns:wfw="http://wellformedweb.org/CommentAPI/">
<channel>
<title>Marco Nie - openssl</title>
<link>https://blog.niekun.net/tag/openssl/</link>
<atom:link href="https://blog.niekun.net/feed/tag/openssl/" rel="self" type="application/rss+xml" />
<language>zh-CN</language>
<description></description>
<lastBuildDate>Fri, 08 Nov 2019 13:43:44 +0800</lastBuildDate>
<pubDate>Fri, 08 Nov 2019 13:43:44 +0800</pubDate>
<item>
<title>VPS 自动备份脚本</title>
<link>https://blog.niekun.net/archives/466.html</link>
<guid>https://blog.niekun.net/archives/466.html</guid>
<pubDate>Fri, 08 Nov 2019 13:43:44 +0800</pubDate>
<dc:creator>admin</dc:creator>
<description><![CDATA[此脚本转载自 秋水逸冰 博客：https://teddysun.com/469.html需要用到的工具：LinuxMySQLopensslgdrivecrontab脚本实现定时自动备份数据库及指...]]></description>
<content:encoded xml:lang="zh-CN"><![CDATA[
<p>此脚本转载自 <strong>秋水逸冰</strong> 博客：<a href="https://teddysun.com/469.html">https://teddysun.com/469.html</a></p><p>需要用到的工具：<br>Linux<br>MySQL<br>openssl<br>gdrive<br>crontab</p><p>脚本实现定时自动备份数据库及指定目录文件夹，备份文件加密处理，自动上传到google drive。可设定备份文件保留天数。</p><!--more--><p>脚本下载，设定权限：</p><pre><code>wget --no-check-certificate https://github.com/teddysun/across/raw/master/backup.sh
chmod +x backup.sh</code></pre><p>修改脚本配置 具体参考：<a href="https://teddysun.com/469.html">https://teddysun.com/469.html</a></p><p>安装 openssl 参考：<a href="https://niekun.net/index.php/archives/449.html">https://niekun.net/index.php/archives/449.html</a></p><p>安装 gdrive 参考：<a href="https://niekun.net/index.php/archives/460.html">https://niekun.net/index.php/archives/460.html</a></p><p>设置 crontab 定时 参考：<a href="https://niekun.net/index.php/archives/461.html">https://niekun.net/index.php/archives/461.html</a></p>
]]></content:encoded>
<slash:comments>0</slash:comments>
<comments>https://blog.niekun.net/archives/466.html#comments</comments>
<wfw:commentRss>https://blog.niekun.net/feed/tag/openssl/</wfw:commentRss>
</item>
<item>
<title>openssl 加密/解密使用</title>
<link>https://blog.niekun.net/archives/464.html</link>
<guid>https://blog.niekun.net/archives/464.html</guid>
<pubDate>Fri, 08 Nov 2019 11:58:00 +0800</pubDate>
<dc:creator>admin</dc:creator>
<description><![CDATA[OpenSSL 是一个安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及SSL协议，并提供丰富的应用程序供测试或其它目的使用。]]></description>
<content:encoded xml:lang="zh-CN"><![CDATA[
<p>OpenSSL 是一个安全套接字层密码库，囊括主要的密码算法、常用的密钥和证书封装管理功能及SSL协议，并提供丰富的应用程序供测试或其它目的使用。</p><!--more--><p>openssl 安装参考：<a href="https://niekun.net/index.php/archives/183.html">https://niekun.net/index.php/archives/183.html</a></p><p><strong>三个部分组成：</strong><br>libcryto：这是一个具有通用功能的加密库，里面实现了众多的加密库<br>libssl，这个是实现ssl机制的，它是用于实现TLS/SSL的功能<br>openssl，是个多功能命令行工具，它可以实现加密解密，甚至还可以当CA来用，可以让你创建证书、吊销证书</p><h2>openssl enc 组件</h2><pre><code>openssl enc -help

Usage: enc [options]
Valid options are:
 -help               Display this summary
 -ciphers            List ciphers
 -in infile          Input file
 -out outfile        Output file
 -pass val           Passphrase source
 -e                  Encrypt
 -d                  Decrypt
 -p                  Print the iv/key
 -P                  Print the iv/key and exit
 -v                  Verbose output
 -nopad              Disable standard block padding
 -salt               Use salt in the KDF (default)
 -nosalt             Do not use salt in the KDF
 -debug              Print debug info
 -a                  Base64 encode/decode, depending on encryption flag
 -base64             Same as option -a
 -A                  Used with -[base64|a] to specify base64 buffer as a single line
 -bufsize val        Buffer size
 -k val              Passphrase
 -kfile infile       Read passphrase from file
 -K val              Raw key, in hex
 -S val              Salt, in hex
 -iv val             IV in hex
 -md val             Use specified digest to create a key from the passphrase
 -iter +int          Specify the iteration count and force use of PBKDF2
 -pbkdf2             Use password-based key derivation function 2
 -none               Don't encrypt
 -*                  Any supported cipher
 -rand val           Load the file(s) into the random number generator
 -writerand outfile  Write random data to the specified file
 -engine val         Use engine, possibly a hardware device
</code></pre><h2>ciphers list</h2><pre><code>Supported ciphers:
-aes-128-cbc               -aes-128-cfb               -aes-128-cfb1
-aes-128-cfb8              -aes-128-ctr               -aes-128-ecb
-aes-128-ofb               -aes-192-cbc               -aes-192-cfb
-aes-192-cfb1              -aes-192-cfb8              -aes-192-ctr
-aes-192-ecb               -aes-192-ofb               -aes-256-cbc
-aes-256-cfb               -aes-256-cfb1              -aes-256-cfb8
-aes-256-ctr               -aes-256-ecb               -aes-256-ofb
-aes128                    -aes128-wrap               -aes192
-aes192-wrap               -aes256                    -aes256-wrap
-aria-128-cbc              -aria-128-cfb              -aria-128-cfb1
-aria-128-cfb8             -aria-128-ctr              -aria-128-ecb
-aria-128-ofb              -aria-192-cbc              -aria-192-cfb
-aria-192-cfb1             -aria-192-cfb8             -aria-192-ctr
-aria-192-ecb              -aria-192-ofb              -aria-256-cbc
-aria-256-cfb              -aria-256-cfb1             -aria-256-cfb8
-aria-256-ctr              -aria-256-ecb              -aria-256-ofb
-aria128                   -aria192                   -aria256
-bf                        -bf-cbc                    -bf-cfb
-bf-ecb                    -bf-ofb                    -blowfish
-camellia-128-cbc          -camellia-128-cfb          -camellia-128-cfb1
-camellia-128-cfb8         -camellia-128-ctr          -camellia-128-ecb
-camellia-128-ofb          -camellia-192-cbc          -camellia-192-cfb
-camellia-192-cfb1         -camellia-192-cfb8         -camellia-192-ctr
-camellia-192-ecb          -camellia-192-ofb          -camellia-256-cbc
-camellia-256-cfb          -camellia-256-cfb1         -camellia-256-cfb8
-camellia-256-ctr          -camellia-256-ecb          -camellia-256-ofb
-camellia128               -camellia192               -camellia256
-cast                      -cast-cbc                  -cast5-cbc
-cast5-cfb                 -cast5-ecb                 -cast5-ofb
-chacha20                  -des                       -des-cbc
-des-cfb                   -des-cfb1                  -des-cfb8
-des-ecb                   -des-ede                   -des-ede-cbc
-des-ede-cfb               -des-ede-ecb               -des-ede-ofb
-des-ede3                  -des-ede3-cbc              -des-ede3-cfb
-des-ede3-cfb1             -des-ede3-cfb8             -des-ede3-ecb
-des-ede3-ofb              -des-ofb                   -des3
-des3-wrap                 -desx                      -desx-cbc
-id-aes128-wrap            -id-aes128-wrap-pad        -id-aes192-wrap
-id-aes192-wrap-pad        -id-aes256-wrap            -id-aes256-wrap-pad
-id-smime-alg-CMS3DESwrap  -idea                      -idea-cbc
-idea-cfb                  -idea-ecb                  -idea-ofb
-rc2                       -rc2-128                   -rc2-40
-rc2-40-cbc                -rc2-64                    -rc2-64-cbc
-rc2-cbc                   -rc2-cfb                   -rc2-ecb
-rc2-ofb                   -rc4                       -rc4-40
-seed                      -seed-cbc                  -seed-cfb
-seed-ecb                  -seed-ofb                  -sm4
-sm4-cbc                   -sm4-cfb                   -sm4-ctr
-sm4-ecb                   -sm4-ofb
</code></pre><h2>加密文件</h2><pre><code>openssl enc -aes-256-cbc -md sha512 -pbkdf2 -iter 1000 -pass pass:PASSWORD -in YOURFILE -out ENC_YOURFILE
</code></pre><h2>解密文件</h2><pre><code>openssl enc -aes-256-cbc -d -md sha512 -pbkdf2 -iter 1000 -pass pass:PASSWORD -in YOURFILE -out ENC_YOURFILE</code></pre>
]]></content:encoded>
<slash:comments>0</slash:comments>
<comments>https://blog.niekun.net/archives/464.html#comments</comments>
<wfw:commentRss>https://blog.niekun.net/feed/tag/openssl/</wfw:commentRss>
</item>
<item>
<title>windows 安装最新版 openssl</title>
<link>https://blog.niekun.net/archives/449.html</link>
<guid>https://blog.niekun.net/archives/449.html</guid>
<pubDate>Thu, 07 Nov 2019 14:02:00 +0800</pubDate>
<dc:creator>admin</dc:creator>
<description><![CDATA[最近折腾 vps 的自动备份，备份文件是在服务器上使用 openssl 加密的，我的一台笔记本是 Windows 系统的，所以想要解密的话需要在 windows 上安装 openssl，但是官方...]]></description>
<content:encoded xml:lang="zh-CN"><![CDATA[
<p>最近折腾 vps 的自动备份，备份文件是在服务器上使用 openssl 加密的，我的一台笔记本是 Windows 系统的，所以想要解密的话需要在 windows 上安装 openssl，但是官方网站没有提供对应版本，做了一些查找。</p><!--more--><p>在此网站下载需要版本的安装包：<a href="https://slproweb.com/products/Win32OpenSSL.html">https://slproweb.com/products/Win32OpenSSL.html</a><br><img src="https://niekun.net/usr/uploads/2019/11/88357174.png" alt="2019-11-07T05:59:53.png" title="2019-11-07T05:59:53.png"></p><p>安装过程不再介绍，在其中一个选项，选择将 openssl 安装到 /bin。</p><p>将 安装目录中的 /bin/openssl.exe 添加到系统 PATH 中,参考：<a href="https://niekun.net/index.php/archives/413.html">https://niekun.net/index.php/archives/413.html</a></p><p>测试命令是否生效：<br><img src="https://niekun.net/usr/uploads/2019/11/4073994268.png" alt="2019-11-07T06:02:38.png" title="2019-11-07T06:02:38.png"></p>
]]></content:encoded>
<slash:comments>0</slash:comments>
<comments>https://blog.niekun.net/archives/449.html#comments</comments>
<wfw:commentRss>https://blog.niekun.net/feed/tag/openssl/</wfw:commentRss>
</item>
<item>
<title>使用Nginx配置强ssl的网站</title>
<link>https://blog.niekun.net/archives/187.html</link>
<guid>https://blog.niekun.net/archives/187.html</guid>
<pubDate>Wed, 03 Apr 2019 23:24:00 +0800</pubDate>
<dc:creator>admin</dc:creator>
<description><![CDATA[本文主要参考的网站：https://cipherli.sthttps://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.htmlThis...]]></description>
<content:encoded xml:lang="zh-CN"><![CDATA[
<p><strong>本文主要参考的网站：</strong><br><a href="https://cipherli.st">https://cipherli.st</a><br><a href="https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html">https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html</a></p><blockquote>This tutorial shows you how to set up strong SSL security on the nginx webserver. We do this by updating OpenSSL to the latest version to mitigate attacks like Heartbleed, disabling SSL Compression and EXPORT ciphers to mitigate attacks like FREAK, CRIME and LogJAM, disabling SSLv3 and below because of vulnerabilities in the protocol and we will set up a strong ciphersuite that enables Forward Secrecy when possible. We also enable HSTS and HPKP. This way we have a strong and future proof ssl configuration and we get an A+ on the Qually Labs SSL Test.</blockquote><!--more--><p><strong>本文使用的配置需要相关软件的最低版本要求：</strong><br>Nginx: 1.13.0 -- 升级教程：<a href="https://niekun.net/index.php/archives/30.html">https://niekun.net/index.php/archives/30.html</a><br>openssl: 1.0.1 -- 升级教程：<a href="https://niekun.net/index.php/archives/183.html">https://niekun.net/index.php/archives/183.html</a></p><p>首先需要生成一个 4096 bit 的 DH parameters：</p><pre><code>openssl dhparam -out /etc/nginx/your.domain/dhparam.pem 4096
</code></pre><p>编辑 Nginx 配置文件，在server段加入或修改如下：</p><pre><code>ssl_protocols                TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;
ssl_prefer_server_ciphers    on; 
ssl_ciphers                  ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384;
ssl_dhparam                  /etc/nginx/your.domain/dhparam.pem;
ssl_ecdh_curve               secp384r1;
ssl_session_timeout          10m;
ssl_session_cache            shared:SSL:10m;
ssl_session_tickets          off;
ssl_stapling                 on;
ssl_stapling_verify          on;
resolver                     8.8.8.8 1.1.1.1 valid=300s;
resolver_timeout             5s; 
add_header                   Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot;;
add_header                   X-Frame-Options DENY;
add_header                   X-Content-Type-Options nosniff;
add_header                   X-XSS-Protection &quot;1; mode=block&quot;;</code></pre><p>ssl_ciphers 的设置可能会影响一些老版本系统或浏览器的访问，以下是兼容 IE6/WinXP 的配置：</p><pre><code>EECDH+AESGCM:EDH+AESGCM:ECDHE-RSA-AES128-GCM-SHA256:AES256+EECDH:DHE-RSA-AES128-GCM-SHA256:AES256+EDH:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4;</code></pre><p>修改完成后测试配置及重启：</p><pre><code>service nginx configtest
service nginx reload
service nginx restart
</code></pre><p>可以在这里测试网站安全级别，最高为 A+: <a href="https://www.ssllabs.com/ssltest/index.html">https://www.ssllabs.com/ssltest/index.html</a></p>
]]></content:encoded>
<slash:comments>0</slash:comments>
<comments>https://blog.niekun.net/archives/187.html#comments</comments>
<wfw:commentRss>https://blog.niekun.net/feed/tag/openssl/</wfw:commentRss>
</item>
<item>
<title>安装最新版openssl</title>
<link>https://blog.niekun.net/archives/183.html</link>
<guid>https://blog.niekun.net/archives/183.html</guid>
<pubDate>Wed, 03 Apr 2019 22:46:00 +0800</pubDate>
<dc:creator>admin</dc:creator>
<description><![CDATA[OpenSSL is a robust, commercial-grade, and full-featured toolkit for the Transport Layer Security...]]></description>
<content:encoded xml:lang="zh-CN"><![CDATA[
<blockquote>OpenSSL is a robust, commercial-grade, and full-featured toolkit for the Transport Layer Security (TLS) and Secure Sockets Layer (SSL) protocols. It is also a general-purpose cryptography library.</blockquote><p>官网：<a href="https://www.openssl.org">https://www.openssl.org</a></p><!--more--><p>Linux 下从源码编译教程参考：<a href="https://blog.niekun.net/archives/883.html">https://blog.niekun.net/archives/883.html</a></p><p>使用 http2 和 tls1.3 需要升级到最新版 1.1.1的 openssl，所以本文介绍如何下载及编译最新版。</p><p>下载最新版 1.1.1b：</p><pre><code>wget https://www.openssl.org/source/openssl-1.1.1b.tar.gz
</code></pre><p>解压及进入目录：</p><pre><code>tar -zxf openssl-1.1.1b.tar.gz &amp;&amp; cd openssl-1.1.1b
</code></pre><p>建立安装文件夹及软链接：</p><pre><code>mkdir /opt/openssl-1.1.1b
ln -s /opt/openssl-1.1.1b /opt/openssl
</code></pre><p>解析config：</p><pre><code>./config --prefix=/opt/openssl-1.1.1b
</code></pre><p>安装编译器及执行 make：</p><pre><code>apt-get install make gcc
make
</code></pre><p>测试是否有错误：</p><pre><code>make test
</code></pre><p>备份当前的 openssl 文件：</p><pre><code>mv /usr/bin/openssl ~/tmp
</code></pre><p>开始安装：</p><pre><code>make install
</code></pre><p>link 新安装的文件到默认执行地址：</p><pre><code>ln -s /opt/openssl/bin/openssl /usr/bin/openssl
</code></pre><p>刷新 link 及缓存：</p><pre><code>ldconfig
</code></pre><p>查看当前 openssl 版本：</p><pre><code>openssl version
</code></pre><p>如果显示：OpenSSL 1.1.1b 字样则表示安装成功。</p>
]]></content:encoded>
<slash:comments>0</slash:comments>
<comments>https://blog.niekun.net/archives/183.html#comments</comments>
<wfw:commentRss>https://blog.niekun.net/feed/tag/openssl/</wfw:commentRss>
</item>
</channel>
</rss>