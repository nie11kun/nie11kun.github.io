<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns="http://purl.org/rss/1.0/"
xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel rdf:about="https://blog.niekun.net/feed/rss/">
<title>Marco Nie</title>
<link>https://blog.niekun.net/</link>
<description>you are the company you keep...</description>
<items>
<rdf:Seq>
<rdf:li resource="https://blog.niekun.net/archives/1805.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1801.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1797.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1793.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1788.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1785.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1782.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1781.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1777.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1773.html"/>
</rdf:Seq>
</items>
</channel>
<item rdf:about="https://blog.niekun.net/archives/1805.html">
<title>wsl 2 激活 systemd</title>
<link>https://blog.niekun.net/archives/1805.html</link>
<dc:date>2020-10-13T12:03:00+08:00</dc:date>
<description>wsl 默认不支持 systemd，执行 systemd 命令会返回错误提示：# hostnamectl
System has not been booted with systemd as init system (PID 1). Can't operate.
Failed to create bus connection: Host is down可以安装第三方的工具 genie 来激活 systemd。GitHub：https://github.com/arkane-systems/genie安装添加第三方 apt 库，在 /etc/apt/sources.list.d 目录下新建文件 wsl-translinux.list，文件内容如下：deb [trusted=yes] https://wsl-translinux.arkane-systems.net/apt/ /更新库列表：apt update &amp;&amp; apt upgrade
安装依赖包：安装 Microsoft 依赖，下载对应系统版本的 prod 包：https://packages.microsoft.com/config/：curl -O https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb
dpkg -i packages-microsoft-prod.deb安装其他依赖：apt update &amp;&amp; apt install apt-transport-https daemonize dotnet-runtime-3.1安装 genie：apt install systemd-genie
使用退出 wsl 系统后关闭 所有已打开的 wsl：wsl --shutdown
启动 wsl：wsl genie -s
启动的 Linux 系统就可以正常使用 systemd 了。参考链接：https://gist.github.com/djfdyuruiry/6720faa3f9fc59bfdf6284ee1f41f950</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1801.html">
<title>wls 2 设置静态 DNS 服务地址及 Linux 和 Windows 主机网络互相访问设置</title>
<link>https://blog.niekun.net/archives/1801.html</link>
<dc:date>2020-10-13T10:01:00+08:00</dc:date>
<description>在升级到 wsl 2 后发现一些网络问题和之前的 wsl 不一样了，主要是 DNS 解析和 wsl 和 Windows 网络互访问题，这里介绍如何处理。DNS 解析wsl 2 使用的 DNS 解析服务器设置在文件：/etc/resolv.conf 内设置，这是一个 link 文件，真正的文件路径是：/run/resolvconf/resolv.conf，这个文件是每次 wsl 启动时自动生成的，内容如下：# This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
# [network]
# generateResolvConf = false
nameserver 172.24.144.1nameserver 后面的就是指定的 DNS 服务器地址。我发现有时候分配的服务器地址是无效的，如：127.0.0.53，使用 ping 来测试发现提示无法解析地址。需要设置一个固定的 DNS 地址，方法如下：新建文件：/etc/wsl.conf，内容如下：[network]
generateResolvConf = false以上配置好就不会自动创建 /run/resolvconf/resolv.conf 文件了。退出 wsl，关机然后重新启动：exit
wsl --shutdown
wsl
删除 link 文件：/etc/resolv.conf:rm /etc/resolv.conf
然后新建 /etc/resolv.conf 文件，内容如下，可自定义 nameserver 地址：nameserver 114.114.114.114
再次退出 wsl，关机然后重新启动：exit
wsl --shutdown
wsl
查看 /etc/resolv.conf 文件是否是之前自定义的地址：cat /etc/resolv.conf
测试网络服务：ping niekun.net
参考链接：https://github.com/microsoft/WSL/issues/5256#issuecomment-666545999网络访问配置以前使用 wsl 时 Linux 子系统和 Windows 主机的网络好像是直接互通的，比如我在 Windows 下建立了一个 http 网页 http://127.0.0.1:6000，可以在 Linux 子系统下直接访问地址 http://127.0.0.1:6000，同理对于 Windows 主机访问 Linux 子系统的服务也是可以使用 localhost 直接访问的。在升级到 wsl 2 后发现这一特性没有了，无法直接通过 localhost 地址来互通，查询官方说明关于wsl 2 访问网络服务 的方法可以实现访问，但是每次关机后 wsl 和 Windows 本地地址会发生变化不方便使用。可以设置静态 IP 来固定地址。Windows 终端下执行下面命令：在 wsl 下增加 IP 地址：192.168.50.16，名称为：eth0:1:(以 Ubuntu 系统为例)wsl -d Ubuntu -u root ip addr add 192.168.50.16/24 broadcast 192.168.50.255 dev eth0 label eth0:1
在 Windows 10 下增加一个 IP 地址：netsh interface ip add address &quot;vEthernet (WSL)&quot; 192.168.50.88 255.255.255.0
执行后，在 wsl 下通过 IP：192.168.50.88 访问 Windows 服务。在 Windows 下通过 IP：192.168.50.16 访问 wsl 服务。以上两个命令可以写在一个 bat 批处理文件内，然后设置开机自动运行这个脚本即可实现固定 IP 地址，脚本内容如下：@echo off
if &quot;%1&quot; == &quot;h&quot; goto begin
mshta vbscript:createobject(&quot;wscript.shell&quot;).run(&quot;&quot;&quot;%~nx0&quot;&quot; h&quot;,0)(window.close)&amp;&amp;exit
:begin
REM

wsl -d Ubuntu -u root ip addr add 192.168.50.16/24 broadcast 192.168.50.255 dev eth0 label eth0:1
netsh interface ip add address &quot;vEthernet (WSL)&quot; 192.168.50.88 255.255.255.0

exit将脚本快捷方式放到开机启动文件夹可以实现开机自启动，Windows 10 自启文件夹地址是：%APPDATA%\Microsoft\Windows\Start Menu\Programs\Startup参考链接：https://github.com/MicrosoftDocs/WSL/issues/418#issuecomment-648570865</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1797.html">
<title>解决 proxifier 和 wsl 2 无法同时使用的问题</title>
<link>https://blog.niekun.net/archives/1797.html</link>
<dc:date>2020-10-12T15:18:00+08:00</dc:date>
<description>今天将 Windows 10 升级到了 build 2004 版，顺便将 wsl 升级到了 wsl 2，升级教程参考：https://blog.niekun.net/archives/1785.html。运行 wsl 2 时，发现如下报错：PS C:\Users\Marco Nie&gt; wsl
The attempted operation is not supported for the type of object referenced.无法正常使用 wsl，查询后得知是由于我正在使用的 proxifier 和 wsl 有了冲突，proxifier 是我一直使用的用来代理程序的应用。在 wsl 的 github 项目讨论中看到有人问了 proxifier 开发者，得到了解决方法，需要使用提供的程序来让 wsl 在运行时不要加载 LSP DLLs。下载 NoLsp.zip，解压得到 NoLsp.exe以管理员权限运行 terminal，执行 path\to\NoLsp.exe c:\windows\system32\wsl.exe看到终端显示 Succsess!，表示操作完成，然后 wsl 系统就可以正常打开使用同时不影响 proxifier。参考链接：https://github.com/microsoft/WSL/issues/4177</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1793.html">
<title>Windows 重建图标缓存</title>
<link>https://blog.niekun.net/archives/1793.html</link>
<dc:date>2020-10-12T11:10:00+08:00</dc:date>
<description>在使用 Windows 中有时候会发现某个程序或文件的图标显示不正常，一般是图标缓存的问题，重建一下即可。以 Windows 10 为例，图标缓存文件路径为：%LOCALAPPDATA%\Microsoft\Windows\Explorer文件夹内的 iconcache_*.db 就是图标缓存文件，删除这些文件然后重启 explorer 即可。下面介绍命令的方式处理，使用 power shell 终端：# 停止 explorer 进程
taskkill /f /im explorer.exe

# 删除缓存图标文件，ps 中使用 $Env:&lt;variable-name&gt; 表达环境变量
del &quot;$env:LOCALAPPDATA\Microsoft\Windows\Explorer\iconcache*.db&quot;

# 重启 explorer
start explorer完成后查看图标是否已经正常显示。</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1788.html">
<title>Windows 常用终端命令</title>
<link>https://blog.niekun.net/archives/1788.html</link>
<dc:date>2020-10-12T09:30:00+08:00</dc:date>
<description>系统版本：winver
系统详细信息：systeminfo
当前用户名：whoami

本地网络：ipconfig
刷新 DNS 缓存：ipconfig /flushdns
路由信息：pathping
tracert
cmd 命令换行符：echo abc
等同于：
echo ^
abcpowershell 命令换行符：echo abc
等同于：
echo `
abc信息过滤：类似 Linux 的 grepfindstr
systeminfo | findstr &quot;System Type&quot;
查看命令的帮助：pathping /?
findstr /?
systeminfo /?
显示所有端口情况：netstat -ano
显示某个端口的占用情况 返回的数据中最后的数字为 PID 号：netstat -aon|findstr &quot;7200&quot;
根据 PID 号结束对应进程：taskkill /f /pid  7200
结束某个进程：taskkill /f /im explorer.exe
删除某个文件：del &quot;IconCache.db&quot;
启动某个程序：start explorer
</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1785.html">
<title>Windows 10 Linux 子系统 WSL 升级到 WSL 2</title>
<link>https://blog.niekun.net/archives/1785.html</link>
<dc:date>2020-10-12T09:24:00+08:00</dc:date>
<description>Windows 10 上的 wsl 可以方便的运行 Linux 环境，最近从 wsl 升级到了 wsl 2，看了下介绍主要区别是：increase file system performancesupport full system call compatibility增加了系统性能，更加完善的 Linux 系统环境。之前再 wsl 上无法使用的一些功能如 systemd 和网络 socket 提取的功能不知道是否可用了，下面就升级到 wsl 2 进行测试。关于 wsl 的介绍和安装可以参考我的教程：https://blog.niekun.net/archives/1148.html环境要求Requirements：For x64 systems: Version 1903 or higher, with Build 18362 or higher.For ARM64 systems: Version 2004 or higher, with Build 19041 or higher.Builds lower than 18362 do not support WSL 2. Use the Windows Update Assistant to update your version of Windows.可以使用命令查看当前系统版本，快捷键 win + R，输入 winver 弹出系统信息：命令行打开系统功能再我之前写的 wsl 安装教程里，介绍了从系统控制面板和命令行打开 Windows Subsystem for Linux 功能的方法，这里只介绍命令行方式。首先以管理员权限打开 powershell。如果之前没有安装 wsl 的话首先开启 Windows Subsystem for Linux：dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
然后开启 Virtual Machine feature：dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
完成以上两部后，重启系统。重启完成后安装 Linux 内核更新包：点击下载再次重启系统。设置 wsl 默认版本为 2：(管理员权限打开 powershell)wsl --set-default-version 2
设置默认版本后，以后安装的 Linux 子系统默认为 wsl 2 版本。也可以将之前安装的 Linux 子系统升级到 wsl 2：# 查看当前已安装的子系统
wsl -l -v

# 升级某个子系统到 wsl 2
wsl --set-version Ubuntu 2wsl 2 安装完成后就可以去 Windows 商店下载安装 Linux 发行版了：https://aka.ms/wslstore安装 Linux 发行版后的具体设置和之前 wsl 安装教程一样：https://blog.niekun.net/archives/1148.html参考链接https://docs.microsoft.com/en-us/windows/wsl/install-win10https://docs.microsoft.com/en-us/windows/wsl/compare-versions</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1782.html">
<title>powershell 脚本实现系统消息提醒</title>
<link>https://blog.niekun.net/archives/1782.html</link>
<dc:date>2020-09-30T11:52:07+08:00</dc:date>
<description>https://mcpmag.com/articles/2017/09/07/creating-a-balloon-tip-notification-using-powershell.aspx</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1781.html">
<title>echo 命令的使用</title>
<link>https://blog.niekun.net/archives/1781.html</link>
<dc:date>2020-09-30T09:23:00+08:00</dc:date>
<description>echo 是常用的终端命令，常用来输出字符串。配合命令的 option 选项可以实现多种输出方式。语法结构：echo [option(s)] [string(s)]
常规使用输出字符串：$ echo i have a dream
i have a dream输出变量：$ x=10
$ echo $x
10输出目录下所有文件名：$ echo *
Business Card Template - PiXimperfect.psd Telegram Desktop Video desktop.ini echo.txt test1.txt test2.txt输出特定名称的文件名：$ echo *.txt
echo.txt test1.txt test2.txt将字符串输出到文件：$ echo 'abc' &gt; test.txt
$ cat test.txt
abc使用 -e 选项识别字符串内的转义符 \\b 表示清除字符间空格$ echo -e 'a \bb \bc'
abc\n 表示换行$ echo -e 'a\nb\nc'
a
b
c\t 表示添加制表符$ echo -e 'a\tb\tc'
a       b       c可以结合 \n \t 使用：$ echo -e '\ta\n\tb\n\tc'
        a
        b
        c\v 表示添加垂直方向制表符$ echo -e 'a\vb\vc'
a
 b
  c\r 表示丢弃前面的字符串$ echo -e 'a\rbc'
bc\c 表示丢弃后面的字符串$ echo -e 'a\cbc'
aroot@localhost$以上就是 echo 命令的简单使用方法。</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1777.html">
<title>powershell 脚本运行问题处理</title>
<link>https://blog.niekun.net/archives/1777.html</link>
<dc:date>2020-09-28T12:53:00+08:00</dc:date>
<description>最近在学习 powershell 脚本中发现如果当前目录不在 ps1 脚本所在目录的话脚本不能正常执行，研究了下如何解决。PS C:\Users\Marco Nie&gt; &quot;C:\Users\Marco Nie\Application\aria2\download-complete.ps1&quot;
C:\Users\Marco Nie\Application\aria2\download-complete.ps1如以上，我想执行脚本，但是只是返回了路径。解决方法是在脚本路径前加上程序调用符 &amp; ，表示后面的是可执行文件。 &amp;&quot;C:\Users\Marco Nie\Application\aria2\download-complete.ps1&quot;以上方式就可以正常执行脚本了。还有就是脚本路径上如果有空格的话，需要使用引号将路径包围起来，这样就可以了。参考链接：http://www.splaybow.com/post/powershell-run-command-with-space.html</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1773.html">
<title>macOS 下命令行控制显示系统通知</title>
<link>https://blog.niekun.net/archives/1773.html</link>
<dc:date>2020-09-26T21:42:00+08:00</dc:date>
<description>在使用 aira2 的 rpc 下载功能时，默认没有下载完成提示，所以需要手动打开 webui 进行查看。关于 aria2 的使用参考我的教程：https://blog.niekun.net/archives/1199.html注意到配置文件里有一个：on-download-complete 选项，可以在下载完成后执行脚本，具体解释参考官方网页可以利用这一点，编写一个脚本来触发系统通知，这样就可以知道文件下载完成了。on-download-complete在 aria2 下载完成后，执行 on-download-complete 脚本时会自动传递三个参数：GID GID is an ID of a download which aria2c uses to identify a particular download下载文件个数文件路径示例：$ cat hook.sh
#!/bin/sh
echo &quot;Called with [$1] [$2] [$3]&quot;
$ aria2c --on-download-complete hook.sh http://example.org/file.iso
Called with [1] [1] [/path/to/file.iso]osascript这里使用 AppleScript 来编写简单的系统通知，使用 osascript 可以在 terminal 终端执行 AppleScript 脚本。语法结构：osascript [-l language] [-i] [-s flags] [-e statement | programfile] [argument ...]
这里主要使用 -e选项 来执行 AppleScript 脚本。显示通知显示一个简单的通知很简单：osascript -e 'display notification &quot;hello world!&quot;'
引号内的就是纯 AppleScript 脚本，很简单。显示带标题的通知osascript -e 'display notification &quot;hello world!&quot; with title &quot;This is the title&quot;'
显示带主副标题的通知osascript -e 'display notification &quot;hello world!&quot; with title &quot;Greeting&quot; subtitle &quot;More text&quot;'
显示带声音提醒的通知系统内置的声音音频在：/System/Library/Sounds 目录：$ ls /System/Library/Sounds
Basso.aiff    Frog.aiff    Hero.aiff    Pop.aiff    Submarine.aiff
Blow.aiff    Funk.aiff    Morse.aiff    Purr.aiff    Tink.aiff
Bottle.aiff    Glass.aiff    Ping.aiff    Sosumi.aifPop.aiff 这个声音就是默认的提示音。osascript -e 'display notification &quot;hello world!&quot; with title &quot;Greeting&quot; subtitle &quot;More text&quot; sound name &quot;Pop.aiff&quot;'
显示需要点击确认的提示框osascript -e 'display alert &quot;Hello World!&quot; message &quot;longer text can be added in the message field.&quot;'
音频提示除了显示系统通知外，也可以用音频提示，使用 say 命令来完成。osascript -e 'say &quot;Hello World!&quot;'
提示信息将不显示而是语音播报出来。aria2 下载完成提示脚本download-complete.sh#!/bin/sh
osascript -e 'display notification &quot;download complete&quot; sound name &quot;Pop.aiff&quot;'参考连接：https://code-maven.com/display-notification-from-the-mac-command-line</description>
</item>
</rdf:RDF>