<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF
xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
xmlns="http://purl.org/rss/1.0/"
xmlns:dc="http://purl.org/dc/elements/1.1/">
<channel rdf:about="https://blog.niekun.net/feed/rss/category/dev/">
<title>Marco Nie - Program</title>
<link>https://blog.niekun.net/category/dev/</link>
<description></description>
<items>
<rdf:Seq>
<rdf:li resource="https://blog.niekun.net/archives/1718.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1688.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1685.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1684.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1563.html"/>
<rdf:li resource="https://blog.niekun.net/archives/1174.html"/>
<rdf:li resource="https://blog.niekun.net/archives/880.html"/>
<rdf:li resource="https://blog.niekun.net/archives/468.html"/>
<rdf:li resource="https://blog.niekun.net/archives/438.html"/>
<rdf:li resource="https://blog.niekun.net/archives/428.html"/>
</rdf:Seq>
</items>
</channel>
<item rdf:about="https://blog.niekun.net/archives/1718.html">
<title>argparse and struct in python</title>
<link>https://blog.niekun.net/archives/1718.html</link>
<dc:date>2020-08-14T11:20:39+08:00</dc:date>
<description>https://docs.python.org/3/library/argparse.htmlhttps://docs.python.org/3/library/struct.html</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1688.html">
<title>string &amp;lt;-&amp;gt; byte in python</title>
<link>https://blog.niekun.net/archives/1688.html</link>
<dc:date>2020-08-12T14:08:00+08:00</dc:date>
<description>To transform a unicode string to a byte string in Python do this:&gt;&gt;&gt; 'foo'.encode('utf_8')
b'foo'
To transform a byte string to a unicode string:&gt;&gt;&gt; b'foo'.decode('utf_8')
'foo'

To convert a string to bytes.data = &quot;&quot;               #string
data = &quot;&quot;.encode()      #bytes
data = b&quot;&quot;              #bytesTo convert bytes to a String.data = b&quot;&quot;              #bytes
data = b&quot;&quot;.decode()     #string
data = str(b&quot;&quot;)         #string</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1685.html">
<title>winreg 操作 Windows 注册表 in python</title>
<link>https://blog.niekun.net/archives/1685.html</link>
<dc:date>2020-08-12T13:56:00+08:00</dc:date>
<description>https://docs.python.org/3/library/winreg.html#https://stackoverflow.com/questions/15128225/python-script-to-read-and-write-a-path-to-registryimport winreg

REG_PATH = r&quot;Control Panel\Mouse&quot;

def set_reg(name, value):
    try:
        winreg.CreateKey(winreg.HKEY_CURRENT_USER, REG_PATH)
        registry_key = winreg.OpenKey(winreg.HKEY_CURRENT_USER, REG_PATH, 0, 
                                       winreg.KEY_WRITE)
        winreg.SetValueEx(registry_key, name, 0, winreg.REG_SZ, value)
        winreg.CloseKey(registry_key)
        return True
    except WindowsError:
        return False

def get_reg(name):
    try:
        registry_key = winreg.OpenKey(winreg.HKEY_CURRENT_USER, REG_PATH, 0,
                                       winreg.KEY_READ)
        value, regtype = winreg.QueryValueEx(registry_key, name)
        winreg.CloseKey(registry_key)
        return value
    except WindowsError:
        return None

#Example MouseSensitivity
#Read value 
print (get_reg('MouseSensitivity'))

#Set Value 1/20 (will just write the value to reg, the changed mouse val requires a win re-log to apply*)
set_reg('MouseSensitivity', str(10))

#*For instant apply of SystemParameters like the mouse speed on-write, you can use win32gui/SPI
#http://docs.activestate.com/activepython/3.4/pywin32/win32gui__SystemParametersInfo_meth.html</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1684.html">
<title>使用 opencv 处理图像</title>
<link>https://blog.niekun.net/archives/1684.html</link>
<dc:date>2020-08-07T11:37:51+08:00</dc:date>
<description>安装：https://pypi.org/project/opencv-python/使用：https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_setup/py_table_of_contents_setup/py_table_of_contents_setup.html示例：https://www.askaswiss.com/2016/01/how-to-create-pencil-sketch-opencv-python.html打包 exe：https://pypi.org/project/auto-py-to-exe/</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1563.html">
<title>使用 EXECSTRING 指令执行字符串的内容</title>
<link>https://blog.niekun.net/archives/1563.html</link>
<dc:date>2020-05-07T15:57:00+08:00</dc:date>
<description>最近在编程中遇到一个问题：字符串内定义了一个已知的变量名，需要得到变量的值。例如：已知 real 类型全局变量：TEST定义一个字符串,并赋值：DEF STRING[10] STR1
STR1=&quot;TEST&quot;
想通过 STR1 来得到 TEST 变量的值。可以使用 EXECSTRING 来处理:EXECSTRING(&quot;R0=&quot;&lt;&lt;STR1)
以上指令可以将 TEST 变量的值读入 R0。</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/1174.html">
<title>Windows 下编译 boost 静态库</title>
<link>https://blog.niekun.net/archives/1174.html</link>
<dc:date>2020-02-27T13:39:00+08:00</dc:date>
<description>boost 是很流行的一个 c++ 库，他的部分模块使用只需要引用 head 文件即可，部分需要编译链接库才能使用。下面介绍如何编译模块的静态链接库。官方网站：https://www.boost.org/开始教程：https://www.boost.org/doc/libs/1_72_0/more/getting_started/windows.html官方编译教程：https://www.boost.org/doc/libs/1_72_0/more/getting_started/windows.html#prepare-to-use-a-boost-library-binary关于 B2 编译系统：https://boostorg.github.io/build/关于 Microsoft Visual C++(MSVC) 版本号：https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B#Internal_version_numbering关于静态库和动态库：boost 库下载从官方链接下载最新版 boost 库：https://www.boost.org/users/download/解压到磁盘目录，最好放置在单独管理软件环境库的目录，方便管理。需要编译库文件才能使有的模块如下：    - atomic
    - chrono
    - container
    - context
    - contract
    - coroutine
    - date_time
    - exception
    - fiber
    - filesystem
    - graph
    - graph_parallel
    - headers
    - iostreams
    - locale
    - log
    - math
    - mpi
    - program_options
    - python
    - random
    - regex
    - serialization
    - stacktrace
    - system
    - test
    - thread
    - timer
    - type_erasure
    - wave编译器配置各平台支持的编译器类型：https://www.boost.org/doc/libs/1_72_0/more/getting_started/windows.html#identify-your-toolsetWindows 下支持的编译器是：gcc 和 msvc，我电脑安装的是 visual studio 2019 的 c++ 开发包，所以我使用 msvc 作为编译器。使用 msvc 编译，需要在 c++ 开发包的基础上在 visual studio installer 里安装 Windows CRT SDK，不然在执行 bootstrap 时会报错：booost 支持指定 msvc 版本，所以首先查看我安装的 msvc 版本，可以在 visual studio installer 里查看当前安装的 msvc：或者可以通过 VS 版本号来查询 msvc 版本：https://en.wikipedia.org/wiki/Microsoft_Visual_C%2B%2B#Internal_version_numbering打开 boost 文件夹目录下的 bootstrap.bat 可以看到在执行脚本时也可以通过参数指定 msvc 版本：SET TOOLSET=msvc

IF &quot;%1&quot;==&quot;gcc&quot; SET TOOLSET=gcc

IF &quot;%1&quot;==&quot;vc71&quot; SET TOOLSET=msvc : 7.1
IF &quot;%1&quot;==&quot;vc8&quot; SET TOOLSET=msvc : 8.0
IF &quot;%1&quot;==&quot;vc9&quot; SET TOOLSET=msvc : 9.0
IF &quot;%1&quot;==&quot;vc10&quot; SET TOOLSET=msvc : 10.0
IF &quot;%1&quot;==&quot;vc11&quot; SET TOOLSET=msvc : 11.0
IF &quot;%1&quot;==&quot;vc12&quot; SET TOOLSET=msvc : 12.0
IF &quot;%1&quot;==&quot;vc14&quot; SET TOOLSET=msvc : 14.0
IF &quot;%1&quot;==&quot;vc141&quot; SET TOOLSET=msvc : 14.1
IF &quot;%1&quot;==&quot;vc142&quot; SET TOOLSET=msvc : 14.2编译模块首先通过 boost 文件夹目录下的 bootstrap.bat 来安装 Boost.Build (b2) 编译工具。关于什么是 Boost.Build (b2) 参考：https://boostorg.github.io/build/使用 vc++ 的终端来执行脚本如 native tool cmd，也可以在终端下指定 msvc 版本来编译，将目录 cd 到 boost 目录然后运行 bootstrap，使用 vc142 作为参数：如果出错，会在 boost 目录下生成 bootstrap.log 文件，查看具体出错信息。成功执行后在 boost 目录会有一个 b2.exe 文件，执行 .\b2 --help 可以查看帮助，下面需要这个 b2 来编辑模块库文件。再次打开终端，切换到 boost 目录，运行下面的命令：cd \TOYOURBOOSTPATH
b2 --toolset=msvc-14.2 link=static runtime-link=static --build-type=complete stage
--toolset=msvc-14.2       定义了编译器名称link=static               定义了链接库为静态，就是将链接库本身编译为静态的runtime-link=static       定义了运行链接库为静态，就是程序使用此库打包时为静态的--build-type=complete 定义了编译所有支持的变种库stage                 定义了库文件路径：.\stage\lib。想要更换其他路径使用 --stagedir=directory 参数来定义关于 link 和 runtime-link 参考：https://www.quora.com/What-is-the-difference-between-static-runtime-and-dynamic-linking其他可用的参数使用 b2 --help 来查看。成功编译完成后，链接库文件在 .\stage\lib\ 目录下。boost 库的使用使用 boost 库需要将 head 头文件文件夹和 lib 链接库文件夹在编译器里指定。官方手册：https://www.boost.org/doc/libs/1_72_0/more/getting_started/windows.html#link-your-program-to-a-boost-libraryhead 文件夹路径：PathTo\boost_1_72_0\boostlib 库文件夹路径：PathTo\boost_1_72_0\stage\lib下面介绍在 visual studio 2019 如何使用 boost。打开 c++ 项目文件，在右侧 solution explorer 中，在项目名右键点击 properties 或者 快捷键 alt + enter：选择 c/c++ - general，右侧菜单 additional include directories 中输入 boost 根路径：选择 linker - general，右侧菜单 additional library directories 中输入 lib 路径，来包含 lib 库文件：由于我们编译的是静态链接库，所以需要将 runtime library 设置为静态，选择 c/c++ - code generation，右侧菜单 runtime library 选择 MT/MTD，MT 代表 release，MTD 代表 debug：以上就把 boost 连接到了环境中，使用只需要 include 需要的模块即可，例如：#include &quot;boost/filesystem.hpp&quot;

</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/880.html">
<title>使用 TelegramBot 键盘 InlineKeyboardButton 提示 BUTTON_DATA_INVALID 报错原因分析</title>
<link>https://blog.niekun.net/archives/880.html</link>
<dc:date>2020-02-01T18:06:06+08:00</dc:date>
<description>今天在测试 telegram Bot 的时候，发现 keyboard 不能正确弹出来，后台查看发现报错了，提示 Bad Request: BUTTON_DATA_INVALID反复检查代码没有发现语法错误，查找之后了解到 InlineKeyboardButton 响应后返回的 Callback Data 有大小限制，最大64位：的确我想返回的内容长度的确超过了大小限制，优化源码后问题解决了。参考链接：https://core.telegram.org/bots/api#inlinekeyboardbuttonhttps://stackoverflow.com/questions/46389040/inlinekeyboardbutton-are-limited-in-inlinekeyboardmarkup-telegram-bot-c-sharp</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/468.html">
<title>go 语言程序的编译</title>
<link>https://blog.niekun.net/archives/468.html</link>
<dc:date>2019-11-10T15:54:00+08:00</dc:date>
<description>golang 官网：https://golang.org最近使用的一个工具使用了 go 语言编写，由于预编译的版本过低，于是尝试从源码自己编译，总体环境搭建很方便。下载并安装 Golanggoogle 官方下载地址: https://golang.org/dl/将 Golang 的可执行二进制文件的目录加入 PATH 环境变量Windows 默认安装目录为：c:\go\binLinux / macOS 默认安装目录为：/usr/local/go/bin将以上地址加入系统 PATH，windows 进入高级系统设置进行设置，linux 修改配置文件 .bashrc ，设置方法参考如下：windows：https://niekun.net/index.php/archives/413.htmllinux：https://niekun.net/index.php/archives/97.html编译下载程序源码到 go 目录：go get -u -v github.com/iikira/BaiduPCS-Go
默认 go 目录为当前用户根目录。查看至此编译的系统及平台：go tool dist list
编译程序首先进入源码目录。根据当前设备的系统及平台对应上面查到的信息设置下面参数。windows：set GOOS=windows
set GOARCH=amd64
set CGO_ENABLED=0
go buildlinux:OOS=linux GOARCH=386 CGO_ENABLED=0 go build编译好的程序在源码根目录。</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/438.html">
<title>python 常用语法收集</title>
<link>https://blog.niekun.net/archives/438.html</link>
<dc:date>2019-10-17T14:52:00+08:00</dc:date>
<description>在我使用过程中遇到的常用语法，这里做一些记录。os.system()可以用来运行终端命令：import os
os.system('date')
-----------------------
The current date is: 10/17/2019 Thu glob用来将匹配的文件放入数组：import glob
import os
CWD = os.getcwd()#当前目录路径
for name in glob.glob(CWD+'/*'):
    print(name)以上输出当前目录下所有文件的文件名。for name in glob.glob(CWD+'/file?.txt'):
    print(name)以上输出  filea.txt, fileb.txt filec.txt 等文件名。可以使用类似正则表达式的方式匹配文件名：glob.glob(CWD+'/*[12].*')
从python3.5开始，支持使用一下方法进行递归搜索目录内文件及文件夹：for name in glob.glob(CWD+'/**/*', recursive=True):
    print(name)以上会输出目录内文件及子文件夹内文件。split()字符串分割：按空格分割，注意两个部分之间的空格可以是1个或多个，不影响分割效果：txt = &quot;welcome to the jungle&quot;
x = txt.split()将 txt 字符串按空格来分成4个部分，x 是数组。分割成设定的个数：txt = &quot;welcome to the jungle&quot;
x = txt.split(' ', 1)输出结果：x = ['welcome', 'to the jungle']按特定字符分割：txt = &quot;apple#banana#cherry#orange&quot;
x = txt.split(&quot;#&quot;, 1)输出结果：x = ['apple', 'banana#cherry#orange']next()用于 iterator 的顺序提取。mylist = iter([&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;])
x = next(mylist)
print(x)
y = next(mylist)
print(x)
z = next(mylist)
print(x)输出结果：x = 'apple' y = 'banana' z = 'cherry'format()用于字符串内的赋值：print (&quot;{}, A computer science portal for geeks&quot;.format(&quot;GeeksforGeeks&quot;))输出：GeeksforGeeks, A computer science portal for geeks多个输入参数：print (&quot;Hi ! My name is {} and I am {} years old&quot;
                            .format(&quot;User&quot;, 19)) 带索引的多参数输入：print(&quot;Every {3} should know the use of {2} {1} programming and {0}&quot;
        .format(&quot;programmer&quot;, &quot;Open&quot;, &quot;Source&quot;, &quot;Operating Systems&quot;)) 输出结果：Every Operating Systems should know the use of Source Open programming and programmerstrip()删除字符串前和后的空格：txt = &quot;     banana     &quot;
x = txt.strip()输出：x = 'banana'删除字符串前和后的自定义字符：txt = &quot;,,,,,rrttgg.....banana....rrr&quot;
x = txt.strip(&quot;,.grt&quot;)输出： x = 'banana'</description>
</item>
<item rdf:about="https://blog.niekun.net/archives/428.html">
<title>使用 telegram bot 做一个 YouTube 下载器</title>
<link>https://blog.niekun.net/archives/428.html</link>
<dc:date>2019-10-16T15:56:00+08:00</dc:date>
<description>需要环境：Linuxpython3python-telegram-botyoutube-dlpython我是用的是 python3.4，使用系统包管理器安装：apt-get install python3.4
如果系统内安装了多个版本的 python，修改 /usr/bin/python 的默认链接，具体修改方法查看此教程：https://niekun.net/index.php/archives/413.htmlpython-telegram-bot安装或升级： pip install python-telegram-bot --upgrade
youtube-dlGitHub：https://github.com/ytdl-org/youtube-dl安装最新版库：sudo curl -L -k https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl
sudo chmod a+rx /usr/local/bin/youtube-dl如果运行 youtube-dl 报错，可以新建链接到系统程序目录：ln -s /usr/local/bin/youtube-dl /usr/bin/youtube-dl
可能运行报错问题及解决执行脚本后，出现类似如下错误：from tornado.httpserver import HTTPServer from tornado.httpserver import HTTPServer 
syntaxError: invalid syntax可能是 tornado 版本过高，需要进行降级：pip install tornado==4.5.3
telegram bot首先在 telegram 客户端内添加 BotFatherCreating a new botUse the /newbot command to create a new bot. The BotFather will ask you for a name and username, then generate an authorization token for your new bot.The name of your bot is displayed in contact details and elsewhere.The Username is a short name, to be used in mentions and telegram.me links. Usernames are 5-32 characters long and are case insensitive, but may only include Latin characters, numbers, and underscores. Your bot's username must end in ‘bot’, e.g. ‘tetris_bot’ or ‘TetrisBot’.The token is a string along the lines of 110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw that is required to authorize the bot and send requests to the Bot API. Keep your token secure and store it safely, it can be used by anyone to control your bot.Generating an authorization tokenIf your existing token is compromised or you lost it for some reason, use the /token command to generate a new one.源码地址https://github.com/nie11kun/telegram-bot-youtube-downloader开机自动运行脚本打开 rc.localvim /etc/init.d/rc.local
在最后添加：sudo python /your/script/path.py &amp;
最后使用 "&" 符号功能是让脚本在后台运行，如果要停止脚本需要kill 它的 PID。查看当前脚本的 PID：ps -aux |grep &quot;your.py&quot;
然后停止脚本：kill %PID
windows 下可以使用自带的Linux子系统打开 cmd，输入命令：bash，即可打开Linux系统。访问Windows路径：/mnt/your/folder/path注意如果文件夹有空格 " " 在命令行中需要在空格前加转义符 "\"</description>
</item>
</rdf:RDF>