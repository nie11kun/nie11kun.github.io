<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"
xmlns:thr="http://purl.org/syndication/thread/1.0"
xml:lang="zh-CN"
xml:base="https://blog.niekun.net/category/py/"
>
<title type="text">Marco Nie - python</title>
<subtitle type="text"></subtitle>
<updated>2020-08-14T11:20:39+08:00</updated>
<generator uri="http://typecho.org/" version="1.2/18.10.23">Typecho</generator>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/category/py/" />
<id>https://blog.niekun.net/feed/atom/category/py/</id>
<link rel="self" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/category/py/" />
<entry>
<title type="html"><![CDATA[argparse and struct in python]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1718.html" />
<id>https://blog.niekun.net/archives/1718.html</id>
<updated>2020-08-14T11:20:39+08:00</updated>
<published>2020-08-14T11:20:39+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[https://docs.python.org/3/library/argparse.htmlhttps://docs.python.org/3/library/struct.html]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1718.html" xml:lang="zh-CN"><![CDATA[
<p><a href="https://docs.python.org/3/library/argparse.html">https://docs.python.org/3/library/argparse.html</a><br><a href="https://docs.python.org/3/library/struct.html">https://docs.python.org/3/library/struct.html</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1718.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1718.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[string &lt;-&gt; byte in python]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1688.html" />
<id>https://blog.niekun.net/archives/1688.html</id>
<updated>2020-08-12T14:08:00+08:00</updated>
<published>2020-08-12T14:08:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[To transform a unicode string to a byte string in Python do this:&amp;gt;&amp;gt;&amp;gt; 'foo'.encode('utf_8...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1688.html" xml:lang="zh-CN"><![CDATA[
<p>To transform a unicode string to a byte string in Python do this:</p><pre><code>&gt;&gt;&gt; 'foo'.encode('utf_8')
b'foo'
</code></pre><p>To transform a byte string to a unicode string:</p><pre><code>&gt;&gt;&gt; b'foo'.decode('utf_8')
'foo'

</code></pre><ol><li>To convert a string to bytes.</li></ol><pre><code>data = &quot;&quot;               #string
data = &quot;&quot;.encode()      #bytes
data = b&quot;&quot;              #bytes</code></pre><ol><li>To convert bytes to a String.</li></ol><pre><code>data = b&quot;&quot;              #bytes
data = b&quot;&quot;.decode()     #string
data = str(b&quot;&quot;)         #string</code></pre>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1688.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1688.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[winreg 操作 Windows 注册表 in python]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1685.html" />
<id>https://blog.niekun.net/archives/1685.html</id>
<updated>2020-08-12T13:56:00+08:00</updated>
<published>2020-08-12T13:56:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[https://docs.python.org/3/library/winreg.html#https://stackoverflow.com/questions/15128225/python...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1685.html" xml:lang="zh-CN"><![CDATA[
<p><a href="https://docs.python.org/3/library/winreg.html#">https://docs.python.org/3/library/winreg.html#</a><br><a href="https://stackoverflow.com/questions/15128225/python-script-to-read-and-write-a-path-to-registry">https://stackoverflow.com/questions/15128225/python-script-to-read-and-write-a-path-to-registry</a></p><pre><code>import winreg

REG_PATH = r&quot;Control Panel\Mouse&quot;

def set_reg(name, value):
    try:
        winreg.CreateKey(winreg.HKEY_CURRENT_USER, REG_PATH)
        registry_key = winreg.OpenKey(winreg.HKEY_CURRENT_USER, REG_PATH, 0, 
                                       winreg.KEY_WRITE)
        winreg.SetValueEx(registry_key, name, 0, winreg.REG_SZ, value)
        winreg.CloseKey(registry_key)
        return True
    except WindowsError:
        return False

def get_reg(name):
    try:
        registry_key = winreg.OpenKey(winreg.HKEY_CURRENT_USER, REG_PATH, 0,
                                       winreg.KEY_READ)
        value, regtype = winreg.QueryValueEx(registry_key, name)
        winreg.CloseKey(registry_key)
        return value
    except WindowsError:
        return None

#Example MouseSensitivity
#Read value 
print (get_reg('MouseSensitivity'))

#Set Value 1/20 (will just write the value to reg, the changed mouse val requires a win re-log to apply*)
set_reg('MouseSensitivity', str(10))

#*For instant apply of SystemParameters like the mouse speed on-write, you can use win32gui/SPI
#http://docs.activestate.com/activepython/3.4/pywin32/win32gui__SystemParametersInfo_meth.html</code></pre>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1685.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1685.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[使用 opencv 处理图像]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1684.html" />
<id>https://blog.niekun.net/archives/1684.html</id>
<updated>2020-08-07T11:37:51+08:00</updated>
<published>2020-08-07T11:37:51+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[安装：https://pypi.org/project/opencv-python/使用：https://opencv-python-tutroals.readthedocs.io/en/lat...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1684.html" xml:lang="zh-CN"><![CDATA[
<p>安装：<a href="https://pypi.org/project/opencv-python/">https://pypi.org/project/opencv-python/</a><br>使用：<a href="https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_setup/py_table_of_contents_setup/py_table_of_contents_setup.html">https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_setup/py_table_of_contents_setup/py_table_of_contents_setup.html</a><br>示例：<a href="https://www.askaswiss.com/2016/01/how-to-create-pencil-sketch-opencv-python.html">https://www.askaswiss.com/2016/01/how-to-create-pencil-sketch-opencv-python.html</a><br>打包 exe：<a href="https://pypi.org/project/auto-py-to-exe/">https://pypi.org/project/auto-py-to-exe/</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1684.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1684.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[使用 TelegramBot 键盘 InlineKeyboardButton 提示 BUTTON_DATA_INVALID 报错原因分析]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/880.html" />
<id>https://blog.niekun.net/archives/880.html</id>
<updated>2020-02-01T18:06:06+08:00</updated>
<published>2020-02-01T18:06:06+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[今天在测试 telegram Bot 的时候，发现 keyboard 不能正确弹出来，后台查看发现报错了，提示 Bad Request: BUTTON_DATA_INVALID反复检查代码没有发...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/880.html" xml:lang="zh-CN"><![CDATA[
<p>今天在测试 telegram Bot 的时候，发现 keyboard 不能正确弹出来，后台查看发现报错了，提示 <code>Bad Request: BUTTON_DATA_INVALID</code></p><p>反复检查代码没有发现语法错误，查找之后了解到 <strong>InlineKeyboardButton</strong> 响应后返回的 <strong>Callback Data</strong> 有大小限制，最大64位：</p><p><img src="https://niekun.net/usr/uploads/2020/02/2328405825.png" alt="2020-02-01T10:02:48.png" title="2020-02-01T10:02:48.png"></p><p>的确我想返回的内容长度的确超过了大小限制，优化源码后问题解决了。</p><p>参考链接：<br><a href="https://core.telegram.org/bots/api#inlinekeyboardbutton">https://core.telegram.org/bots/api#inlinekeyboardbutton</a><br><a href="https://stackoverflow.com/questions/46389040/inlinekeyboardbutton-are-limited-in-inlinekeyboardmarkup-telegram-bot-c-sharp">https://stackoverflow.com/questions/46389040/inlinekeyboardbutton-are-limited-in-inlinekeyboardmarkup-telegram-bot-c-sharp</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/880.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/880.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[python 常用语法收集]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/438.html" />
<id>https://blog.niekun.net/archives/438.html</id>
<updated>2019-10-17T14:52:00+08:00</updated>
<published>2019-10-17T14:52:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[在我使用过程中遇到的常用语法，这里做一些记录。]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/438.html" xml:lang="zh-CN"><![CDATA[
<p>在我使用过程中遇到的常用语法，这里做一些记录。</p><!--more--><h1>os.system()</h1><p>可以用来运行终端命令：</p><pre><code>import os
os.system('date')
-----------------------
The current date is: 10/17/2019 Thu </code></pre><h1>glob</h1><p>用来将匹配的文件放入数组：</p><pre><code>import glob
import os
CWD = os.getcwd()#当前目录路径
for name in glob.glob(CWD+'/*'):
    print(name)</code></pre><p>以上输出当前目录下所有文件的文件名。</p><pre><code>for name in glob.glob(CWD+'/file?.txt'):
    print(name)</code></pre><p>以上输出  filea.txt, fileb.txt filec.txt 等文件名。</p><p>可以使用类似正则表达式的方式匹配文件名：</p><pre><code>glob.glob(CWD+'/*[12].*')
</code></pre><p>从python3.5开始，支持使用一下方法进行递归搜索目录内文件及文件夹：</p><pre><code>for name in glob.glob(CWD+'/**/*', recursive=True):
    print(name)</code></pre><p>以上会输出目录内文件及子文件夹内文件。</p><h1>split()</h1><p>字符串分割：</p><p><strong>按空格分割，注意两个部分之间的空格可以是1个或多个，不影响分割效果：</strong></p><pre><code>txt = &quot;welcome to the jungle&quot;
x = txt.split()</code></pre><p>将 txt 字符串按空格来分成4个部分，x 是数组。</p><p><strong>分割成设定的个数：</strong></p><pre><code>txt = &quot;welcome to the jungle&quot;
x = txt.split(' ', 1)</code></pre><p>输出结果：x = ['welcome', 'to the jungle']</p><p><strong>按特定字符分割：</strong></p><pre><code>txt = &quot;apple#banana#cherry#orange&quot;
x = txt.split(&quot;#&quot;, 1)</code></pre><p>输出结果：x = ['apple', 'banana#cherry#orange']</p><h1>next()</h1><p>用于 iterator 的顺序提取。</p><pre><code>mylist = iter([&quot;apple&quot;, &quot;banana&quot;, &quot;cherry&quot;])
x = next(mylist)
print(x)
y = next(mylist)
print(x)
z = next(mylist)
print(x)</code></pre><p>输出结果：x = 'apple' y = 'banana' z = 'cherry'</p><h1>format()</h1><p><strong>用于字符串内的赋值：</strong></p><pre><code>print (&quot;{}, A computer science portal for geeks&quot;.format(&quot;GeeksforGeeks&quot;))</code></pre><p>输出：GeeksforGeeks, A computer science portal for geeks</p><p><strong>多个输入参数：</strong></p><pre><code>print (&quot;Hi ! My name is {} and I am {} years old&quot;
                            .format(&quot;User&quot;, 19)) </code></pre><p>带索引的多参数输入：</p><pre><code>print(&quot;Every {3} should know the use of {2} {1} programming and {0}&quot;
        .format(&quot;programmer&quot;, &quot;Open&quot;, &quot;Source&quot;, &quot;Operating Systems&quot;)) </code></pre><p>输出结果：Every Operating Systems should know the use of Source Open programming and programmer</p><h1>strip()</h1><p><strong>删除字符串前和后的空格：</strong></p><pre><code>txt = &quot;     banana     &quot;
x = txt.strip()</code></pre><p>输出：x = 'banana'</p><p>删除字符串前和后的自定义字符：</p><pre><code>txt = &quot;,,,,,rrttgg.....banana....rrr&quot;
x = txt.strip(&quot;,.grt&quot;)</code></pre><p>输出： x = 'banana'</p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/438.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/438.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[使用 telegram bot 做一个 YouTube 下载器]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/428.html" />
<id>https://blog.niekun.net/archives/428.html</id>
<updated>2019-10-16T15:56:00+08:00</updated>
<published>2019-10-16T15:56:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[需要环境：Linuxpython3python-telegram-botyoutube-dl]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/428.html" xml:lang="zh-CN"><![CDATA[
<p>需要环境：<br>Linux<br>python3<br>python-telegram-bot<br>youtube-dl</p><!--more--><h1>python</h1><p>我是用的是 python3.4，使用系统包管理器安装：</p><pre><code>apt-get install python3.4
</code></pre><p>如果系统内安装了多个版本的 python，修改 /usr/bin/python 的默认链接，具体修改方法查看此教程：<br><a href="https://niekun.net/index.php/archives/413.html">https://niekun.net/index.php/archives/413.html</a></p><h1>python-telegram-bot</h1><p>安装或升级：</p><pre><code> pip install python-telegram-bot --upgrade
</code></pre><h1>youtube-dl</h1><p>GitHub：<a href="https://github.com/ytdl-org/youtube-dl">https://github.com/ytdl-org/youtube-dl</a></p><p>安装最新版库：</p><pre><code>sudo curl -L -k https://yt-dl.org/downloads/latest/youtube-dl -o /usr/local/bin/youtube-dl
sudo chmod a+rx /usr/local/bin/youtube-dl</code></pre><p>如果运行 youtube-dl 报错，可以新建链接到系统程序目录：</p><pre><code>ln -s /usr/local/bin/youtube-dl /usr/bin/youtube-dl
</code></pre><h1>可能运行报错问题及解决</h1><h2>执行脚本后，出现类似如下错误：</h2><pre><code>from tornado.httpserver import HTTPServer from tornado.httpserver import HTTPServer 
syntaxError: invalid syntax</code></pre><p>可能是 tornado 版本过高，需要进行降级：</p><pre><code>pip install tornado==4.5.3
</code></pre><h1>telegram bot</h1><p>首先在 telegram 客户端内添加 <a href="https://telegram.me/botfather">BotFather</a></p><p><strong>Creating a new bot</strong><br>Use the <code>/newbot</code> command to create a new bot. The BotFather will ask you for a name and username, then generate an authorization token for your new bot.</p><p>The <code>name</code> of your bot is displayed in contact details and elsewhere.</p><p>The <code>Username</code> is a short name, to be used in mentions and telegram.me links. Usernames are 5-32 characters long and are case insensitive, but may only include Latin characters, numbers, and underscores. Your bot's username must end in ‘bot’, e.g. ‘tetris_bot’ or ‘TetrisBot’.</p><p>The <code>token</code> is a string along the lines of <code>110201543:AAHdqTcvCH1vGWJxfSeofSAs0K5PALDsaw</code> that is required to authorize the bot and send requests to the Bot API. Keep your token secure and store it safely, it can be used by anyone to control your bot.</p><p>Generating an authorization token<br>If your existing token is compromised or you lost it for some reason, use the <code>/token</code> command to generate a new one.</p><h1>源码地址</h1><p><a href="https://github.com/nie11kun/telegram-bot-youtube-downloader">https://github.com/nie11kun/telegram-bot-youtube-downloader</a></p><h1>开机自动运行脚本</h1><p>打开 rc.local</p><pre><code>vim /etc/init.d/rc.local
</code></pre><p>在最后添加：</p><pre><code>sudo python /your/script/path.py &amp;
</code></pre><p>最后使用 "&" 符号功能是让脚本在后台运行，如果要停止脚本需要kill 它的 PID。</p><p>查看当前脚本的 PID：</p><pre><code>ps -aux |grep &quot;your.py&quot;
</code></pre><p>然后停止脚本：</p><pre><code>kill %PID
</code></pre><h2>windows 下可以使用自带的Linux子系统</h2><p>打开 cmd，输入命令：bash，即可打开Linux系统。</p><p>访问Windows路径：<code>/mnt/your/folder/path</code></p><p>注意如果文件夹有空格 " " 在命令行中需要在空格前加转义符 "\"</p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/428.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/428.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Linux / windows 设置默认 python 版本]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/413.html" />
<id>https://blog.niekun.net/archives/413.html</id>
<updated>2019-10-15T10:51:00+08:00</updated>
<published>2019-10-15T10:51:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[windows打开高级系统设置：]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/413.html" xml:lang="zh-CN"><![CDATA[
<h2>windows</h2><p>打开高级系统设置：<br><img src="https://niekun.net/usr/uploads/2019/10/1895845126.png" alt="2019-10-15T02:49:28.png" title="2019-10-15T02:49:28.png"></p><!--more--><p>打开环境变量设置：<br><img src="https://niekun.net/usr/uploads/2019/10/74431480.png" alt="2019-10-15T02:49:56.png" title="2019-10-15T02:49:56.png"></p><p>系统变量里找到 path 点击编辑：<br><img src="https://niekun.net/usr/uploads/2019/10/1452836558.png" alt="2019-10-15T02:51:05.png" title="2019-10-15T02:51:05.png"></p><p>将想要默认版本的 python 路径移动到其他版本前：<br><img src="https://niekun.net/usr/uploads/2019/10/3779938395.png" alt="2019-10-15T02:58:54.png" title="2019-10-15T02:58:54.png"></p><p><strong>注意有两个目录，一个是python 程序目录，还有一个 pip 目录。</strong></p><p>也可以使用命令切换使用不同版本的 python。</p><p>python 2.x 版：</p><pre><code>py -2 xxx.py
py -2 -m pip install xxxx</code></pre><p>python 3.x 版：</p><pre><code>py -3 xxx.py
py -3 -m pip install xxxx
</code></pre><h2>Linux</h2><p>先查看系统中有那些Python版本：</p><pre><code>ls /usr/bin/python*</code></pre><p><img src="https://niekun.net/usr/uploads/2019/10/1994649197.png" alt="2019-10-15T06:17:12.png" title="2019-10-15T06:17:12.png"></p><p>再查看系统默认的Python版本：</p><pre><code>python --version
Python 2.7.12
</code></pre><p>先删除默认的Python软链接：</p><pre><code>rm /usr/bin/python
</code></pre><p>然后创建一个新的软链接指向需要的Python版本：</p><pre><code>ln -s /usr/bin/python3.4 /usr/bin/python
</code></pre>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/413.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/413.html" thr:count="0"/>
</entry>
</feed>