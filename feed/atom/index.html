<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"
xmlns:thr="http://purl.org/syndication/thread/1.0"
xml:lang="zh-CN"
xml:base="https://blog.niekun.net/"
>
<title type="text">Marco Nie</title>
<subtitle type="text">you are the company you keep...</subtitle>
<updated>2023-06-08T13:16:00+08:00</updated>
<generator uri="http://typecho.org/" version="1.2.0">Typecho</generator>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/" />
<id>https://blog.niekun.net/feed/atom/</id>
<link rel="self" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" />
<entry>
<title type="html"><![CDATA[bash 脚本中使用 ssh 登录并执行命令]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2826.html" />
<id>https://blog.niekun.net/archives/2826.html</id>
<updated>2023-06-08T13:16:00+08:00</updated>
<published>2023-06-08T13:16:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[通过 ssh 可以远程登录服务器并执行相关操作，常用指令如下：ssh user@address -p 22执行命令后会提示输入用户密码才能最终进入。如果在脚本中我们需要通过 ssh 登录用户并执...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2826.html" xml:lang="zh-CN"><![CDATA[
<p>通过 ssh 可以远程登录服务器并执行相关操作，常用指令如下：</p><pre><code>ssh user@address -p 22
</code></pre><p>执行命令后会提示输入用户密码才能最终进入。</p><p>如果在脚本中我们需要通过 ssh 登录用户并执行相关命令的话就有些麻烦了。</p><p>可以通过安装 <strong>sshpass</strong> 的方式在脚本中定义 ssh 密码，从而解决需求。</p><p>安装 <strong>sshpass</strong>：</p><pre><code>apt install sshpass
</code></pre><p>使用：</p><pre><code>sshpass -p password ssh user@address -p 22
</code></pre><p>通过以上命令就可以直接在一行中定义 ssh 密码从而自动登录了。</p><p>在脚本中如果需要执行相关命令可以将命令写在 <code>''</code> 中：</p><pre><code>sshpass -p password ssh user@address 'cd /tmp; ls; touch test.txt'
</code></pre><p>如果要执行的命令较长可以分开写，用 <code>EOF</code> 追加输入，就不用写引号了：</p><pre><code>sshpass -p password ssh user@address &lt;&lt; EOF
cd /tmp
ls
touch test.txt
EOF</code></pre><p>注意结尾也要换行写 <code>EOF</code> 作为追加结束的标识。</p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2826.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Linux 创建新用户并授予 root 权限]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2822.html" />
<id>https://blog.niekun.net/archives/2822.html</id>
<updated>2023-06-05T16:54:00+08:00</updated>
<published>2023-06-05T16:54:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[Linux 默认会有一个 root 用户，但日常直接使用 root 有一定安全隐患，所以通常情况下我们习惯于创建一个新用户来登录使用，下面介绍常规的建立流程。建立新用户 vpsadmin：add...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2822.html" xml:lang="zh-CN"><![CDATA[
<p>Linux 默认会有一个 root 用户，但日常直接使用 root 有一定安全隐患，所以通常情况下我们习惯于创建一个新用户来登录使用，下面介绍常规的建立流程。</p><p><strong>建立新用户 vpsadmin：</strong></p><pre><code>adduser vpsadmin
</code></pre><p>输入以上命令后会提示输入用户密码，完成后用户 <strong>vpsadmin</strong> 就建立完成了。</p><p><strong>安装 sudo 功能(sudo 就是在关键时刻，让普通账户临时获得 root 的能力):</strong></p><pre><code>apt update &amp;&amp; apt install sudo
</code></pre><p>把 <strong>vpsadmin</strong> 用户加入 <strong>sudo</strong> 名单里:</p><pre><code>visudo
</code></pre><p>执行后会打开相关配置文件，在 <code># User privilege specification</code> 栏后加入一行配置即可：</p><pre><code># User privilege specification
root    ALL=(ALL:ALL) ALL

vpsadmin ALL=(ALL) NOPASSWD: ALL</code></pre><p>最上面的 <strong>root</strong> 表示能使用 sudo 命令的用户：</p><ul><li>第一个ALL表示允许使用sudo的主机；</li><li>第二个ALL及第三个ALL表示用户组及用户；</li><li>第四个ALL表示sudo可执行的命令，即所有命令；</li><li>在有的系统中也简写做：root ALL=(ALL) ALL</li></ul><p>最下面我们自己添加的 <strong>vpsadmin</strong> 是需要授权可以使用 <strong>root</strong> 权限的用户，配置中 <code>NOPASSWD</code> 的意思是在使用 <strong>root</strong> 权限的时候在命令前输入 <strong>sudo</strong> 即可，确认后无需输入 <strong>root</strong> 密码，这样在使用中可以不用频繁的输入密码。如果你想要遵循常规的使用 <code>sudo</code> 时都输入密码，将配置改为：<code>vpsadmin ALL=(ALL:ALL) ALL</code> 即可。</p><p>重新登录用户即可完成配置查看效果。</p><p>参考链接：<br><a href="https://xtls.github.io/document/level-0/ch04-security.html">安全防护篇</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2822.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Photoshop 离线安装 neural filters 文件]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2819.html" />
<id>https://blog.niekun.net/archives/2819.html</id>
<updated>2023-05-26T08:27:00+08:00</updated>
<published>2023-05-26T08:27:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[neural filters 是 Photoshop 最新的 AI 技术，但是需要登录账号以及订阅正版软件。最近发现网上分享的版本可以实现这一功能，但是我自己试验了一下其中的 filters 都...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2819.html" xml:lang="zh-CN"><![CDATA[
<p>neural filters 是 Photoshop 最新的 AI 技术，但是需要登录账号以及订阅正版软件。最近发现网上分享的版本可以实现这一功能，但是我自己试验了一下其中的 filters 都需要在线下载，但是不知道由于盗版的原因还是网络的原因，一直下载失败，搜索后发现可以将别人打包好的这些 filters 文件直接放入 ps 固定目录即可。</p><p>V24 版 Photoshop neural filters 下载：<br><a href="https://krakenfiles.com/view/Gp1hmKDnC7/file.html">https://krakenfiles.com/view/Gp1hmKDnC7/file.html</a><br><a href="https://krakenfiles.com/view/9DM2lJKAOs/file.html">https://krakenfiles.com/view/9DM2lJKAOs/file.html</a></p><p>下载后解压，将其中的所有文件和文件夹放入，注意不同版本 PS 需要路径中的数字不同：</p><ul><li><strong>Windows 系统</strong>：<code>%APPDATA%\Adobe\UXP\PluginsStorage\PHSP\24\Internal\com.adobe.nfp.gallery\PluginData</code></li><li><strong>macOS 系统</strong>：<code>~/Library/Application Support/Adobe/UXP/PluginsStorage/PHSP/24/Internal/com.adobe.nfp.gallery/PluginData</code></li></ul><p>重新打开 Photoshop，通过 <strong>help - sign in</strong> 登录 adobe 账号，然后就可以打开 <strong>filters - neural filters</strong> 了。</p><p>参考链接：<br><a href="https://www.reddit.com/r/GenP/comments/yd26z4/neural_filters_not_downloading/">https://www.reddit.com/r/GenP/comments/yd26z4/neural_filters_not_downloading/</a><br><a href="https://blog.niekun.net/archives/1187.html">https://blog.niekun.net/archives/1187.html</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2819.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[通过 AI + Photoshop 修复偏色图片]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2804.html" />
<id>https://blog.niekun.net/archives/2804.html</id>
<updated>2023-04-25T10:30:12+08:00</updated>
<published>2023-04-25T10:30:12+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[在一些特殊光照条件下很容易拍出偏色的图片，通常情况下很难恢复原有细节。现在有了很多 AI 工具可以方便的恢复原有色彩细节。下面介绍通过 Photoshop 结合一个 AI 上色网站的方法来恢复图...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2804.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://blog.niekun.net/usr/uploads/2023/04/562843203.png" alt="2023-04-25T02:01:19.png" title="2023-04-25T02:01:19.png"><br>在一些特殊光照条件下很容易拍出偏色的图片，通常情况下很难恢复原有细节。现在有了很多 AI 工具可以方便的恢复原有色彩细节。</p><p>下面介绍通过 Photoshop 结合一个 AI 上色网站的方法来恢复图片色彩。</p><p>Palette：<a href="https://palette.fm/">https://palette.fm/</a></p><p>首先需要通过 Photoshop 将图片去色，通过快捷键 ctrl shift U 快速去饱和度：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/392063121.png" alt="2023-04-25T02:03:40.png" title="2023-04-25T02:03:40.png"></p><p>然后保持图片到本地，打开 palette 官网，上传灰度图片即可：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/3549300290.png" alt="2023-04-25T02:04:40.png" title="2023-04-25T02:04:40.png"></p><p>从生成的多个模板中选择一个最合适的色彩图片：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/530587422.png" alt="2023-04-25T02:05:53.png" title="2023-04-25T02:05:53.png"></p><p>点击 download 下载下来，这里下载 HD 图片需要付费，免费模式下只能下载一个低清晰度的图片，但我们可以后期在 Photoshop 中恢复高清细节。</p><p>将下载的彩色低分辨率图片导入到 Photoshop 中，放在原始偏色的图片上面：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/4135975110.png" alt="2023-04-25T02:08:57.png" title="2023-04-25T02:08:57.png"></p><p>我们只需要它的色彩信息，所以将混合模式改为 color，此时图片细节已经恢复了，但噪点较多：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/1691169387.png" alt="2023-04-25T02:10:17.png" title="2023-04-25T02:10:17.png"></p><p>新建图层，混合模式改为 color：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/417063240.png" alt="2023-04-25T02:12:18.png" title="2023-04-25T02:12:18.png"></p><p>拾色器改为 3*3，all layer 模式：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/1310583693.png" alt="2023-04-25T02:12:51.png" title="2023-04-25T02:12:51.png"></p><p>选择画笔工具，选择 soft 笔刷，在衣服出选择一个正常颜色的区域，按住 alt 键拾取色彩，然后使用笔刷涂抹整个衣服区域：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/2051658881.png" alt="2023-04-25T02:16:22.png" title="2023-04-25T02:16:22.png"></p><p>此时衣服颜色就恢复正常了，同样的方式处理皮肤部分：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/623156937.png" alt="2023-04-25T02:20:54.png" title="2023-04-25T02:20:54.png"></p><p>然后就可以根据实际情况调节细节了，这里我们给嘴唇上点颜色，新建 solid color 红色图层，并反转蒙版，蒙版涂抹出嘴唇部分，混合模式改为 multiply：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/385215107.png" alt="2023-04-25T02:25:39.png" title="2023-04-25T02:25:39.png"></p><p>调节 layer style 柔滑高光过渡：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/677701391.png" alt="2023-04-25T02:27:38.png" title="2023-04-25T02:27:38.png"></p><p>画笔工具化的区域如果过于生硬，可以调节蒙版属性羽化值来柔化选区：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/2944943175.png" alt="2023-04-25T02:29:06.png" title="2023-04-25T02:29:06.png"></p><p>以下就是最终效果：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/3449082101.png" alt="2023-04-25T02:29:32.png" title="2023-04-25T02:29:32.png"></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2804.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[通过 adobe express 设计好看的插画]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2795.html" />
<id>https://blog.niekun.net/archives/2795.html</id>
<updated>2023-04-25T09:42:00+08:00</updated>
<published>2023-04-25T09:42:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[通过 adobe express 可以方便的制作专业的用于社交媒体的宣传海报，只需要选择一个合适的模板并对其进行修改即可。下面介绍操作流程。官方网站：https://express.adobe....]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2795.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://blog.niekun.net/usr/uploads/2023/04/4244425467.png" alt="2023-04-25T01:32:10.png" title="2023-04-25T01:32:10.png"><br>通过 adobe express 可以方便的制作专业的用于社交媒体的宣传海报，只需要选择一个合适的模板并对其进行修改即可。下面介绍操作流程。</p><p>官方网站：<a href="https://express.adobe.com/">https://express.adobe.com/</a></p><!--more--><p>登录网站后进入主页，可以选择你想制作一个什么类型的图片：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/3163992771.png" alt="2023-04-25T01:34:22.png" title="2023-04-25T01:34:22.png"></p><p>然后进入编辑界面，左侧可以选择此类型的很多模板，选择一个喜欢的样式：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/2593029178.png" alt="2023-04-25T01:35:33.png" title="2023-04-25T01:35:33.png"></p><p>然后可以对这个模板的内容进行个性化修改，包括字体，图标什么的都可以修改：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/1814374137.png" alt="2023-04-25T01:37:53.png" title="2023-04-25T01:37:53.png"></p><p>也可以添加新图案或图片：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/3398470744.png" alt="2023-04-25T01:38:33.png" title="2023-04-25T01:38:33.png"></p><p>可以上传自己的图片替换原始图片，上传后右侧有工具可以直接消除图片背景：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/383992829.png" alt="2023-04-25T01:40:38.png" title="2023-04-25T01:40:38.png"></p><p>完成设计后就可以下载图片了：<br><img src="https://blog.niekun.net/usr/uploads/2023/04/2719715559.png" alt="2023-04-25T01:41:33.png" title="2023-04-25T01:41:33.png"></p><p>整个过程非常简单，提供的免费模板也非常多，适合需要快速设计插图的需求。</p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2795.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[自动蒙版快速拆分图像各个元素 in Photoshop]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2787.html" />
<id>https://blog.niekun.net/archives/2787.html</id>
<updated>2023-02-07T15:02:43+08:00</updated>
<published>2023-02-07T15:02:43+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[图片中有时候想要单独调整某个部分，可以通过选区工具钢笔工具等选取出来。但是当场景比较复杂或者需要单独调整多个元素时，就很耗费时间了，新版的 Photoshop 提供了快捷的方法来一键生成主要个体...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2787.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://blog.niekun.net/usr/uploads/2023/02/3360067067.png" alt="2023-02-07T06:58:01.png" title="2023-02-07T06:58:01.png"><br>图片中有时候想要单独调整某个部分，可以通过选区工具钢笔工具等选取出来。但是当场景比较复杂或者需要单独调整多个元素时，就很耗费时间了，新版的 Photoshop 提供了快捷的方法来一键生成主要个体的 mask 蒙版。</p><!--more--><p>导入图片后点击 layer - mask all objects：<br><img src="https://blog.niekun.net/usr/uploads/2023/02/2266065659.png" alt="2023-02-07T06:59:43.png" title="2023-02-07T06:59:43.png"></p><p>等待处理完成就会自动生成识别到的个体的单独蒙版：<br><img src="https://blog.niekun.net/usr/uploads/2023/02/3016892681.png" alt="2023-02-07T07:00:27.png" title="2023-02-07T07:00:27.png"></p><p>此时就可以利用这些蒙版来单独修改特定区域的色彩了：<br><img src="https://blog.niekun.net/usr/uploads/2023/02/1999022133.png" alt="2023-02-07T07:02:16.png" title="2023-02-07T07:02:16.png"></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2787.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[chrome 内置翻译工具流量走代理配置]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2784.html" />
<id>https://blog.niekun.net/archives/2784.html</id>
<updated>2022-12-14T08:54:19+08:00</updated>
<published>2022-12-14T08:54:19+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[从下半年开始发现 chrome 系统内置的网页翻译工具就开始抽风，然后彻底不能翻译了，查了下其流量 url 是 translate.googleapis.com，将 url 配置到我的代理列表中...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2784.html" xml:lang="zh-CN"><![CDATA[
<p>从下半年开始发现 chrome 系统内置的网页翻译工具就开始抽风，然后彻底不能翻译了，查了下其流量 url 是 <code>translate.googleapis.com</code>，将 url 配置到我的代理列表中走 switchyomega 依然无法访问。</p><p>经过查询发现 chrome 翻译的流量只能走系统代理，这就有点麻烦了。开始使用了修改 hosts 的方式指定到国内可用 ip 上，但是使用并不长久，没几天就又不可用了。</p><p>家里电脑可以在 openwrt 路由上配置好代理，比较简单，但是想要在本机上直接配置就不太方便了，需要设置系统为全局代理，但我又不想这样做。</p><p>今天发现 proxifier 居然可以指定 hosts 配置代理，测试了下居然可行：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/2596947788.png" alt="2022-12-14T00:51:50.png" title="2022-12-14T00:51:50.png"></p><p>如果之前在系统 hosts 文件添加过 <code>translate.googleapis.com</code> 的定向需要先将其删除，设置好后重启 chrome 发现网页翻译可以正常使用了。</p><h3>参考链接</h3><p><a href="https://github.com/feliscatus/switchyomega/issues/264#issuecomment-377439133">chrome自带的翻译工具无法使用代理#264</a><br><a href="https://www.v2ex.com/t/889119">Chrome 右键翻译，怎么 fix？</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2784.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[白色背景灰色水印去除 in Photoshop]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2777.html" />
<id>https://blog.niekun.net/archives/2777.html</id>
<updated>2022-12-02T10:20:09+08:00</updated>
<published>2022-12-02T10:20:09+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[在网络中经常遇到下载的图片上带有水印，一般都是重复文字带有透明度然后铺满整个图片。一般没有快捷方法去除，只能印章工具或或者选区工具进行智能填充，但如果背景是纯白色，水印是透明灰度文字的话可以快速...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2777.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://blog.niekun.net/usr/uploads/2022/12/2425866741.png" alt="2022-12-02T02:13:43.png" title="2022-12-02T02:13:43.png"><br>在网络中经常遇到下载的图片上带有水印，一般都是重复文字带有透明度然后铺满整个图片。一般没有快捷方法去除，只能印章工具或或者选区工具进行智能填充，但如果背景是纯白色，水印是透明灰度文字的话可以快速去除。</p><p>原图如上所示，背景是白色，水印文字是没有颜色的灰度色彩。</p><p>首先选区工具选取纯白部分的文字，ctrl J 复制选中部分：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/1600826648.png" alt="2022-12-02T02:15:28.png" title="2022-12-02T02:15:28.png"></p><p>然后点击 ctrl i 反转复制的图层：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/1953618077.png" alt="2022-12-02T02:15:55.png" title="2022-12-02T02:15:55.png"></p><p>将图层混合模式改为 color dodge：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/3088136348.png" alt="2022-12-02T02:16:35.png" title="2022-12-02T02:16:35.png"></p><p>此时会发现那个地方的水印没有了，ctrl J 复制此图层，将其拖拽到其他水印地方也会恢复其水印下方的色彩：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/3496720110.png" alt="2022-12-02T02:19:59.png" title="2022-12-02T02:19:59.png"></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2777.html#comments" thr:count="1" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="1"/>
</entry>
<entry>
<title type="html"><![CDATA[命令行激活 Windows 密钥]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2770.html" />
<id>https://blog.niekun.net/archives/2770.html</id>
<updated>2022-09-19T09:22:00+08:00</updated>
<published>2022-09-19T09:22:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[注意：安装新密钥及激活时需要在管理员权限下运行终端。安装新密钥，会自动替换当前密钥：slmgr /ipk xxxx-xxxx-xxxx-xxxx-xxxx激活 Windows：slmgr /at...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2770.html" xml:lang="zh-CN"><![CDATA[
<p>注意：安装新密钥及激活时需要在<strong>管理员权限</strong>下运行终端。</p><p>安装新密钥，会自动替换当前密钥：</p><pre><code>slmgr /ipk xxxx-xxxx-xxxx-xxxx-xxxx
</code></pre><p>激活 Windows：</p><pre><code>slmgr /ato
</code></pre><p>显示当前授权信息：</p><pre><code>slmgr /dli
</code></pre><p>显示详细授权信息：</p><pre><code>slmgr /dlv
</code></pre><p>显示授权剩余日期：</p><pre><code>slmgr /xpr
</code></pre><p>密钥可用性在线检测：<a href="https://dbmer.com/checkkey/">https://dbmer.com/checkkey/</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2770.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Ubuntu 安装 FTP server]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2769.html" />
<id>https://blog.niekun.net/archives/2769.html</id>
<updated>2022-09-16T09:28:00+08:00</updated>
<published>2022-09-16T09:28:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[虽然平时可以用 sftp 或 webdav 代替，但是有些时候客户端只支持 ftp 链接，所以介绍下在服务器上安装 ftp server 的简单方法。系统平台：Ubuntu server 20.04]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2769.html" xml:lang="zh-CN"><![CDATA[
<p>虽然平时可以用 sftp 或 webdav 代替，但是有些时候客户端只支持 ftp 链接，所以介绍下在服务器上安装 ftp server 的简单方法。</p><p>系统平台：Ubuntu server 20.04</p><!--more--><h3>安装 vsftpd</h3><p>主要是通过 vsftpd 实现 ftp 功能的，首先安装：</p><pre><code>apt update &amp;&amp; apt install vsftpd
</code></pre><p>安装好后，vsftpd 会自动启动，可以查看当前运行状态：</p><pre><code>systemctl status vsftpd

● vsftpd.service - vsftpd FTP server
     Loaded: loaded (/lib/systemd/system/vsftpd.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2020-04-27 19:35:30 IST; 13s ago
   Main PID: 54532 (vsftpd)
      Tasks: 1 (limit: 1137)
     Memory: 652.0K
     CGroup: /system.slice/vsftpd.service
             └─54532 /usr/sbin/vsftpd /etc/vsftpd.conf

Apr 27 19:35:30 ubuntu systemd[1]: Starting vsftpd FTP server...
Apr 27 19:35:30 ubuntu systemd[1]: Started vsftpd FTP server.</code></pre><p>设置为开机自动启动：</p><pre><code>systemctl enable vsftpd
</code></pre><h3>创建 ftp 用户</h3><p>默认安装好后，会自动创建一个 ftp 用户，这个用户经过我测试无法登录 ftp 服务，这里我们自己创建一个新用户用于登录 ftp，这里创建用户名为 ftpuser：</p><pre><code>adduser ftpuser
</code></pre><p>期间会提示输入创建用户的密码。</p><p>我们只需要这个新用户登录 ftp 不需要它能够访问 ssh 服务，所以下面我们将这个用户排除在 ssh 用户之外，编辑 <code>/etc/ssh/sshd_config</code> 文件，在最后一行添加以下内容：</p><pre><code>DenyUsers ftpuser</code></pre><p>保存后重启 ssh 服务：</p><pre><code>sudo service sshd restart
</code></pre><h3>ftp 目录及权限</h3><p>我们新建一个用于 ftp 的目录：</p><pre><code>mkdir /home/www/ftp
</code></pre><p>将此目录所有者设置为上面创建的 ftpuser：</p><pre><code>chown -R ftpuser:ftpuser /home/www/ftp
</code></pre><p>默认情况下 ftp 目录的根路径不允许有<strong>写权限</strong>，否则链接的时候会报错，所以我们取消这个文件夹的对应权限：</p><pre><code>chmod a-w /home/www/ftp
</code></pre><p>如果想要上传文件，我们可以在这个文件夹内新建一个文件夹专门用来上传：</p><pre><code>mkdir /home/www/ftp/uploads
</code></pre><p>同样的文件夹所有者为 ftpuser：</p><pre><code>chown -R ftpuser:ftpuser /home/www/ftp/uploads
</code></pre><h3>vsftpd 配置文件</h3><p>vsftpd 配置文件路径为：<code>/etc/vsftpd.conf</code>，打开并修改如下设置，最后一行配置文件中没有的话需要自己创建一下：</p><pre><code>listen=NO
listen_ipv6=YES
anonymous_enable=NO
local_enable=YES
write_enable=YES
local_umask=022
dirmessage_enable=YES
use_localtime=YES
xferlog_enable=YES
connect_from_port_20=YES
chroot_local_user=YES
secure_chroot_dir=/var/run/vsftpd/empty
pam_service_name=vsftpd

local_root=/home/www/ftp
#allow_writeable_chroot=YES</code></pre><p>修改完成后重启服务：</p><pre><code>systemctl restart vsftpd
</code></pre><p>此时就可以使用 ftp 客户端连接到 ftp 服务器了。</p><p>如果登录的时候提示：<strong>500 oops vsftpd refusing to run with writable root inside chroot()</strong>，报错，则简单的方法就是在 <code>/etc/vsftpd.conf</code> 添加一句：<code>allow_writeable_chroot=YES</code>，然后重启 vsftpd 服务即可。</p><p>为了更加安全，推荐配置 ssl 证书，可以参考：<a href="https://devanswers.co/install-ftp-server-vsftpd-ubuntu-20-04/#id-7-secure-ftp-with-tls-recommended">Secure FTP with TLS (Recommended)</a></p><p>以上就是 ftp server 的简单安装及配置教程。</p><h3>参考链接</h3><p><a href="https://devanswers.co/install-ftp-server-vsftpd-ubuntu-20-04/">How To Install an FTP server (vsftpd) on Ubuntu 20.04/20.10</a><br><a href="https://ubuntu.com/server/docs/service-ftp">FTP Server</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2769.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
</feed>