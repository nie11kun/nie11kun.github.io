<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"
xmlns:thr="http://purl.org/syndication/thread/1.0"
xml:lang="zh-CN"
xml:base="https://blog.niekun.net/"
>
<title type="text">Marco Nie</title>
<subtitle type="text">I’m dancing at the feet of my lord...</subtitle>
<updated>2020-03-13T15:27:34+08:00</updated>
<generator uri="http://typecho.org/" version="1.2/18.10.23">Typecho</generator>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/" />
<id>https://blog.niekun.net/feed/atom/</id>
<link rel="self" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" />
<entry>
<title type="html"><![CDATA[systemd 使用入门]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1334.html" />
<id>https://blog.niekun.net/archives/1334.html</id>
<updated>2020-03-13T15:27:34+08:00</updated>
<published>2020-03-13T15:27:34+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.htmlhttp://www.ruanyifeng.com/bl...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1334.html" xml:lang="zh-CN"><![CDATA[
<p><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html">http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-commands.html</a><br><a href="http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html">http://www.ruanyifeng.com/blog/2016/03/systemd-tutorial-part-two.html</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1334.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1334.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Windows 下 VMware 安装 Ubuntu 虚拟机]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1316.html" />
<id>https://blog.niekun.net/archives/1316.html</id>
<updated>2020-03-13T14:00:00+08:00</updated>
<published>2020-03-13T14:00:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[虽然 Windows 10 自带有 WSL，可以安装 Linux 系统，但是在实际使用中发现还是有很多限制的。所以想要完整的 Linux 系统，还是安装了虚拟机。WSL 开启参考：https:/...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1316.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://blog.niekun.net/usr/uploads/2020/03/4046207363.png" alt="2020-03-13T03:42:47.png" title="2020-03-13T03:42:47.png"><br>虽然 Windows 10 自带有 WSL，可以安装 Linux 系统，但是在实际使用中发现还是有很多限制的。所以想要完整的 Linux 系统，还是安装了虚拟机。</p><p>WSL 开启参考：<a href="https://blog.niekun.net/archives/1148.html">https://blog.niekun.net/archives/1148.html</a></p><p>我使用的是 VMware workstation 安装了 Ubuntu 18.04 LTS。安装过程中与遇到了一些问题，需要特别的进行处理，在此做一下记录。</p><p class="more"><a href="https://blog.niekun.net/archives/1316.html" title="Windows 下 VMware 安装 Ubuntu 虚拟机">[...]</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1316.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1316.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[我的 MacBook Pro 维修记]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1311.html" />
<id>https://blog.niekun.net/archives/1311.html</id>
<updated>2020-03-12T16:16:00+08:00</updated>
<published>2020-03-12T16:16:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[我的 mbp 是 15款 13寸的，已经用了快 5 年了，最近想着把小本存在的问题都修复一下，就全方位检查了一下。第一个问题是后背板螺丝损坏，由于螺丝很小而且在当时拆机时由于使用了劣质螺丝刀，导...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1311.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://blog.niekun.net/usr/uploads/2020/03/4011691609.png" alt="2020-03-12T08:12:19.png" title="2020-03-12T08:12:19.png"></p><p>我的 mbp 是 15款 13寸的，已经用了快 5 年了，最近想着把小本存在的问题都修复一下，就全方位检查了一下。</p><ul><li>第一个问题是后背板螺丝损坏，由于螺丝很小而且在当时拆机时由于使用了劣质螺丝刀，导致大部分螺丝都花了。</li><li>第二个问题是 USB 接口，在购买一年后因为故障到售后维修后，就出现右边的 USB 无法识别的问题，但当时着急用就没有送到售后去一直将就使用左边的 USB 口。</li></ul><p class="more"><a href="https://blog.niekun.net/archives/1311.html" title="我的 MacBook Pro 维修记">[...]</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1311.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1311.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[网站压力测试 loader.io]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1300.html" />
<id>https://blog.niekun.net/archives/1300.html</id>
<updated>2020-03-10T15:51:50+08:00</updated>
<published>2020-03-10T15:51:50+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[免费的网站压力测试平台 loader.io官网：https://loader.io/]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1300.html" xml:lang="zh-CN"><![CDATA[
<p>免费的网站压力测试平台 loader.io<br>官网：<a href="https://loader.io/">https://loader.io/</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1300.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1300.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[获取用户真实 IP in Nginx]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1296.html" />
<id>https://blog.niekun.net/archives/1296.html</id>
<updated>2020-03-06T15:00:00+08:00</updated>
<published>2020-03-06T15:00:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[对于没有连代理访问网站的用户或者没有加 CDN 的网站，可以直接在 Nginx 中用 deny 命令来拒绝某个 IP 的访问，$remote_addr 存储了当前链接用户的 IP:https:/...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1296.html" xml:lang="zh-CN"><![CDATA[
<p>对于没有连代理访问网站的用户或者没有加 CDN 的网站，可以直接在 Nginx 中用 deny 命令来拒绝某个 IP 的访问，<strong>$remote_addr</strong> 存储了当前链接用户的 IP:<a href="https://nginx.org/en/docs/http/ngx_http_access_module.html#deny">https://nginx.org/en/docs/http/ngx_http_access_module.html#deny</a></p><pre><code>location / {
    deny  192.168.1.1;
    allow 192.168.1.0/24;
    allow 10.1.1.0/16;
    allow 2001:0db8::/32;
    deny  all;
}</code></pre><p>如果加了代理或者 CDN 就没法直接获取到用户真实 IP 了，可以在 nginx 使用以下指令提取用户真实 IP：</p><pre><code>#获取用户真实IP，并赋值给变量$clientRealIP
map $http_x_forwarded_for  $clientRealIp {
        &quot;&quot;      $remote_addr;
        ~^(?P&lt;firstAddr&gt;[0-9\.]+),?.*$  $firstAddr;
}</code></pre><p>或者：</p><pre><code>set $realip $remote_addr;
  if ($http_x_forwarded_for ~ &quot;^(\d+\.\d+\.\d+\.\d+)&quot;) {
    set $realip $1;
  }</code></pre>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1296.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1296.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Nginx upstream timed out 问题的处理]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1280.html" />
<id>https://blog.niekun.net/archives/1280.html</id>
<updated>2020-03-05T08:53:00+08:00</updated>
<published>2020-03-05T08:53:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[在安装 wordpress 后遇到一个问题，打开后台的 theme 页面后，一直无法加载出来内容，查看后台 nginx 的日志，发现如下错误：[error] 10929#10929: *337 ...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1280.html" xml:lang="zh-CN"><![CDATA[
<p>在安装 wordpress 后遇到一个问题，打开后台的 theme 页面后，一直无法加载出来内容，查看后台 nginx 的日志，发现如下错误：</p><pre><code>[error] 10929#10929: *337 upstream timed out (110: Connection timed out) while reading upstream, client: 127.0.0.1, server: 127.0.0.1, request: &quot;GET /wp-admin/theme-install.php HTTP/1.1&quot;, upstream: &quot;fastcgi://unix:/run/php/php7.3-fpm.sock:&quot;, host: &quot;127.0.0.1&quot;, referrer: &quot;http://127.0.0.1/wp-admin/themes.php&quot;</code></pre><p>大概是处理 php 页面的时候 timeout 了，Google 了发现问题出在 fastCGI 上:<a href="https://talk.plesk.com/threads/upstream-timed-out-110-connection-timed-out-randomly.350497/">https://talk.plesk.com/threads/upstream-timed-out-110-connection-timed-out-randomly.350497/</a><br>解决方案就是在 nginx 配置文件内定义一下相关超时时间设定：</p><pre><code>proxy_connect_timeout 600;
proxy_send_timeout 600;
proxy_read_timeout 600;
send_timeout 600;</code></pre><p>将上述内容加入 config 文件，reload nginx 测试页面加载是否正常：</p><pre><code>sudo service nginx configtest
sudo service nginx reload


</code></pre>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1280.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1280.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Windows 10 WSL 不支持 systemd]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1258.html" />
<id>https://blog.niekun.net/archives/1258.html</id>
<updated>2020-03-04T11:44:25+08:00</updated>
<published>2020-03-04T11:44:25+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[在使用 WSL 中发现无法使用 systemd 指令，会有如下报错信息：System has not been booted with systemd as init system (PID 1...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1258.html" xml:lang="zh-CN"><![CDATA[
<p>在使用 WSL 中发现无法使用 systemd 指令，会有如下报错信息：System has not been booted with systemd as init system (PID 1). Can't operate</p><p>查询后发现 WSL 的确有这个问题：<a href="https://github.com/MicrosoftDocs/WSL/issues/457">https://github.com/MicrosoftDocs/WSL/issues/457</a></p><p>解决方法是用<strong>管理员权限打开 WSL</strong>，然后使用 <code>sudo service</code> 来控制进程，如：</p><pre><code>sudo service nginx start
</code></pre>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1258.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1258.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Nginx 可用指令和变量索引]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1257.html" />
<id>https://blog.niekun.net/archives/1257.html</id>
<updated>2020-03-04T11:19:18+08:00</updated>
<published>2020-03-04T11:19:18+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[手册：http://nginx.org/en/docs/涵盖了安装教程，开始使用教程，常用使用情景教程，指令索引，变量索引 等链接。变量：http://nginx.org/en/docs/var...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1257.html" xml:lang="zh-CN"><![CDATA[
<p>手册：<a href="http://nginx.org/en/docs/">http://nginx.org/en/docs/</a></p><blockquote>涵盖了<strong>安装教程，开始使用教程，常用使用情景教程，指令索引，变量索引</strong> 等链接。</blockquote><p>变量：<a href="http://nginx.org/en/docs/varindex.html">http://nginx.org/en/docs/varindex.html</a></p><blockquote>变量在 nginx 配置中使用很多，使用变量可以根据需要处理特定部分。如：$rui, $scheme, $request_filename, $host, $request_uri</blockquote><p>指令：<a href="http://nginx.org/en/docs/dirindex.html">http://nginx.org/en/docs/dirindex.html</a></p><blockquote>如：listen, include, location, if, auth_basic</blockquote>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1257.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1257.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Git 命令行基本操作]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1252.html" />
<id>https://blog.niekun.net/archives/1252.html</id>
<updated>2020-03-04T09:53:00+08:00</updated>
<published>2020-03-04T09:53:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[Git 是目前世界上最流行的版本控制工具，它可以记录历史操作和协同工作。Git is a free and open source distributed version control sys...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1252.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://niekun.net/usr/uploads/2020/03/2690364336.png" alt="2020-03-04T00:56:38.png" title="2020-03-04T00:56:38.png"></p><p>Git 是目前世界上最流行的版本控制工具，它可以记录历史操作和协同工作。</p><blockquote>Git is a free and open source distributed version control system designed to handle everything from small to very large projects with speed and efficiency.</blockquote><p>下面介绍 Git 命令行工具的安装和使用。</p><p class="more"><a href="https://blog.niekun.net/archives/1252.html" title="Git 命令行基本操作">[...]</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1252.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1252.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[关于手机端无法使用 typecho 的搜索框解决]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1249.html" />
<id>https://blog.niekun.net/archives/1249.html</id>
<updated>2020-03-03T22:34:48+08:00</updated>
<published>2020-03-03T22:34:48+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[最近自己做了一个 typecho 的主题，主要是手机端的页面优化和字体优化，使用了 bootstrap 来渲染，主题在 GitHub 上开源：https://github.com/nie11ku...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1249.html" xml:lang="zh-CN"><![CDATA[
<p>最近自己做了一个 typecho 的主题，主要是手机端的页面优化和字体优化，使用了 bootstrap 来渲染，主题在 GitHub 上开源：<a href="https://github.com/nie11kun/TypechoAwesome">https://github.com/nie11kun/TypechoAwesome</a></p><p>但是测试发现搜索框无法正确搜索，总是返回主页。</p><p>今天终于发现问题所在了，由于我的网站使用的 NS 服务是 cloudflare 的，在当时设置的时候，把移动端 Mobile Redirect 优化选择上了，每次访问网站都会重定向到 <strong>m.niekun.net</strong>，估计是 cf 做了什么精简，导致功能丢失，把 Mobile Redirect 关闭就正常了。</p><p>具体修改路径是 speed - optimisation：<br><img src="https://niekun.net/usr/uploads/2020/03/448267460.png" alt="2020-03-03T14:33:02.png" title="2020-03-03T14:33:02.png"></p><p>页面拉到最下方，将 Mobile Redirect 关掉：<br><img src="https://niekun.net/usr/uploads/2020/03/412183147.png" alt="2020-03-03T14:33:36.png" title="2020-03-03T14:33:36.png"></p><p>再次访问主页，就不会重定向到 <strong>m.niekun.net</strong> 而是 <strong>niekun.net</strong> 了。</p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1249.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1249.html" thr:count="0"/>
</entry>
</feed>