<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"
xmlns:thr="http://purl.org/syndication/thread/1.0"
xml:lang="zh-CN"
xml:base="https://blog.niekun.net/"
>
<title type="text">Marco Nie</title>
<subtitle type="text">you are the company you keep...</subtitle>
<updated>2020-10-12T15:18:00+08:00</updated>
<generator uri="http://typecho.org/" version="1.2/18.10.23">Typecho</generator>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/" />
<id>https://blog.niekun.net/feed/atom/</id>
<link rel="self" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" />
<entry>
<title type="html"><![CDATA[解决 proxifier 和 wsl 2 无法同时使用的问题]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1797.html" />
<id>https://blog.niekun.net/archives/1797.html</id>
<updated>2020-10-12T15:18:00+08:00</updated>
<published>2020-10-12T15:18:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[今天将 Windows 10 升级到了 build 2004 版，顺便将 wsl 升级到了 wsl 2，升级教程参考：https://blog.niekun.net/archives/1785....]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1797.html" xml:lang="zh-CN"><![CDATA[
<p>今天将 Windows 10 升级到了 build 2004 版，顺便将 wsl 升级到了 wsl 2，升级教程参考：<a href="https://blog.niekun.net/archives/1785.html">https://blog.niekun.net/archives/1785.html</a>。</p><p>运行 wsl 2 时，发现如下报错：</p><pre><code>PS C:\Users\Marco Nie&gt; wsl
The attempted operation is not supported for the type of object referenced.</code></pre><p>无法正常使用 wsl，查询后得知是由于我正在使用的 proxifier 和 wsl 有了冲突，proxifier 是我一直使用的用来代理程序的应用。在 wsl 的 github 项目讨论中看到有人问了 proxifier 开发者，得到了解决方法，需要使用提供的程序来让 wsl 在运行时不要加载 LSP DLLs。</p><ul><li>下载 <a href="https://blog.niekun.net/usr/uploads/2020/10/3243699170.zip">NoLsp.zip</a>，解压得到 NoLsp.exe</li><li>以管理员权限运行 terminal，执行 <code>path\to\NoLsp.exe c:\windows\system32\wsl.exe</code></li></ul><p>看到终端显示 <code>Succsess!</code>，表示操作完成，然后 wsl 系统就可以正常打开使用同时不影响 proxifier。</p><p>参考链接：<a href="https://github.com/microsoft/WSL/issues/4177">https://github.com/microsoft/WSL/issues/4177</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1797.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1797.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Windows 重建图标缓存]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1793.html" />
<id>https://blog.niekun.net/archives/1793.html</id>
<updated>2020-10-12T11:10:00+08:00</updated>
<published>2020-10-12T11:10:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[在使用 Windows 中有时候会发现某个程序或文件的图标显示不正常，一般是图标缓存的问题，重建一下即可。以 Windows 10 为例，图标缓存文件路径为：%LOCALAPPDATA%\Mic...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1793.html" xml:lang="zh-CN"><![CDATA[
<p>在使用 Windows 中有时候会发现某个程序或文件的图标显示不正常，一般是图标缓存的问题，重建一下即可。</p><p>以 Windows 10 为例，图标缓存文件路径为：<code>%LOCALAPPDATA%\Microsoft\Windows\Explorer</code></p><p>文件夹内的 <code>iconcache_*.db</code> 就是图标缓存文件，删除这些文件然后重启 explorer 即可。</p><p>下面介绍命令的方式处理，使用 power shell 终端：</p><pre><code># 停止 explorer 进程
taskkill /f /im explorer.exe

# 删除缓存图标文件，ps 中使用 $Env:&lt;variable-name&gt; 表达环境变量
del &quot;$env:LOCALAPPDATA\Microsoft\Windows\Explorer\iconcache*.db&quot;

# 重启 explorer
start explorer</code></pre><p>完成后查看图标是否已经正常显示。</p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1793.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1793.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Windows 常用终端命令]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1788.html" />
<id>https://blog.niekun.net/archives/1788.html</id>
<updated>2020-10-12T09:30:00+08:00</updated>
<published>2020-10-12T09:30:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[系统版本：winver系统详细信息：systeminfo当前用户名：whoami]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1788.html" xml:lang="zh-CN"><![CDATA[
<p>系统版本：</p><pre><code>winver
</code></pre><p>系统详细信息：</p><pre><code>systeminfo
</code></pre><p>当前用户名：</p><pre><code>whoami

</code></pre><!--more--><p>本地网络：</p><pre><code>ipconfig
</code></pre><p>刷新 DNS 缓存：</p><pre><code>ipconfig /flushdns
</code></pre><p>路由信息：</p><pre><code>pathping
</code></pre><p>cmd 命令换行符：</p><pre><code>echo abc
等同于：
echo ^
abc</code></pre><p>powershell 命令换行符：</p><pre><code>echo abc
等同于：
echo `
abc</code></pre><p>信息过滤：类似 Linux 的 grep</p><pre><code>findstr
systeminfo | findstr &quot;System Type&quot;
</code></pre><p>查看命令的帮助：</p><pre><code>pathping /?
findstr /?
systeminfo /?
</code></pre><p>显示所有端口情况：</p><pre><code>netstat -ano
</code></pre><p>显示某个端口的占用情况 返回的数据中最后的数字为 PID 号：</p><pre><code>netstat -aon|findstr &quot;7200&quot;
</code></pre><p>根据 PID 号结束对应进程：</p><pre><code>taskkill /f /pid  7200
</code></pre><p>结束某个进程：</p><pre><code>taskkill /f /im explorer.exe
</code></pre><p>删除某个文件：</p><pre><code>del &quot;IconCache.db&quot;
</code></pre><p>启动某个程序：</p><pre><code>start explorer





</code></pre>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1788.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1788.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Windows 10 Linux 子系统 WSL 升级到 WSL 2]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1785.html" />
<id>https://blog.niekun.net/archives/1785.html</id>
<updated>2020-10-12T09:24:00+08:00</updated>
<published>2020-10-12T09:24:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[Windows 10 上的 wsl 可以方便的运行 Linux 环境，最近从 wsl 升级到了 wsl 2，看了下介绍主要区别是：increase file system performance...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1785.html" xml:lang="zh-CN"><![CDATA[
<p>Windows 10 上的 wsl 可以方便的运行 Linux 环境，最近从 wsl 升级到了 wsl 2，看了下介绍主要区别是：</p><ul><li>increase file system performance</li><li>support full system call compatibility</li></ul><p>增加了系统性能，更加完善的 Linux 系统环境。</p><p>之前再 wsl 上无法使用的一些功能如 systemd 和网络 socket 提取的功能不知道是否可用了，下面就升级到 wsl 2 进行测试。</p><p>关于 wsl 的介绍和安装可以参考我的教程：<a href="https://blog.niekun.net/archives/1148.html">https://blog.niekun.net/archives/1148.html</a></p><!--more--><h3>环境要求</h3><p>Requirements：</p><ul><li>For x64 systems: Version 1903 or higher, with Build 18362 or higher.</li><li>For ARM64 systems: Version 2004 or higher, with Build 19041 or higher.</li><li>Builds lower than 18362 do not support WSL 2. Use the Windows Update Assistant to update your version of Windows.</li></ul><p>可以使用命令查看当前系统版本，快捷键 <code>win + R</code>，输入 <code>winver</code> 弹出系统信息：<br><img src="https://blog.niekun.net/usr/uploads/2020/10/2650368745.jpg" alt="1.jpg" title="1.jpg"></p><h3>命令行打开系统功能</h3><p>再我之前写的 wsl 安装教程里，介绍了从系统控制面板和命令行打开 <code>Windows Subsystem for Linux</code> 功能的方法，这里只介绍命令行方式。</p><p>首先以<strong>管理员权限</strong>打开 powershell。</p><p>如果之前没有安装 wsl 的话首先开启 <code>Windows Subsystem for Linux</code>：</p><pre><code>dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
</code></pre><p>然后开启 <code>Virtual Machine feature</code>：</p><pre><code>dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
</code></pre><p>完成以上两部后，重启系统。</p><p>重启完成后安装 Linux 内核更新包：<a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi">点击下载</a></p><p>再次重启系统。</p><p>设置 wsl 默认版本为 2：(管理员权限打开 powershell)</p><pre><code>wsl --set-default-version 2
</code></pre><p>设置默认版本后，以后安装的 Linux 子系统默认为 wsl 2 版本。</p><p>也可以将之前安装的 Linux 子系统升级到 wsl 2：</p><pre><code># 查看当前已安装的子系统
wsl -l -v

# 升级某个子系统到 wsl 2
wsl --set-version Ubuntu 2</code></pre><p>wsl 2 安装完成后就可以去 Windows 商店下载安装 Linux 发行版了：<a href="https://aka.ms/wslstore">https://aka.ms/wslstore</a></p><p>安装 Linux 发行版后的具体设置和之前 wsl 安装教程一样：<a href="https://blog.niekun.net/archives/1148.html">https://blog.niekun.net/archives/1148.html</a></p><h3>参考链接</h3><p><a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">https://docs.microsoft.com/en-us/windows/wsl/install-win10</a><br><a href="https://docs.microsoft.com/en-us/windows/wsl/compare-versions">https://docs.microsoft.com/en-us/windows/wsl/compare-versions</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1785.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1785.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[powershell 脚本实现系统消息提醒]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1782.html" />
<id>https://blog.niekun.net/archives/1782.html</id>
<updated>2020-09-30T11:52:07+08:00</updated>
<published>2020-09-30T11:52:07+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[https://mcpmag.com/articles/2017/09/07/creating-a-balloon-tip-notification-using-powershell.aspx]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1782.html" xml:lang="zh-CN"><![CDATA[
<p><a href="https://mcpmag.com/articles/2017/09/07/creating-a-balloon-tip-notification-using-powershell.aspx">https://mcpmag.com/articles/2017/09/07/creating-a-balloon-tip-notification-using-powershell.aspx</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1782.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1782.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[echo 命令的使用]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1781.html" />
<id>https://blog.niekun.net/archives/1781.html</id>
<updated>2020-09-30T09:23:00+08:00</updated>
<published>2020-09-30T09:23:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[echo 是常用的终端命令，常用来输出字符串。配合命令的 option 选项可以实现多种输出方式。语法结构：echo [option(s)] [string(s)]常规使用输出字符串：$ ech...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1781.html" xml:lang="zh-CN"><![CDATA[
<p>echo 是常用的终端命令，常用来输出字符串。配合命令的 option 选项可以实现多种输出方式。</p><h3>语法结构：</h3><pre><code>echo [option(s)] [string(s)]
</code></pre><h3>常规使用</h3><h4>输出字符串：</h4><pre><code>$ echo i have a dream
i have a dream</code></pre><!--more--><h4>输出变量：</h4><pre><code>$ x=10
$ echo $x
10</code></pre><h4>输出目录下所有文件名：</h4><pre><code>$ echo *
Business Card Template - PiXimperfect.psd Telegram Desktop Video desktop.ini echo.txt test1.txt test2.txt</code></pre><h4>输出特定名称的文件名：</h4><pre><code>$ echo *.txt
echo.txt test1.txt test2.txt</code></pre><h4>将字符串输出到文件：</h4><pre><code>$ echo 'abc' &gt; test.txt
$ cat test.txt
abc</code></pre><h3>使用 <code>-e</code> 选项识别字符串内的转义符 <code>\</code></h3><h4><code>\b</code> 表示清除字符间空格</h4><pre><code>$ echo -e 'a \bb \bc'
abc</code></pre><h4><code>\n</code> 表示换行</h4><pre><code>$ echo -e 'a\nb\nc'
a
b
c</code></pre><h4><code>\t</code> 表示添加制表符</h4><pre><code>$ echo -e 'a\tb\tc'
a       b       c</code></pre><p>可以结合 <code>\n</code> <code>\t</code> 使用：</p><pre><code>$ echo -e '\ta\n\tb\n\tc'
        a
        b
        c</code></pre><h4><code>\v</code> 表示添加垂直方向制表符</h4><pre><code>$ echo -e 'a\vb\vc'
a
 b
  c</code></pre><h4><code>\r</code> 表示丢弃前面的字符串</h4><pre><code>$ echo -e 'a\rbc'
bc</code></pre><h4><code>\c</code> 表示丢弃后面的字符串</h4><pre><code>$ echo -e 'a\cbc'
aroot@localhost$</code></pre><p>以上就是 <code>echo</code> 命令的简单使用方法。</p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1781.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1781.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[powershell 脚本运行问题处理]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1777.html" />
<id>https://blog.niekun.net/archives/1777.html</id>
<updated>2020-09-28T12:53:00+08:00</updated>
<published>2020-09-28T12:53:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[最近在学习 powershell 脚本中发现如果当前目录不在 ps1 脚本所在目录的话脚本不能正常执行，研究了下如何解决。PS C:\Users\Marco Nie&amp;gt; &amp;quot;C:\U...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1777.html" xml:lang="zh-CN"><![CDATA[
<p>最近在学习 powershell 脚本中发现如果当前目录不在 ps1 脚本所在目录的话脚本不能正常执行，研究了下如何解决。</p><pre><code>PS C:\Users\Marco Nie&gt; &quot;C:\Users\Marco Nie\Application\aria2\download-complete.ps1&quot;
C:\Users\Marco Nie\Application\aria2\download-complete.ps1</code></pre><p>如以上，我想执行脚本，但是只是返回了路径。</p><p>解决方法是在脚本路径前加上<strong>程序调用符</strong> <code>&amp;</code> ，表示后面的是可执行文件。</p><pre><code> &amp;&quot;C:\Users\Marco Nie\Application\aria2\download-complete.ps1&quot;</code></pre><p>以上方式就可以正常执行脚本了。</p><p><strong>还有就是脚本路径上如果有空格的话，需要使用引号将路径包围起来，这样就可以了。</strong></p><p>参考链接：<br><a href="http://www.splaybow.com/post/powershell-run-command-with-space.html">http://www.splaybow.com/post/powershell-run-command-with-space.html</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1777.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1777.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[macOS 下命令行控制显示系统通知]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1773.html" />
<id>https://blog.niekun.net/archives/1773.html</id>
<updated>2020-09-26T21:42:00+08:00</updated>
<published>2020-09-26T21:42:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[在使用 aira2 的 rpc 下载功能时，默认没有下载完成提示，所以需要手动打开 webui 进行查看。关于 aria2 的使用参考我的教程：https://blog.niekun.net/a...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1773.html" xml:lang="zh-CN"><![CDATA[
<p>在使用 aira2 的 rpc 下载功能时，默认没有下载完成提示，所以需要手动打开 webui 进行查看。</p><p>关于 aria2 的使用参考我的教程：<a href="https://blog.niekun.net/archives/1199.html">https://blog.niekun.net/archives/1199.html</a></p><p>注意到配置文件里有一个：<code>on-download-complete</code> 选项，可以在下载完成后执行脚本，具体解释参考<a href="https://aria2.github.io/manual/en/html/aria2c.html#cmdoption-on-download-complete">官方网页</a></p><p>可以利用这一点，编写一个脚本来触发系统通知，这样就可以知道文件下载完成了。</p><!--more--><h3>on-download-complete</h3><p>在 aria2 下载完成后，执行 <code>on-download-complete</code> 脚本时会自动传递三个参数：</p><ul><li>GID <em>GID is an ID of a download which aria2c uses to identify a particular download</em></li><li>下载文件个数</li><li>文件路径</li></ul><p>示例：</p><pre><code>$ cat hook.sh
#!/bin/sh
echo &quot;Called with [$1] [$2] [$3]&quot;
$ aria2c --on-download-complete hook.sh http://example.org/file.iso
Called with [1] [1] [/path/to/file.iso]</code></pre><h3>osascript</h3><p>这里使用 AppleScript 来编写简单的系统通知，使用 osascript 可以在 terminal 终端执行 AppleScript 脚本。</p><p>语法结构：</p><pre><code>osascript [-l language] [-i] [-s flags] [-e statement | programfile] [argument ...]
</code></pre><p>这里主要使用 <code>-e</code>选项 来执行 AppleScript 脚本。</p><h4>显示通知</h4><p>显示一个简单的通知很简单：</p><pre><code>osascript -e 'display notification &quot;hello world!&quot;'
</code></pre><p>引号内的就是纯 AppleScript 脚本，很简单。</p><h4>显示带标题的通知</h4><pre><code>osascript -e 'display notification &quot;hello world!&quot; with title &quot;This is the title&quot;'
</code></pre><h4>显示带主副标题的通知</h4><pre><code>osascript -e 'display notification &quot;hello world!&quot; with title &quot;Greeting&quot; subtitle &quot;More text&quot;'
</code></pre><h4>显示带声音提醒的通知</h4><p>系统内置的声音音频在：<code>/System/Library/Sounds</code> 目录：</p><pre><code>$ ls /System/Library/Sounds
Basso.aiff    Frog.aiff    Hero.aiff    Pop.aiff    Submarine.aiff
Blow.aiff    Funk.aiff    Morse.aiff    Purr.aiff    Tink.aiff
Bottle.aiff    Glass.aiff    Ping.aiff    Sosumi.aif</code></pre><p><code>Pop.aiff</code> 这个声音就是默认的提示音。</p><pre><code>osascript -e 'display notification &quot;hello world!&quot; with title &quot;Greeting&quot; subtitle &quot;More text&quot; sound name &quot;Pop.aiff&quot;'
</code></pre><h4>显示需要点击确认的提示框</h4><pre><code>osascript -e 'display alert &quot;Hello World!&quot; message &quot;longer text can be added in the message field.&quot;'
</code></pre><h4>音频提示</h4><p>除了显示系统通知外，也可以用音频提示，使用 <code>say</code> 命令来完成。</p><pre><code>osascript -e 'say &quot;Hello World!&quot;'
</code></pre><p>提示信息将不显示而是语音播报出来。</p><h4>aria2 下载完成提示脚本</h4><p><code>download-complete.sh</code></p><pre><code>#!/bin/sh
osascript -e 'display notification &quot;download complete&quot; sound name &quot;Pop.aiff&quot;'</code></pre><p>参考连接：<br><a href="https://code-maven.com/display-notification-from-the-mac-command-line">https://code-maven.com/display-notification-from-the-mac-command-line</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1773.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1773.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Failed to parse PID from file /opt/nginx/logs/nginx.pid 处理]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1763.html" />
<id>https://blog.niekun.net/archives/1763.html</id>
<updated>2020-09-22T16:27:00+08:00</updated>
<published>2020-09-22T16:27:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[今天在使用 journalctl 查看 nginx 日志时看到在每次启动服务后会出现一条错误信息：$ journalctl -u nginx...nginx.service: Failed to...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1763.html" xml:lang="zh-CN"><![CDATA[
<p>今天在使用 <code>journalctl</code> 查看 nginx 日志时看到在每次启动服务后会出现一条错误信息：</p><pre><code>$ journalctl -u nginx
...
nginx.service: Failed to parse PID from file /opt/nginx/logs/nginx.pid: Invalid argument
...
</code></pre><p>查找了下原因，可能是 nginx 在启动时创建 nginx.pid 文件前 systemd 就在请求这个文件，所以出错了。</p><p>解决办法就是题前手动创建 systemd 需要的文件：</p><pre><code>mkdir /etc/systemd/system/nginx.service.d
printf &quot;[Service]\nExecStartPost=/bin/sleep 0.1\n&quot; &gt; /etc/systemd/system/nginx.service.d/override.conf
systemctl daemon-reload</code></pre><p>以上处理就可以解决问题。</p><p>参考链接：<br><a href="https://bugs.launchpad.net/ubuntu/+source/nginx/+bug/1581864">https://bugs.launchpad.net/ubuntu/+source/nginx/+bug/1581864</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1763.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1763.html" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[从源码编译安装 python]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1758.html" />
<id>https://blog.niekun.net/archives/1758.html</id>
<updated>2020-09-21T16:35:00+08:00</updated>
<published>2020-09-21T16:35:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[从源码编译程序的好处是可以使用最新版本，下面介绍如何在 Linux 下编译安装 python 和 pip 环境。下载源码包python 官网：https://www.python.org/当前最...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1758.html" xml:lang="zh-CN"><![CDATA[
<p>从源码编译程序的好处是可以使用最新版本，下面介绍如何在 Linux 下编译安装 python 和 pip 环境。</p><h3>下载源码包</h3><p>python 官网：<a href="https://www.python.org/">https://www.python.org/</a></p><p>当前最新版是 3.8.5，在这个页面找到地址：<a href="https://www.python.org/downloads/release/python-385/">https://www.python.org/downloads/release/python-385/</a></p><p><img src="https://blog.niekun.net/usr/uploads/2020/09/3204471917.jpg" alt="1.jpg" title="1.jpg"></p><!--more--><p>下载 tgz 压缩包到本地并解压：</p><pre><code>cd /tmp
wget https://www.python.org/ftp/python/3.8.5/Python-3.8.5.tgz
tar xvf Python-3.8.5.tgz</code></pre><h3>环境安装</h3><p>编译需要安装一些依赖：</p><pre><code>apt install libffi-dev libgdbm-dev libsqlite3-dev libssl-dev zlib1g-dev
</code></pre><h3>编译</h3><p>python 源码使用标准 GNU 编译系统，详细说明参考：<a href="https://blog.niekun.net/archives/883.html">https://blog.niekun.net/archives/883.html</a></p><p>将 python 安装到 <code>/opt</code> 目录，先创建文件夹：</p><pre><code>mkdir /opt/python3.8.5
</code></pre><p>然后配置 configure：</p><pre><code>cd /tmp/Python-3.8.5

./configure \
--prefix=/opt/python3.8.5 \
--enable-optimizations \</code></pre><p>没有错误提示的话就开始编译和安装：</p><pre><code>make
make install
</code></pre><p>安装完成后测试执行：</p><pre><code>/opt/python3.8.5/bin/python3 --version
</code></pre><p>返回版本信息则安装完成。</p><p>下面将可执行文件加入系统路径，创建软连接：</p><pre><code>ln -s /opt/python3.8.5/bin/python3 /usr/bin/python
</code></pre><p>测试运行：</p><pre><code>python --version
</code></pre><h3>安装 pip</h3><p>源码编译安装的 python 不自带 pip，需要自己安装，可以使用 get-pip.py 脚本来安装。</p><p>官网：<a href="https://pip.pypa.io/en/stable/installing/">https://pip.pypa.io/en/stable/installing/</a></p><p>下载脚本到本地：</p><pre><code>curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py</code></pre><p>使用刚才安装的 python 执行脚本：</p><pre><code>/opt/python3.8.5/bin/python3 get-pip.py
</code></pre><p>pip 的安装路径是 <code>/opt/python3.8.5/bin/</code>，测试命令：</p><pre><code>/opt/python3.8.5/bin/pip3 --version
</code></pre><p>返回版本信息则安装完成。</p><p>添加软连接到系统路径：</p><pre><code>ln -s /opt/python3.8.5/bin/pip3 /usr/bin/pip
</code></pre><p>测试命令：</p><pre><code>pip --version
</code></pre><h3>参考链接</h3><p><a href="https://docs.rstudio.com/resources/install-python-source/">https://docs.rstudio.com/resources/install-python-source/</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1758.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/archives/1758.html" thr:count="0"/>
</entry>
</feed>