<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"
xmlns:thr="http://purl.org/syndication/thread/1.0"
xml:lang="zh-CN"
xml:base="https://blog.niekun.net/"
>
<title type="text">Marco Nie</title>
<subtitle type="text">you are the company you keep...</subtitle>
<updated>2023-02-07T15:02:43+08:00</updated>
<generator uri="http://typecho.org/" version="1.2.0">Typecho</generator>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/" />
<id>https://blog.niekun.net/feed/atom/</id>
<link rel="self" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" />
<entry>
<title type="html"><![CDATA[自动蒙版快速拆分图像各个元素 in Photoshop]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2787.html" />
<id>https://blog.niekun.net/archives/2787.html</id>
<updated>2023-02-07T15:02:43+08:00</updated>
<published>2023-02-07T15:02:43+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[图片中有时候想要单独调整某个部分，可以通过选区工具钢笔工具等选取出来。但是当场景比较复杂或者需要单独调整多个元素时，就很耗费时间了，新版的 Photoshop 提供了快捷的方法来一键生成主要个体...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2787.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://blog.niekun.net/usr/uploads/2023/02/3360067067.png" alt="2023-02-07T06:58:01.png" title="2023-02-07T06:58:01.png"><br>图片中有时候想要单独调整某个部分，可以通过选区工具钢笔工具等选取出来。但是当场景比较复杂或者需要单独调整多个元素时，就很耗费时间了，新版的 Photoshop 提供了快捷的方法来一键生成主要个体的 mask 蒙版。</p><!--more--><p>导入图片后点击 layer - mask all objects：<br><img src="https://blog.niekun.net/usr/uploads/2023/02/2266065659.png" alt="2023-02-07T06:59:43.png" title="2023-02-07T06:59:43.png"></p><p>等待处理完成就会自动生成识别到的个体的单独蒙版：<br><img src="https://blog.niekun.net/usr/uploads/2023/02/3016892681.png" alt="2023-02-07T07:00:27.png" title="2023-02-07T07:00:27.png"></p><p>此时就可以利用这些蒙版来单独修改特定区域的色彩了：<br><img src="https://blog.niekun.net/usr/uploads/2023/02/1999022133.png" alt="2023-02-07T07:02:16.png" title="2023-02-07T07:02:16.png"></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2787.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[chrome 内置翻译工具流量走代理配置]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2784.html" />
<id>https://blog.niekun.net/archives/2784.html</id>
<updated>2022-12-14T08:54:19+08:00</updated>
<published>2022-12-14T08:54:19+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[从下半年开始发现 chrome 系统内置的网页翻译工具就开始抽风，然后彻底不能翻译了，查了下其流量 url 是 translate.googleapis.com，将 url 配置到我的代理列表中...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2784.html" xml:lang="zh-CN"><![CDATA[
<p>从下半年开始发现 chrome 系统内置的网页翻译工具就开始抽风，然后彻底不能翻译了，查了下其流量 url 是 <code>translate.googleapis.com</code>，将 url 配置到我的代理列表中走 switchyomega 依然无法访问。</p><p>经过查询发现 chrome 翻译的流量只能走系统代理，这就有点麻烦了。开始使用了修改 hosts 的方式指定到国内可用 ip 上，但是使用并不长久，没几天就又不可用了。</p><p>家里电脑可以在 openwrt 路由上配置好代理，比较简单，但是想要在本机上直接配置就不太方便了，需要设置系统为全局代理，但我又不想这样做。</p><p>今天发现 proxifier 居然可以指定 hosts 配置代理，测试了下居然可行：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/2596947788.png" alt="2022-12-14T00:51:50.png" title="2022-12-14T00:51:50.png"></p><p>如果之前在系统 hosts 文件添加过 <code>translate.googleapis.com</code> 的定向需要先将其删除，设置好后重启 chrome 发现网页翻译可以正常使用了。</p><h3>参考链接</h3><p><a href="https://github.com/feliscatus/switchyomega/issues/264#issuecomment-377439133">chrome自带的翻译工具无法使用代理#264</a><br><a href="https://www.v2ex.com/t/889119">Chrome 右键翻译，怎么 fix？</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2784.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[白色背景灰色水印去除 in Photoshop]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2777.html" />
<id>https://blog.niekun.net/archives/2777.html</id>
<updated>2022-12-02T10:20:09+08:00</updated>
<published>2022-12-02T10:20:09+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[在网络中经常遇到下载的图片上带有水印，一般都是重复文字带有透明度然后铺满整个图片。一般没有快捷方法去除，只能印章工具或或者选区工具进行智能填充，但如果背景是纯白色，水印是透明灰度文字的话可以快速...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2777.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://blog.niekun.net/usr/uploads/2022/12/2425866741.png" alt="2022-12-02T02:13:43.png" title="2022-12-02T02:13:43.png"><br>在网络中经常遇到下载的图片上带有水印，一般都是重复文字带有透明度然后铺满整个图片。一般没有快捷方法去除，只能印章工具或或者选区工具进行智能填充，但如果背景是纯白色，水印是透明灰度文字的话可以快速去除。</p><p>原图如上所示，背景是白色，水印文字是没有颜色的灰度色彩。</p><p>首先选区工具选取纯白部分的文字，ctrl J 复制选中部分：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/1600826648.png" alt="2022-12-02T02:15:28.png" title="2022-12-02T02:15:28.png"></p><p>然后点击 ctrl i 反转复制的图层：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/1953618077.png" alt="2022-12-02T02:15:55.png" title="2022-12-02T02:15:55.png"></p><p>将图层混合模式改为 color dodge：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/3088136348.png" alt="2022-12-02T02:16:35.png" title="2022-12-02T02:16:35.png"></p><p>此时会发现那个地方的水印没有了，ctrl J 复制此图层，将其拖拽到其他水印地方也会恢复其水印下方的色彩：<br><img src="https://blog.niekun.net/usr/uploads/2022/12/3496720110.png" alt="2022-12-02T02:19:59.png" title="2022-12-02T02:19:59.png"></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2777.html#comments" thr:count="1" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="1"/>
</entry>
<entry>
<title type="html"><![CDATA[命令行激活 Windows 密钥]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2770.html" />
<id>https://blog.niekun.net/archives/2770.html</id>
<updated>2022-09-19T09:22:00+08:00</updated>
<published>2022-09-19T09:22:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[注意：安装新密钥及激活时需要在管理员权限下运行终端。安装新密钥，会自动替换当前密钥：slmgr /ipk xxxx-xxxx-xxxx-xxxx-xxxx激活 Windows：slmgr /at...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2770.html" xml:lang="zh-CN"><![CDATA[
<p>注意：安装新密钥及激活时需要在<strong>管理员权限</strong>下运行终端。</p><p>安装新密钥，会自动替换当前密钥：</p><pre><code>slmgr /ipk xxxx-xxxx-xxxx-xxxx-xxxx
</code></pre><p>激活 Windows：</p><pre><code>slmgr /ato
</code></pre><p>显示当前授权信息：</p><pre><code>slmgr /dli
</code></pre><p>显示详细授权信息：</p><pre><code>slmgr /dlv
</code></pre><p>显示授权剩余日期：</p><pre><code>slmgr /xpr
</code></pre><p>密钥可用性在线检测：<a href="https://dbmer.com/checkkey/">https://dbmer.com/checkkey/</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2770.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Ubuntu 安装 FTP server]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2769.html" />
<id>https://blog.niekun.net/archives/2769.html</id>
<updated>2022-09-16T09:28:45+08:00</updated>
<published>2022-09-16T09:28:45+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[虽然平时可以用 sftp 或 webdav 代替，但是有些时候客户端只支持 ftp 链接，所以介绍下在服务器上安装 ftp server 的简单方法。系统平台：Ubuntu server 20.04]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2769.html" xml:lang="zh-CN"><![CDATA[
<p>虽然平时可以用 sftp 或 webdav 代替，但是有些时候客户端只支持 ftp 链接，所以介绍下在服务器上安装 ftp server 的简单方法。</p><p>系统平台：Ubuntu server 20.04</p><!--more--><h3>安装 vsftpd</h3><p>主要是通过 vsftpd 实现 ftp 功能的，首先安装：</p><pre><code>apt update &amp;&amp; apt install vsftpd
</code></pre><p>安装好后，vsftpd 会自动启动，可以查看当前运行状态：</p><pre><code>systemctl status vsftpd

● vsftpd.service - vsftpd FTP server
     Loaded: loaded (/lib/systemd/system/vsftpd.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2020-04-27 19:35:30 IST; 13s ago
   Main PID: 54532 (vsftpd)
      Tasks: 1 (limit: 1137)
     Memory: 652.0K
     CGroup: /system.slice/vsftpd.service
             └─54532 /usr/sbin/vsftpd /etc/vsftpd.conf

Apr 27 19:35:30 ubuntu systemd[1]: Starting vsftpd FTP server...
Apr 27 19:35:30 ubuntu systemd[1]: Started vsftpd FTP server.</code></pre><p>设置为开机自动启动：</p><pre><code>systemctl enable vsftpd
</code></pre><h3>创建 ftp 用户</h3><p>默认安装好后，会自动创建一个 ftp 用户，这个用户经过我测试无法登录 ftp 服务，这里我们自己创建一个新用户用于登录 ftp，这里创建用户名为 ftpuser：</p><pre><code>adduser ftpuser
</code></pre><p>期间会提示输入创建用户的密码。</p><p>我们只需要这个新用户登录 ftp 不需要它能够访问 ssh 服务，所以下面我们将这个用户排除在 ssh 用户之外，编辑 <code>/etc/ssh/sshd_config</code> 文件，在最后一行添加以下内容：</p><pre><code>DenyUsers ftpuser</code></pre><p>保存后重启 ssh 服务：</p><pre><code>sudo service sshd restart
</code></pre><h3>ftp 目录及权限</h3><p>我们新建一个用于 ftp 的目录：</p><pre><code>mkdir /home/www/ftp
</code></pre><p>将此目录所有者设置为上面创建的 ftpuser：</p><pre><code>chown -R ftpuser:ftpuser /home/www/ftp
</code></pre><p>默认情况下 ftp 目录的根路径不允许有<strong>写权限</strong>，否则链接的时候会报错，所以我们取消这个文件夹的对应权限：</p><pre><code>chmod a-w /home/www/ftp
</code></pre><p>如果想要上传文件，我们可以在这个文件夹内新建一个文件夹专门用来上传：</p><pre><code>mkdir /home/www/ftp/uploads
</code></pre><p>同样的文件夹所有者为 ftpuser：</p><pre><code>chown -R ftpuser:ftpuser /home/www/ftp/uploads
</code></pre><h3>vsftpd 配置文件</h3><p>vsftpd 配置文件路径为：<code>/etc/vsftpd.conf</code>，打开并修改如下设置，最后一行配置文件中没有的话需要自己创建一下：</p><pre><code>listen=NO
listen_ipv6=YES
anonymous_enable=NO
local_enable=YES
write_enable=YES
local_umask=022
dirmessage_enable=YES
use_localtime=YES
xferlog_enable=YES
connect_from_port_20=YES
chroot_local_user=YES
secure_chroot_dir=/var/run/vsftpd/empty
pam_service_name=vsftpd

local_root=/home/www/ftp</code></pre><p>修改完成后重启服务：</p><pre><code>systemctl restart vsftpd
</code></pre><p>此时就可以使用 ftp 客户端连接到 ftp 服务器了。</p><p>为了更加安全，推荐配置 ssl 证书，可以参考：<a href="https://devanswers.co/install-ftp-server-vsftpd-ubuntu-20-04/#id-7-secure-ftp-with-tls-recommended">Secure FTP with TLS (Recommended)</a></p><p>以上就是 ftp server 的简单安装及配置教程。</p><h3>参考链接</h3><p><a href="https://devanswers.co/install-ftp-server-vsftpd-ubuntu-20-04/">How To Install an FTP server (vsftpd) on Ubuntu 20.04/20.10</a><br><a href="https://ubuntu.com/server/docs/service-ftp">FTP Server</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2769.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Windows 配置 FTP 服务器]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2757.html" />
<id>https://blog.niekun.net/archives/2757.html</id>
<updated>2022-09-15T15:04:00+08:00</updated>
<published>2022-09-15T15:04:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[Windows 10 以上系统自带 FTP server，可以简单的搭建一个局域网内应用的 FTP 服务器。下面介绍具体操作流程。搜索 windows feature 打开功能开关配置界面：]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2757.html" xml:lang="zh-CN"><![CDATA[
<p>Windows 10 以上系统自带 FTP server，可以简单的搭建一个局域网内应用的 FTP 服务器。下面介绍具体操作流程。</p><p>搜索 windows feature 打开功能开关配置界面：<br><img src="https://blog.niekun.net/usr/uploads/2022/09/3236706010.png" alt="2022-09-15T06:50:53.png" title="2022-09-15T06:50:53.png"></p><!--more--><p>开启如下 ftp 相关选项，确认后等待安装完成：<br><img src="https://blog.niekun.net/usr/uploads/2022/09/3759793436.png" alt="2022-09-15T06:51:58.png" title="2022-09-15T06:51:58.png"></p><p>搜索 Administrative Tools：<br><img src="https://blog.niekun.net/usr/uploads/2022/09/4127207686.png" alt="2022-09-15T06:53:05.png" title="2022-09-15T06:53:05.png"></p><p>双击 Internet Information Services (IIS) Manager:<br><img src="https://blog.niekun.net/usr/uploads/2022/09/2046309272.png" alt="2022-09-15T06:53:58.png" title="2022-09-15T06:53:58.png"></p><p>sites 上右键点击 add ftp site：<br><img src="https://blog.niekun.net/usr/uploads/2022/09/205395891.png" alt="2022-09-15T06:55:25.png" title="2022-09-15T06:55:25.png"></p><p>设置名称及共享路径：<br><img src="https://blog.niekun.net/usr/uploads/2022/09/1391443548.png" alt="2022-09-15T06:56:18.png" title="2022-09-15T06:56:18.png"></p><p>选择无 ssl：<br><img src="https://blog.niekun.net/usr/uploads/2022/09/2363422074.png" alt="2022-09-15T06:56:43.png" title="2022-09-15T06:56:43.png"></p><p>选择 basic 验证以及指定可登录 FTP 的用户，设置读写权限：<br><img src="https://blog.niekun.net/usr/uploads/2022/09/2397564596.png" alt="2022-09-15T06:57:40.png" title="2022-09-15T06:57:40.png"></p><p>可以单独建立一个用户用来登录 ftp，建立账户可以参考我的教程：<a href="https://blog.niekun.net/archives/2103.html#title-4">https://blog.niekun.net/archives/2103.html#title-4</a></p><p>设置完成后，点击完成即可。</p><p>然后配置防火墙例外，搜索 allow an app through windows firewall:<br><img src="https://blog.niekun.net/usr/uploads/2022/09/4066124525.png" alt="2022-09-15T06:59:18.png" title="2022-09-15T06:59:18.png"></p><p>在列表中找到 ftp server 并打勾即可：<br><img src="https://blog.niekun.net/usr/uploads/2022/09/3519377408.png" alt="2022-09-15T07:00:53.png" title="2022-09-15T07:00:53.png"></p><p>以上就完成了 Windows 端 ftp 服务器的搭建，可以使用 ftp 客户端登录此 ftp 服务器了。</p><p><strong>参考链接：</strong><br><a href="https://www.windowscentral.com/how-set-ftp-server-windows-10">How to set up and manage an FTP server on Windows 10</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2757.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Miniflux 搭建自己的 RSS 服务系统]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2749.html" />
<id>https://blog.niekun.net/archives/2749.html</id>
<updated>2022-08-12T14:50:00+08:00</updated>
<published>2022-08-12T14:50:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[一直在使用 feedly 作为 rss 订阅器阅读文章，基本可以满足我的需求，但是部分站点只能预览摘要，想要阅读全文还打开文章链接。最近发现一个开源免费的 rss 系统，他的特点就是轻量无多于内...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2749.html" xml:lang="zh-CN"><![CDATA[
<p>一直在使用 feedly 作为 rss 订阅器阅读文章，基本可以满足我的需求，但是部分站点只能预览摘要，想要阅读全文还打开文章链接。最近发现一个开源免费的 rss 系统，他的特点就是轻量无多于内容，致力于阅读体验。同时我发现他的一些独有功能，可以在文章只显示摘要时，有一个下载全文的选项，这样就实现了大部分文章在 rss 阅读器中就可以阅读全文的需求了。</p><p>Miniflux 需要自己部署在服务器上，它提供了多种安装方法，最简单的就是 docker 方式，避免手动配置环境及数据库等步骤。</p><p>我的系统环境：Ubuntu server 20.04</p><p>Miniflux 官网：<a href="https://miniflux.app/">https://miniflux.app/</a><br>GitHub 主页：<a href="https://github.com/miniflux/v2">https://github.com/miniflux/v2</a></p><!--more--><h3>安装</h3><p>这里介绍通过 docker compose 安装的方法，关于 docker 环境的部署参考我的教程：<a href="https://blog.niekun.net/archives/2742.html#title-1">https://blog.niekun.net/archives/2742.html#title-1</a></p><p>新建 miniflux 文件夹用来放置相关配置：</p><pre><code>mkdir miniflux
cd miniflux
</code></pre><p>然后建立 docker-compose.yml 配置文件，内容如下：</p><pre><code>version: '3.4'
services:
  miniflux:
    image: ${MINIFLUX_IMAGE:-miniflux/miniflux:latest}
    container_name: miniflux
    restart: always
    ports:
      - &quot;18080:8080&quot;
    depends_on:
      - db
    environment:
      - DATABASE_URL=postgres://miniflux:secret@db/miniflux?sslmode=disable
      - BASE_URL=https://miniflux.your.domain
      - RUN_MIGRATIONS=1
      - CREATE_ADMIN=1
      - ADMIN_USERNAME=admin
      - ADMIN_PASSWORD=test123
      - DEBUG=1
    # Optional health check:
    # healthcheck:
    #  test: [&quot;CMD&quot;, &quot;/usr/bin/miniflux&quot;, &quot;-healthcheck&quot;, &quot;auto&quot;]
  db:
    image: postgres:latest
    container_name: postgres
    restart: always
    environment:
      - POSTGRES_USER=miniflux
      - POSTGRES_PASSWORD=secret
    volumes:
      - miniflux-db:/var/lib/postgresql/data
    healthcheck:
      test: [&quot;CMD&quot;, &quot;pg_isready&quot;, &quot;-U&quot;, &quot;miniflux&quot;]
      interval: 10s
      start_period: 30s
volumes:
  miniflux-db:</code></pre><p>其中需要自行根据实际情况修改一些内容：</p><ul><li>port 端口的主机映射，这里我使用了 18080 映射容器内的 8080 端口</li><li>BASE_URL 设置需要访问 miniflux 服务的域名地址，后面需要配置反向代理</li><li>ADMIN_USERNAME 设置管理员用户名</li><li>ADMIN_PASSWORD  设置管理员用户密码</li></ul><p>敏感的环境变量值可以单独放在同配置文件路径下的 <code>.env</code> 文件中，上面的 docker 安装教程中有介绍。</p><p>注意 DATABASE_URL 地址中的 postgres 用户名密码对应于 POSTGRES_USER 和 POSTGRES_PASSWORD 的值，需要保持一致。</p><p>然后就可以启动容器：</p><pre><code>docker-compose up -d
</code></pre><h3>反代配置</h3><p>首先如果需要解析到二级域名下，先要在 ns 服务端添加二级域名的 A 记录，然后才能正常解析 url。</p><p>使用域名访问 miniflux 服务，需要通过主机使用的反代软件配置解析，我服务器使用的是 nginx，下面介绍配置方法。</p><p>给 nginx 配置添加如下内容：</p><pre><code>server {
    listen        443 ssl http2;
    listen        [::]:443 ssl http2;
    server_name   miniflux.your.domain;
    include       my-server/ssl;

    location / {
        proxy_pass          http://127.0.0.1:18080;
        proxy_redirect      off;

        proxy_set_header    Host              $host;
        proxy_set_header    X-Forwarded-Host  $host;
        proxy_set_header    X-Real-IP         $remote_addr;
        proxy_set_header    X-Forwarded-For   $proxy_add_x_forwarded_for;
        proxy_set_header    X-Forwarded-Proto $scheme;
        proxy_set_header    Upgrade           $http_upgrade;
        proxy_set_header    Connection        &quot;upgrade&quot;;
        proxy_http_version  1.1;
    }
}</code></pre><p>以上配置需要根据实际情况修改监听端口及 domain，由于之前配置的 miniflux 的映射端口是 18080，所以反代到本地的对应端口即可。</p><p>以上 miniflux 和 nginx 反代配置完成后应该就可以访问 <a href="https://miniflux.your.domain">https://miniflux.your.domain</a> 了。用户名密码就是 docker 配置文件中定义的管理员账户及密码：<br><img src="https://blog.niekun.net/usr/uploads/2022/08/4289742324.png" alt="2022-08-12T06:47:50.png" title="2022-08-12T06:47:50.png"></p><h3>使用</h3><p>如果某一篇文章不显示全文，只需要点击文章顶部的 download 按钮即可加载全文：<br><img src="https://blog.niekun.net/usr/uploads/2022/08/966087234.png" alt="2022-08-12T06:47:12.png" title="2022-08-12T06:47:12.png"></p><p>miniflux 提供了丰富的 api 接口可供二次开发使用，通过简单的请求就可以获取到文章的各种信息，返回数据为 json 格式。</p><p>官方 api 文档参考：<a href="https://miniflux.app/docs/api.html">https://miniflux.app/docs/api.html</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2749.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[自建 RustDesk server]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2744.html" />
<id>https://blog.niekun.net/archives/2744.html</id>
<updated>2022-08-07T14:08:00+08:00</updated>
<published>2022-08-07T14:08:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[RustDesk 是一款开源的跨平台远程桌面软件，类似于 TeamViewer 的 UI 样式，但它是完全免费的。RustDesk 提供了 3 个免费的转发服务器，会根据你的地理位置自动选择最快...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2744.html" xml:lang="zh-CN"><![CDATA[
<p>RustDesk 是一款开源的跨平台远程桌面软件，类似于 TeamViewer 的 UI 样式，但它是完全免费的。</p><p>RustDesk 提供了 3 个免费的转发服务器，会根据你的地理位置自动选择最快的，一般使用足够了，如果对安全性有担忧，它们也提供了 server 端应用，可以自建转发服务器。下面就对搭建 server 端做一些介绍。</p><p>RustDesk GitHub 主页：<a href="https://github.com/rustdesk/rustdesk">https://github.com/rustdesk/rustdesk</a><br>RustDesk Server GitHub 主页：<a href="https://github.com/rustdesk/rustdesk-server">https://github.com/rustdesk/rustdesk-server</a></p><p>服务器平台：ubuntu 20.04</p><!--more--><h3>安装 server</h3><p>我是通过 docker 安装的 server 端，这样最快速简单。</p><p>关于 docker 和 docker compose 的安装可以参考我之前的文章：<a href="https://blog.niekun.net/archives/2742.html#title-1">https://blog.niekun.net/archives/2742.html#title-1</a></p><p><strong>docker-compose.yml</strong> 文件内容如下：</p><pre><code>version: '3'

networks:
  rustdesk-net:
    external: false

services:
  hbbs:
    container_name: hbbs
    ports:
      - 21115:21115
      - 21116:21116
      - 21116:21116/udp
      - 21118:21118
    image: rustdesk/rustdesk-server:latest
    command: hbbs -r xxx.xxx.xxx.xxx:21117
    volumes:
      - ./data:/root
    networks:
      - rustdesk-net
    depends_on:
      - hbbr
    restart: unless-stopped

  hbbr:
    container_name: hbbr
    ports:
      - 21117:21117
      - 21119:21119
    image: rustdesk/rustdesk-server:latest
    command: hbbr
    volumes:
      - ./data:/root
    networks:
      - rustdesk-net
    restart: unless-stopped</code></pre><p>这里配置 hbbs IP 地址需要设置为中继服务器的 IP 或域名，否则无法链接。默认监听的是 21117 端口，客户端默认也是链接服务器的这个端口。如果修改这里的默认端口，则在客户端设置的时候也需要指定此端口。</p><p>启动服务：</p><pre><code>docker-compose up -d
</code></pre><p>此时在客户端设置 ID server：<br><img src="https://blog.niekun.net/usr/uploads/2022/08/43407160.jpg" alt="1.jpg" title="1.jpg"></p><p>在第一行填入服务器 IP 地址即可：<br><img src="https://blog.niekun.net/usr/uploads/2022/08/2720143847.jpg" alt="2.jpg" title="2.jpg"></p><p>确认后，如果下方状态栏显示 <strong>ready</strong> 表示服务器链接正常：<br><img src="https://blog.niekun.net/usr/uploads/2022/08/4049467528.jpg" alt="3.jpg" title="3.jpg"></p><h3>配置域名访问</h3><p>如果想要使用域名作为 server id，需要在你的域名服务器里加上一条自定义的域名 NS 解析，如：rust.abc.com。</p><p>注意如果你使用的是 cloudflare 服务，由于它在启用 CDN 后只支持少数端口的转发，而我们需要使用的是 21115 - 21119 这些端口，所以需要在 dns 配置时取消这个自定义域名的<strong>小黄云</strong>，只使用其 dns 服务：<br><img src="https://blog.niekun.net/usr/uploads/2022/08/1547842714.jpg" alt="4.jpg" title="4.jpg"></p><p>关于 cloudflare 的网络端口转发相关的信息参考官网内容：<a href="https://developers.cloudflare.com/fundamentals/get-started/reference/network-ports/">Network ports</a></p><p>自定义域名配置好后，修改 <strong>docker-compose.yml</strong> 配置文件中定义的地址为指定域名：</p><pre><code>command: hbbs -r rust.abc.com:21117
</code></pre><p>重启容器后就可以在客户端的 ID server 中使用域名链接了。方法和上面介绍的用服务器 IP 设置的方法相同。</p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2744.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Joplin server 搭建]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2742.html" />
<id>https://blog.niekun.net/archives/2742.html</id>
<updated>2022-07-14T08:19:00+08:00</updated>
<published>2022-07-14T08:19:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[joplin 是一款开源笔记应用，全平台适用，支持多种云端同步方式。最近体验了下感觉不错，尤其是可以自行搭建 server 服务端保存数据，适合喜欢管理整个数据流程的人士。下面介绍如何在服务器通...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2742.html" xml:lang="zh-CN"><![CDATA[
<p>joplin 是一款开源笔记应用，全平台适用，支持多种云端同步方式。最近体验了下感觉不错，尤其是可以自行搭建 server 服务端保存数据，适合喜欢管理整个数据流程的人士。下面介绍如何在服务器通过 docker 搭建 joplin server 的方法。</p><p>joplin 官网：<a href="https://joplinapp.org/">https://joplinapp.org/</a><br>GitHub 主页：<a href="https://github.com/laurent22/joplin">https://github.com/laurent22/joplin</a><br>各个平台客户端下载：<a href="https://joplinapp.org/download/">https://joplinapp.org/download/</a></p><p>我的服务器系统平台是 Ubuntu 20.04。</p><!--more--><h3>docker 环境安装</h3><p>首先如果安装过老版的 docker 先卸载:</p><pre><code>sudo apt-get remove docker docker-engine docker.io containerd runc
</code></pre><p>安装基础环境：</p><pre><code> sudo apt-get update
 sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release</code></pre><p>添加 docker 官方 GPG key：</p><pre><code>sudo mkdir -p /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
echo &quot;deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable&quot; | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null</code></pre><p>安装 docker 和 docker-compose：</p><pre><code> sudo apt-get update
 sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin</code></pre><p>docker 配置为非 root 用户，解决执行命令需要 sudo：</p><pre><code>sudo groupadd docker
sudo usermod -aG docker $USER
su - ${USER}</code></pre><h3>配置 docker-compose</h3><p>通过 docker-compose 可以方便的配置 docker 容器设置及多容器之间数据交互。</p><p>新建 joplin 文件夹用来存放配置 <code>docker-compose.yml</code> 以及 <code>.env</code> 环境变量文件，我喜欢放在 opt 路径下：</p><pre><code>mkdir /opt/docker/joplin
cd /opt/docker/joplin
</code></pre><p>新建环境变量文件 <code>.env</code> 内容如下：</p><pre><code>APP_BASE_URL=https://joplin.your.site
APP_PORT=22300
# 
DB_CLIENT=postgres
POSTGRES_PASSWORD=PASSWORD
POSTGRES_DATABASE=joplin
POSTGRES_USER=USERNAME
POSTGRES_PORT=5432
POSTGRES_HOST=localhost</code></pre><p>上面的配置中需要自行修改几项：</p><ul><li><code>APP_BASE_URL</code> 修改为你实际访问 joplin 服务的外网地址，需要提前配置好 dns 映射，我是通过 cloudflare 管理的</li><li><code>POSTGRES_PASSWORD</code> 修改数据库密码</li><li><code>POSTGRES_USER</code> 修改数据库用户名</li></ul><p>新建 <code>docker-compose.yml</code> 内容如下：</p><pre><code>version: '3'
services:
    db:
        image: postgres:13
        volumes:
            - ./data/postgres:/var/lib/postgresql/data
        ports:
            - &quot;5432:5432&quot;
        restart: unless-stopped
        environment:
            - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
            - POSTGRES_USER=${POSTGRES_USER}
            - POSTGRES_DB=${POSTGRES_DATABASE}
        network_mode: host
    app:
        image: joplin/server:latest
        depends_on:
            - db
        ports:
            - &quot;22300:22300&quot;
        restart: unless-stopped
        environment:
            - APP_PORT=${APP_PORT}
            - APP_BASE_URL=${APP_BASE_URL}
            - DB_CLIENT=${DB_CLIENT}
            - POSTGRES_PASSWORD=${POSTGRES_PASSWORD}
            - POSTGRES_DATABASE=${POSTGRES_DATABASE}
            - POSTGRES_USER=${POSTGRES_USER}
            - POSTGRES_PORT=${POSTGRES_PORT}
            - POSTGRES_HOST=${POSTGRES_HOST}
        network_mode: host</code></pre><p>docker-compose 会自动调用同一路径下的 <code>.env</code> 文件中定义的环境变量。</p><p>完成配置后启动容器：</p><pre><code>docker-compose up -d
</code></pre><h3>nginx 配置</h3><p>外网访问上面定义的 url 后，需要通过反向代理将数据流传给 joplin server 端口 22300，我使用的是 nginx 配置如下：</p><pre><code>server {
    listen        443 ssl http2;
    listen        [::]:443 ssl http2;
    server_name   joplin.your.site;
    include       my-server/ssl; 加入 ssl 相关配置

    location / {
        proxy_pass          http://127.0.0.1:22300;
        proxy_redirect      off;

        proxy_set_header    Host              $host;
        proxy_set_header    X-Real-IP         $remote_addr;
        proxy_set_header    X-Forwarded-For   $proxy_add_x_forwarded_for;
        proxy_set_header    X-Forwarded-Proto $scheme;
        proxy_set_header    Upgrade           $http_upgrade;
        proxy_set_header    Connection        &quot;upgrade&quot;;
        proxy_http_version  1.1;
    }
}</code></pre><p>完成后重启 nginx：</p><pre><code>systemctl restart nginx
</code></pre><h3>访问</h3><p>配置好 docker 和 nginx 后就可以访问上面设置的 url 访问 joplin 了，默认会自动创建一个用户 <strong>admin@localhost</strong>，密码是 <strong>admin</strong>。</p><p>第一次登录进去后最好修改下默认管理员密码，还可以创建多个账户。</p><p>如果要适用账户的邮件服务，需要额外配置 SMTP 相关的内容，这里不做介绍，新建账户的激活邮件可以在管理菜单中找到，没有配置邮件服务的话无法发送成功，可以手动将邮件中的账户激活链接发送给别人。</p><p>如果登录网址无法访问网页，可能是 docker 配置有问题，可以通过 log 查看是否有报错信息：</p><pre><code>docker container list # 查询到容器的 ID
docker logs ID # 通过 joplin 的容器 ID 查询其日志
</code></pre><h3>插件</h3><p>joplin 桌面版支持安装插件，第三方插件有很多，可以在下面链接查找：<a href="https://github.com/joplin/plugins/blob/master/README.md#plugins">Joplin Plugin Repository</a></p><h3>参考链接</h3><p><a href="https://docs.docker.com/engine/install/ubuntu/">nstall Docker Engine on Ubuntu</a><br><a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-20-04">How To Install and Use Docker on Ubuntu 20.04</a><br><a href="https://docs.docker.com/engine/reference/commandline/logs/">docker logs</a><br><a href="https://github.com/laurent22/joplin/blob/dev/packages/server/README.md">joplin server install</a><br><a href="https://github.com/laurent22/joplin/blob/dev/docker-compose.server.yml">docker-compose.server.yml</a><br><a href="https://github.com/laurent22/joplin/blob/dev/.env-sample">.env-sample</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2742.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Gradient 渐变色研究]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/2731.html" />
<id>https://blog.niekun.net/archives/2731.html</id>
<updated>2022-07-06T11:44:00+08:00</updated>
<published>2022-07-06T11:44:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[图片中经常可以使用到渐变色，两个颜色形成自然过渡效果，在实际体验中可以发现，有时候渐变色看起来很舒服，有时候看起来比较别扭，下面分析一下其中原因。下图是两个颜色组成的渐变效果，它们两端的颜色都一...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/2731.html" xml:lang="zh-CN"><![CDATA[
<p>图片中经常可以使用到渐变色，两个颜色形成自然过渡效果，在实际体验中可以发现，有时候渐变色看起来很舒服，有时候看起来比较别扭，下面分析一下其中原因。</p><p>下图是两个颜色组成的渐变效果，它们两端的颜色都一样，但是效果相差很多：<br><img src="https://blog.niekun.net/usr/uploads/2022/07/2750142518.png" alt="2022-07-06T03:24:36.png" title="2022-07-06T03:24:36.png"></p><p>明显左边的看起来更加舒服，右边的比较生硬。</p><!--more--><p>我们知道每个颜色都是 RGB 的组合，通常 RGB 各自有 256 种变化范围，它们之间的组合产生了各种颜色：<br><img src="https://blog.niekun.net/usr/uploads/2022/07/3590542115.png" alt="2022-07-06T03:45:23.png" title="2022-07-06T03:45:23.png"></p><p>在 Photoshop 中选取一种颜色的方法有四种：RGB，HSB，LAB，CMYK。最常用的就是 RGB 和 HSB，下面主要围绕这两种方法介绍。</p><p>不同于 RGB，HSB 或 HSV 拾取一种颜色是通过 H色相，S饱和度，B亮度确定的：<br><img src="https://blog.niekun.net/usr/uploads/2022/07/2439180221.png" alt="2022-07-06T03:30:35.png" title="2022-07-06T03:30:35.png"></p><p>当我们需要创建两个颜色的渐变图时，如果使用 RGB 模式，则它们的渐变过程是直接从两个颜色之间直线过渡。而使用 HSB 模式，它们的渐变过程是围绕 H色相环过渡到目标颜色：<br><img src="https://blog.niekun.net/usr/uploads/2022/07/1147253076.png" alt="2022-07-06T03:45:52.png" title="2022-07-06T03:45:52.png"></p><p>所以 RGB 模式就会穿过中间的灰色地带，效果就是过渡中颜色变淡变暗，这也就是看起开不舒服的原因。而 HSB 模式下饱和度和亮度都保持不变，只是色相发生变化，从而整体色彩持续保持鲜艳，呈现的效果就是看起来舒服。</p><p>Photoshop 中创建渐变时，提供了 3 种模式可供选择，还原了 RGB 模式 和 HSB 模式的规则，分别是：perceptual，linear，classic：<br><img src="https://blog.niekun.net/usr/uploads/2022/07/845880559.png" alt="2022-07-06T03:36:45.png" title="2022-07-06T03:36:45.png"></p><p>各种模式区别为：</p><ul><li>linear 最接近 HSB 模式，保证了过渡时候的饱和度和亮度，反映出颜色最鲜艳</li><li>perceptual 在过渡中保证亮度稳定，但是降低了饱和度</li><li>classic 在过渡中保证了饱和度稳定，但是降低了亮度</li></ul><p>三者对比图如下：<br><img src="https://blog.niekun.net/usr/uploads/2022/07/79679391.png" alt="2022-07-06T03:43:30.png" title="2022-07-06T03:43:30.png"></p><p>实际使用中根据需要选择合适效果。</p><p><strong>参考链接：</strong><br><a href="https://twitter.com/finmoorhouse/status/1543580508508065794">https://twitter.com/finmoorhouse/status/1543580508508065794</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/2731.html#comments" thr:count="1" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/" thr:count="1"/>
</entry>
</feed>