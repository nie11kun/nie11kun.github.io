<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"
xmlns:thr="http://purl.org/syndication/thread/1.0"
xml:lang="zh-CN"
xml:base="https://blog.niekun.net/tag/typecho/"
>
<title type="text">Marco Nie - typecho</title>
<subtitle type="text"></subtitle>
<updated>2020-03-03T22:34:48+08:00</updated>
<generator uri="http://typecho.org/" version="1.2.0">Typecho</generator>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/tag/typecho/" />
<id>https://blog.niekun.net/feed/atom/tag/typecho/</id>
<link rel="self" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/tag/typecho/" />
<entry>
<title type="html"><![CDATA[关于手机端无法使用 typecho 的搜索框解决]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/1249.html" />
<id>https://blog.niekun.net/archives/1249.html</id>
<updated>2020-03-03T22:34:48+08:00</updated>
<published>2020-03-03T22:34:48+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[最近自己做了一个 typecho 的主题，主要是手机端的页面优化和字体优化，使用了 bootstrap 来渲染，主题在 GitHub 上开源：https://github.com/nie11ku...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/1249.html" xml:lang="zh-CN"><![CDATA[
<p>最近自己做了一个 typecho 的主题，主要是手机端的页面优化和字体优化，使用了 bootstrap 来渲染，主题在 GitHub 上开源：<a href="https://github.com/nie11kun/TypechoAwesome">https://github.com/nie11kun/TypechoAwesome</a></p><p>但是测试发现搜索框无法正确搜索，总是返回主页。</p><p>今天终于发现问题所在了，由于我的网站使用的 NS 服务是 cloudflare 的，在当时设置的时候，把移动端 Mobile Redirect 优化选择上了，每次访问网站都会重定向到 <strong>m.niekun.net</strong>，估计是 cf 做了什么精简，导致功能丢失，把 Mobile Redirect 关闭就正常了。</p><p>具体修改路径是 speed - optimisation：<br><img src="https://niekun.net/usr/uploads/2020/03/448267460.png" alt="2020-03-03T14:33:02.png" title="2020-03-03T14:33:02.png"></p><p>页面拉到最下方，将 Mobile Redirect 关掉：<br><img src="https://niekun.net/usr/uploads/2020/03/412183147.png" alt="2020-03-03T14:33:36.png" title="2020-03-03T14:33:36.png"></p><p>再次访问主页，就不会重定向到 <strong>m.niekun.net</strong> 而是 <strong>niekun.net</strong> 了。</p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/1249.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/tag/typecho/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[TypechoAwesome theme for Typecho]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/820.html" />
<id>https://blog.niekun.net/archives/820.html</id>
<updated>2019-12-19T09:55:00+08:00</updated>
<published>2019-12-19T09:55:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[此主题是我在 typecho 原版默认主题基础上做了移动端的优化处理，适合喜欢简洁风格的人使用。typecho 是一款轻量的博客系统，风格很简洁，相比较 wordpress 占用资源很少，所以我...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/820.html" xml:lang="zh-CN"><![CDATA[
<p><img src="https://niekun.net/usr/uploads/2019/12/725033772.jpg" alt="TypechoAwesome-logo.jpg" title="TypechoAwesome-logo.jpg"></p><p>此主题是我在 typecho 原版默认主题基础上做了移动端的优化处理，适合喜欢简洁风格的人使用。</p><p>typecho 是一款轻量的博客系统，风格很简洁，相比较 wordpress 占用资源很少，所以我选择了 typecho。</p><p>官网：<a href="http://typecho.org/">http://typecho.org/</a><br>GitHub 主页：<a href="https://github.com/typecho/typecho">https://github.com/typecho/typecho</a></p><p>关于 typecho 的安装参考我的教程：<a href="https://niekun.net/index.php/archives/6.html">https://niekun.net/index.php/archives/6.html</a></p><!--more--><h2>下载主题</h2><p>此主题是基于 typecho 最新 GitHub master 分支制作的，不保证向下兼容，请升级到最新源码后在使用此主题，升级教程参考：<a href="https://niekun.net/index.php/archives/21.html">https://niekun.net/index.php/archives/21.html</a></p><p>GitHub 主页：<a href="https://github.com/nie11kun/TypechoAwesome">https://github.com/nie11kun/TypechoAwesome</a><br>release 页面：<a href="https://github.com/nie11kun/TypechoAwesome/releases">https://github.com/nie11kun/TypechoAwesome/releases</a></p><p>首先从 release 页面下载最新版本的源码到 typecho themes 目录：</p><pre><code>wget -O /tmp/TypechoAwesome.tar.gz https://github.com/nie11kun/TypechoAwesome/archive/V1.0.1.tar.gz
tar -zxvf /tmp/TypechoAwesome.tar.gz -C /path/to/typecho/usr/themes/
</code></pre><p>进网站后台，选择 控制台 - 外观：<br><img src="https://niekun.net/usr/uploads/2019/12/2830202577.png" alt="2019-12-19T01:53:10.png" title="2019-12-19T01:53:10.png"></p><p>找到 TypechoAwesome 点击<strong>启用</strong>：<br><img src="https://niekun.net/usr/uploads/2019/12/1589661904.png" alt="2019-12-19T01:54:06.png" title="2019-12-19T01:54:06.png"></p><p>然后就可以返回网站查看效果了。</p><p>桌面端访问效果：<br><img src="https://niekun.net/usr/uploads/2019/12/3356972157.png" alt="2019-12-19T01:55:20.png" title="2019-12-19T01:55:20.png"></p><p>移动端访问效果：<br><img src="https://niekun.net/usr/uploads/2019/12/3169287597.png" alt="2019-12-19T01:55:46.png" title="2019-12-19T01:55:46.png"></p><p>移动端导航栏内容：<br><img src="https://niekun.net/usr/uploads/2019/12/37920406.png" alt="2019-12-19T01:56:13.png" title="2019-12-19T01:56:13.png"></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/820.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/tag/typecho/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Nginx PHP 修改上传限制]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/371.html" />
<id>https://blog.niekun.net/archives/371.html</id>
<updated>2019-08-15T12:38:00+08:00</updated>
<published>2019-08-15T12:38:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[使用 typecho 时，发现附件过大时无法上传，wordpress 也出现：413 request entity too large 这个错误码，这是 php 和 nginx 端的限制，修改配...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/371.html" xml:lang="zh-CN"><![CDATA[
<p>使用 typecho 时，发现附件过大时无法上传，wordpress 也出现：413 request entity too large 这个错误码，这是 php 和 nginx 端的限制，修改配置文件可以提高上传文件大小。</p><p>修改 php.ini 文件，我使用的是 php5.6 版，所以首先查找 fpm 的配置文件：</p><pre><code>locate php.ini
</code></pre><p>找到后打开文件，如：</p><pre><code>vim /etc/php5.6/fpm/php.ini
</code></pre><p>使用 <strong>/</strong> 搜索字段，修改如下：</p><pre><code>upload_max_filesize = 1024M
post_max_size = 1024M
max_execution_time=600
</code></pre><p>重启 php 服务：</p><pre><code>service php5.6-fpm restart
</code></pre><p>nginx 配置中 http 段增加如下：</p><pre><code>client_max_body_size 50m;
</code></pre><p>重启 nginx：</p><pre><code>service nginx reload
</code></pre>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/371.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/tag/typecho/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[如何升级Typecho]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/21.html" />
<id>https://blog.niekun.net/archives/21.html</id>
<updated>2019-02-18T10:42:00+08:00</updated>
<published>2019-02-18T10:42:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[我使用的是Github上的源码，且将源码放在网站根目录以方便更新，所以以下步骤对使用源码安装的有效。Typecho源码地址：https://github.com/typecho/typecho进...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/21.html" xml:lang="zh-CN"><![CDATA[
<p><strong>我使用的是Github上的源码，且将源码放在网站根目录以方便更新，所以以下步骤对使用源码安装的有效。</strong><br>Typecho源码地址：<a href="https://github.com/typecho/typecho">https://github.com/typecho/typecho</a></p><ul><li>进入你的网站根目录。使用命令<code>rm -r</code>和<code>rm</code>删除以下目录和文件<code>admin</code> <code>var</code> <code>index.php</code> <code>install.php</code></li><li>进入你的Typecho源码目录，<code>git pull</code>更新文件，如果没有安装git需要先<code>apt-get install git</code>来安装</li><li>将Typecho源码文件夹下的<code>admin</code> <code>var</code> <code>index.php</code> <code>install.php</code>复制到网站根目录，使用命令<code>cp -r</code>和<code>cp</code></li></ul><p>修改新文件夹权限：</p><pre><code>chown -R www-data:www-data /path/to/blog
</code></pre><p>以上就是Typecho简单更新方法。</p><p>参考链接：<a href="http://docs.typecho.org/upgrade">http://docs.typecho.org/upgrade</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/21.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/tag/typecho/" thr:count="0"/>
</entry>
<entry>
<title type="html"><![CDATA[Typecho安装笔记]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/6.html" />
<id>https://blog.niekun.net/archives/6.html</id>
<updated>2019-02-16T10:42:00+08:00</updated>
<published>2019-02-16T10:42:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[背景近几年来，自己断断续续的使用了很多VPS，学习了Linux的简单操作，学习了html,css,js,php等网络相关的东西，在进一步的使用远程服务器中，我接触了如何申请域名，如何CDN，如何...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/6.html" xml:lang="zh-CN"><![CDATA[
<h2>背景</h2><p>近几年来，自己断断续续的使用了很多VPS，学习了Linux的简单操作，学习了html,css,js,php等网络相关的东西，在进一步的使用远程服务器中，我接触了如何申请域名，如何CDN，如何使用Nginx做代理服务器实现自己编写的html脚本。</p><p>随着使用的深入，我想了解目前主流的网站是如何实现的，通过搜索，我发现Dajango的存在，由于之前有学习Python的基础知识，所以我很快学会了Dajango的使用，也在自己VPS上用Nginx，uwsgi托管了Dajango代码，看到网络上自己的网站第一次实现，真的有一种成就感。</p><p>有一个自己的blog一直是我的目标，之前想过使用Dajango来做，但是通过查找，发现相应的开源项目很少，所以一直没有去做，此事就一直耽搁了下来，近些天工作上的事情比较轻松，于是我又一次着手查找解决方案，发现了一个比较好的解决方案：<strong>PHP-MySQL-Typecho</strong>。</p><hr><h2>关于Tpeocho</h2><p><strong>Typecho</strong>是一款免费开源的动态博客系统，运行在PHP环境下，界面简洁干净是他的特点。<br>文章支持markdown语法，很方便排版。<br>官网：<a href="http://typecho.org/">http://typecho.org/</a></p><!--more--><p>安装环境要求：</p><ul><li>PHP 5.1以上</li><li>Mysql, PostgreSQL, SQLite 任意一种数据库支持，并在PHP中安装了相关扩展</li><li>CURL或者Socket扩展支持</li><li>mbstring或者iconv扩展支持</li></ul><hr><h2>开始搭建</h2><p>系统环境：ubantu14.04</p><h3>安装Nginx</h3><p>我使用的是Nginx代理，所以第一步安装nginx。</p><p>apt 安装：</p><pre><code>apt-get update
apt-get install nginx
</code></pre><p>也可以从官网安装最新版，安装教程参考：<a href="https://niekun.net/index.php/archives/30.html">https://niekun.net/index.php/archives/30.html</a></p><p>编辑配置文件：</p><pre><code>vim /etc/nginx/nginx.conf
</code></pre><p>user 改为 www-data:</p><pre><code>user  www-data;
</code></pre><p>在server段添加如下代码：</p><pre><code>server {
    listen                80;
    listen                [::]:80;
    server_name           your.domain;
    keepalive_timeout     70;

    root                  /www/path;
    index                 index.html index.htm;

    location / {
        try_files         $uri $uri/ =404;
    }
}
</code></pre><p>启动服务：</p><pre><code>service nginx reload
service nginx start
</code></pre><p>添加开机启动：</p><pre><code>vim /etc/init.d/rc.local</code></pre><p>在文件最后添加：</p><pre><code>sudo service nginx start
</code></pre><p>访问你的域名，如果显示Nginx欢迎画面表示Nginx搭建成功。</p><p>在nginx.conf文件里定义的root目录编写测试index.html文件，刷新页面查看是否显示自定义页面。</p><p>如果一直显示nginx欢迎画面可能是：/etc/nginx/sites-enable/defalut需要删掉默认的配置</p><h2>安装PHP</h2><p>我安装的是PHP5.6版</p><pre><code>apt-get install php5.6-fpm php5.6-mysql
</code></pre><p>修改php.ini：</p><pre><code>find / -name php.ini
vim /etc/php/5.6/fpm/php.ini
</code></pre><p>文本内搜索</p><pre><code>/cgi.fix_pathinfo
</code></pre><p>修改字段</p><pre><code>cgi.fix_pathinfo=0 ;设置为1可能会引起安全问题。
</code></pre><p>修改www.conf：</p><pre><code>vim /etc/php/5.6/fpm/pool.d/www.conf

listen.owner = www-data
listen.group = www-data
</code></pre><p>重启php-fpm服务</p><pre><code>service php5.6-fpm restart
</code></pre><h3>配置Nginx的php</h3><p>打开nginx.conf</p><p>server段内修改如下</p><pre><code>index                          index.php index.html index.htm;

location / {
    try_files                  $uri $uri/ =404;
}

location ~ [^/]\.php(/|$) {
    try_files $fastcgi_script_name =404;
    fastcgi_split_path_info ^(.+?\.php)(.*)$;
    fastcgi_pass unix:/run/php/php5.6-fpm.sock;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
}

location ~ /\.ht {
    deny all;
}</code></pre><p>重启nginx服务</p><pre><code>service nginx reload
service nginx restart
</code></pre><p>测试php是否代理成功，在网站root目录新建文件index.php，访问主页。</p><pre><code>&lt;?php
    phpinfo();
?&gt;
</code></pre><p>如果显示access denied可能是权限问题</p><ul><li><p>nginx 和php-fpm不再一个用户下运行，查看上面的说到的配置(默认都是www-data)</p><ul><li>ps -aux | grep nginx</li><li>ps -aux | grep php</li></ul></li><li><p>网站目录权限不对</p><ul><li>chmod -R 755 /www/path</li><li>chown -R www-data /www/path</li></ul></li></ul><h2>安装MySQL</h2><pre><code>apt-get install mysql-server
</code></pre><p>安装会自动创建一个root用户，期间会提示创建用户密码</p><p>进入MySQL</p><pre><code>mysql -uroot -p....</code></pre><p>创建数据库(每条命令行尾加分号;)</p><pre><code>create database blog; 
grant all privileges on blog.* to &quot;root&quot;@&quot;localhost&quot; identified by &quot;password&quot;; 
show databases;
quit;
</code></pre><h2>安装Typecho</h2><p>进入网站根目录</p><pre><code>cd /www/path</code></pre><p>下载源码并解压，我下载的是开发板</p><pre><code>git clone https://github.com/typecho/typecho.git
mv typecho/. /www/path
</code></pre><p>浏览器访问：domain.you/install.php开始安装，一步步跟随提示就OK了。<br>MySQL部分输入上面创建的密码和数据库名。</p><p>以上就是 Typecho 的安装过程，期间遇到访问 其他页面 404 的问题，通过修改 cgi.fix_pathinfo=1 临时解决了，但是有安全隐患，后通过学习 FastCGI 详细资料，通过修改 nginx config 中 php 的 location 段解决了问题。</p><p>关于 fastCGI 参考我的 wordpress 安装教程：<a href="https://niekun.net/index.php/archives/204.html">https://niekun.net/index.php/archives/204.html</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/6.html#comments" thr:count="2" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/tag/typecho/" thr:count="2"/>
</entry>
</feed>