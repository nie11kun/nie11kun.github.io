<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"
xmlns:thr="http://purl.org/syndication/thread/1.0"
xml:lang="zh-CN"
xml:base="https://blog.niekun.net/tag/mp4/"
>
<title type="text">Marco Nie - mp4</title>
<subtitle type="text"></subtitle>
<updated>2019-03-31T19:14:00+08:00</updated>
<generator uri="http://typecho.org/" version="1.2.0">Typecho</generator>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/tag/mp4/" />
<id>https://blog.niekun.net/feed/atom/tag/mp4/</id>
<link rel="self" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/tag/mp4/" />
<entry>
<title type="html"><![CDATA[nginx实现mp4流媒体播放]]></title>
<link rel="alternate" type="text/html" href="https://blog.niekun.net/archives/177.html" />
<id>https://blog.niekun.net/archives/177.html</id>
<updated>2019-03-31T19:14:00+08:00</updated>
<published>2019-03-31T19:14:00+08:00</published>
<author>
    <name>admin</name>
    <uri>https://niekun.net</uri>
</author>
<summary type="html"><![CDATA[如果还没有安装nginx，参考教程：https://niekun.net/index.php/archives/30.html此功能使用的是 Nginx 的 ngx_http_mp4_modul...]]></summary>
<content type="html" xml:base="https://blog.niekun.net/archives/177.html" xml:lang="zh-CN"><![CDATA[
<p>如果还没有安装nginx，参考教程：<a href="https://niekun.net/index.php/archives/30.html">https://niekun.net/index.php/archives/30.html</a></p><p><strong>此功能使用的是 Nginx 的 ngx_http_mp4_module 模块。</strong></p><p>首先查看当前 nginx 是否已经安装了 ngx_http_mp4_module 模块：</p><pre><code>nginx -v
</code></pre><p>查看是否已经有了对应模块，一般使用 apt 安装的都集成了此模块。</p><!--more--><p>编辑你的 nginx 配置文件，加入下面的片段：</p><pre><code>location /video {
    mp4;
    mp4_buffer_size       1m;
    mp4_max_buffer_size   10m;
}</code></pre><p>测试是否配置正确：</p><pre><code>service nginx configtest
</code></pre><p>重新加载配置文件：</p><pre><code>service nginx reload
</code></pre><p>现在你就可以在对应目录下放置一个mp4文件，访问看是否能够正常播放。</p><p>如果访问网页出现 500 错误，或者 nginx log 里提示mp4 moov atom is too large，则可能需要将 mp4_max_buffer_size 设置大一些。</p><p>支持的格式：.mp4, .m4v, .m4a</p><p>可以从任意时间开始播放，如：<a href="http://example.com/elephants_dream.mp4?start=238.88">http://example.com/elephants_dream.mp4?start=238.88</a><br>start 后的数字为秒</p><p>也可以设置结束时间点：<a href="http://example.com/elephants_dream.mp4?start=238.88&end=555.55">http://example.com/elephants_dream.mp4?start=238.88&end=555.55</a></p>
]]></content>
<link rel="replies" type="text/html" href="https://blog.niekun.net/archives/177.html#comments" thr:count="0" />
<link rel="replies" type="application/atom+xml" href="https://blog.niekun.net/feed/atom/tag/mp4/" thr:count="0"/>
</entry>
</feed>