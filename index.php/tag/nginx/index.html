<!DOCTYPE HTML>
<html class="no-js">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>标签 nginx 下的文章 - Marco Nie</title>

<link rel="stylesheet" href="../../../usr/themes/default/normalize.css">
<link rel="stylesheet" href="../../../usr/themes/default/grid.css">
<link rel="stylesheet" href="../../../usr/themes/default/style.css">
<!--[if lt IE 9]>
    <script src="//cdnjscn.b0.upaiyun.com/libs/html5shiv/r29/html5.min.js"></script>
    <script src="//cdnjscn.b0.upaiyun.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

<meta name="keywords" content="nginx" />
<meta name="generator" content="Typecho 1.2/18.10.23" />
<meta name="template" content="default" />
<link rel="pingback" href="../../action/xmlrpc" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../action/xmlrpc?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../action/xmlrpc?wlw" />
<link rel="alternate" type="application/rss+xml" title="nginx &raquo; Marco Nie &raquo; RSS 2.0" href="../../feed/tag/nginx/index.html" />
<link rel="alternate" type="application/rdf+xml" title="nginx &raquo; Marco Nie &raquo; RSS 1.0" href="../../feed/rss/tag/nginx/index.html" />
<link rel="alternate" type="application/atom+xml" title="nginx &raquo; Marco Nie &raquo; ATOM 1.0" href="../../feed/atom/tag/nginx/index.html" />
</head>
<body>
<!--[if lt IE 8]>
    <div class="browsehappy" role="dialog">当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.</div>
<![endif]-->
<header id="header" class="clearfix">
<div class="container">
<div class="row">
<div class="site-name col-mb-12 col-9">
<a id="logo" href="../../../index.html">Marco Nie</a>
<p class="description">I’m dancing at the feet of my lord...</p>
</div>
<div class="site-search col-3 kit-hidden-tb">
<form id="search" method="post" action="../../../index.html" role="search">
<label for="s" class="sr-only">搜索关键字</label>
 <input type="text" id="s" name="s" class="text" placeholder="输入关键字搜索" />
<button type="submit" class="submit">搜索</button>
</form>
</div>
<div class="col-mb-12">
<nav id="nav-menu" class="clearfix" role="navigation">
<a href="../../../index.html">Article</a>
<a href="../../start-page.html" title="About me">About me</a>
</nav>
</div>
</div>
</div>
</header>
<div id="body">
<div class="container">
<div class="row">
<div class="col-mb-12 col-8" id="main" role="main">
<h3 class="archive-title">标签 nginx 下的文章</h3>
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<h2 class="post-title" itemprop="name headline"><a itemprop="url" href="../../archives/195.html">NGINX Rewrite 规则的应用</a></h2>
<ul class="post-meta">
<li itemprop="author" itemscope itemtype="http://schema.org/Person">作者: <a itemprop="name" href="../../author/1/index.html" rel="author">admin</a></li>
<li>时间: <time datetime="2019-04-04T22:44:00+08:00" itemprop="datePublished">2019-04-04</time></li>
<li>分类: <a href="../../category/Linux/index.html">Linux</a>,<a href="../../category/web/index.html">web</a></li>
<li itemprop="interactionCount"><a href="../../archives/195.html#comments">评论</a></li>
</ul>
<div class="post-content" itemprop="articleBody">
<p><strong>参考文章：</strong><a href="https://www.nginx.com/blog/creating-nginx-rewrite-rules/">https://www.nginx.com/blog/creating-nginx-rewrite-rules/</a></p><p>rewrite 规则主要应用于修改客户端发起的 url 请求，主要使用场景有两个：<br>1.客户端请求的域名已经已经有了新的地址，需要自动将连接进行转换<br>2.需要根据请求的 url 动态处理到不同的页面，此处主要使用 try_files 指令</p><p class="more"><a href="../../archives/195.html" title="NGINX Rewrite 规则的应用">- 阅读剩余部分 -</a></p> </div>
</article>
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<h2 class="post-title" itemprop="name headline"><a itemprop="url" href="../../archives/187.html">使用Nginx配置强ssl的网站</a></h2>
<ul class="post-meta">
<li itemprop="author" itemscope itemtype="http://schema.org/Person">作者: <a itemprop="name" href="../../author/1/index.html" rel="author">admin</a></li>
<li>时间: <time datetime="2019-04-03T23:24:00+08:00" itemprop="datePublished">2019-04-03</time></li>
<li>分类: <a href="../../category/Linux/index.html">Linux</a></li>
<li itemprop="interactionCount"><a href="../../archives/187.html#comments">评论</a></li>
</ul>
<div class="post-content" itemprop="articleBody">
<p><strong>本文主要参考的网站：</strong><br><a href="https://cipherli.st">https://cipherli.st</a><br><a href="https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html">https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html</a></p><blockquote>This tutorial shows you how to set up strong SSL security on the nginx webserver. We do this by updating OpenSSL to the latest version to mitigate attacks like Heartbleed, disabling SSL Compression and EXPORT ciphers to mitigate attacks like FREAK, CRIME and LogJAM, disabling SSLv3 and below because of vulnerabilities in the protocol and we will set up a strong ciphersuite that enables Forward Secrecy when possible. We also enable HSTS and HPKP. This way we have a strong and future proof ssl configuration and we get an A+ on the Qually Labs SSL Test.</blockquote><p class="more"><a href="../../archives/187.html" title="使用Nginx配置强ssl的网站">- 阅读剩余部分 -</a></p> </div>
</article>
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<h2 class="post-title" itemprop="name headline"><a itemprop="url" href="../../archives/177.html">nginx实现mp4流媒体播放</a></h2>
<ul class="post-meta">
<li itemprop="author" itemscope itemtype="http://schema.org/Person">作者: <a itemprop="name" href="../../author/1/index.html" rel="author">admin</a></li>
<li>时间: <time datetime="2019-03-31T19:14:00+08:00" itemprop="datePublished">2019-03-31</time></li>
<li>分类: <a href="../../category/Linux/index.html">Linux</a>,<a href="../../category/web/index.html">web</a></li>
<li itemprop="interactionCount"><a href="../../archives/177.html#comments">评论</a></li>
</ul>
<div class="post-content" itemprop="articleBody">
<p>如果还没有安装nginx，参考教程：<a href="../../archives/30.html">https://niekun.net/index.php/archives/30.html</a></p><p><strong>此功能使用的是 Nginx 的 ngx_http_mp4_module 模块。</strong></p><p>首先查看当前 nginx 是否已经安装了 ngx_http_mp4_module 模块：</p><pre><code>nginx -v
</code></pre><p>查看是否已经有了对应模块，一般使用 apt 安装的都集成了此模块。</p><p class="more"><a href="../../archives/177.html" title="nginx实现mp4流媒体播放">- 阅读剩余部分 -</a></p> </div>
</article>
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<h2 class="post-title" itemprop="name headline"><a itemprop="url" href="../../archives/118.html">重定向 HTTP to HTTPS in Nginx</a></h2>
<ul class="post-meta">
<li itemprop="author" itemscope itemtype="http://schema.org/Person">作者: <a itemprop="name" href="../../author/1/index.html" rel="author">admin</a></li>
<li>时间: <time datetime="2019-02-26T21:21:00+08:00" itemprop="datePublished">2019-02-26</time></li>
<li>分类: <a href="../../category/Linux/index.html">Linux</a>,<a href="../../category/web/index.html">web</a></li>
<li itemprop="interactionCount"><a href="../../archives/118.html#comments">评论</a></li>
</ul>
<div class="post-content" itemprop="articleBody">
<p>将http请求重定向为https，使所有连接都使用安全的ssl。</p><h2>重定向所有http请求</h2><p>以下配置为将所有收到的80端口的请求都重定向到443端口,这会把此ip下的所有域名都转换：</p><pre><code>server {
    listen           80;
    listen           [::]:80;
    server_name      _;
    return           301 https://$host$request_uri;
}</code></pre><p>listen 80 default_server 表示这是唯一监听80端口的server块<br>server_name _ 表示监听所有使用的域名</p><h2>重定向特定域名</h2><p>以下配置为重定向特定域名的请求，此方式适用于此ip下绑定多个域名的情况：</p><pre><code>server {
    listen           80;
    listen           [::]:80;
    server_name      your.domain;
    return           301 https://your.domain$request_uri;
}</code></pre><h2>443 server block</h2><p>设定我们的域名只接收443端口的访问：</p><pre><code>server {
    listen                443 ssl default_server;
    listen                [::]:443 ssl;
    server_name           foo.com;
}

server {
    listen                443 ssl;
    listen                [::]:443 ssl;
    server_name           bar.com;
}

...
</code></pre><p>只能设置一个域名为default_server。</p> </div>
</article>
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<h2 class="post-title" itemprop="name headline"><a itemprop="url" href="../../archives/34.html">使用acme.sh生成证书并部署</a></h2>
<ul class="post-meta">
<li itemprop="author" itemscope itemtype="http://schema.org/Person">作者: <a itemprop="name" href="../../author/1/index.html" rel="author">admin</a></li>
<li>时间: <time datetime="2019-02-19T09:02:00+08:00" itemprop="datePublished">2019-02-19</time></li>
<li>分类: <a href="../../category/Linux/index.html">Linux</a>,<a href="../../category/web/index.html">web</a></li>
<li itemprop="interactionCount"><a href="../../archives/34.html#comments">评论</a></li>
</ul>
<div class="post-content" itemprop="articleBody">
<p>acme.sh 实现了 <code>acme</code> 协议, 可以从 letsencrypt 生成免费的证书.</p><p>官方说明：<a href="https://github.com/Neilpang/acme.sh">https://github.com/Neilpang/acme.sh</a></p><h2>安装acme.sh</h2><p>安装很简单:</p><pre><code>apt-get install curl
curl  https://get.acme.sh | sh
</code></pre><p>安装过程进行了以下几步:</p><ul><li>把 acme.sh 安装到你的 root 目录下: <code>/root/.acme.sh/</code></li><li>自动为你创建 cronjob, 每天 0:00 点自动检测所有的证书, 如果快过期了, 需要更新, 则会自动更新证书.</li><li>在 /root/.bashrc 创建 一个 bash 的 alias: <code>alias acme.sh=&quot;/root/.acme.sh/acme.sh&quot;</code></li></ul><p class="more"><a href="../../archives/34.html" title="使用acme.sh生成证书并部署">- 阅读剩余部分 -</a></p> </div>
</article>
<ol class="page-navigator"><li class="current"><a href="1/index.html">1</a></li><li><a href="2/index.html">2</a></li><li class="next"><a href="2/index.html">后一页 &raquo;</a></li></ol> </div>
<div class="col-mb-12 col-offset-1 col-3 kit-hidden-tb" id="secondary" role="complementary">
<section class="widget">
<h3 class="widget-title">最新文章</h3>
<ul class="widget-list">
<li><a href="../../archives/534.html">cat 命令 in Linux</a></li><li><a href="../../archives/526.html">Linux kernel 内核相关</a></li><li><a href="../../archives/525.html">Linux 命令行 换行符</a></li><li><a href="../../archives/524.html">github page build failed 问题修复</a></li><li><a href="../../archives/522.html">DoH &amp; DoT 解析</a></li><li><a href="../../archives/486.html">PhotoShop 将图片转换为无缝的 pattern 图形</a></li><li><a href="../../archives/484.html">wget 制作网站镜像</a></li><li><a href="../../archives/482.html">linux 修改 hostname</a></li><li><a href="../../archives/468.html">go 语言程序的编译</a></li><li><a href="../../archives/466.html">VPS 自动备份脚本</a></li> </ul>
</section>
<section class="widget">
<h3 class="widget-title">分类</h3>
<ul class="widget-list"><li class="category-level-0 category-parent"><a href="../../category/Linux/index.html">Linux</a><ul class="widget-list"><li class="category-level-1 category-child category-level-odd"><a href="../../category/ubuntu/index.html">ubuntu</a></li></ul></li><li class="category-level-0 category-parent"><a href="../../category/web/index.html">web</a></li><li class="category-level-0 category-parent"><a href="../../category/media/index.html">media process</a><ul class="widget-list"><li class="category-level-1 category-child category-level-odd"><a href="../../category/ps/index.html">photoshop</a></li><li class="category-level-1 category-child category-level-odd"><a href="../../category/fxp/index.html">final cut pro</a></li><li class="category-level-1 category-child category-level-odd"><a href="../../category/lr/index.html">lightroom</a></li></ul></li><li class="category-level-0 category-parent"><a href="../../category/Windows/index.html">Windows</a></li><li class="category-level-0 category-parent"><a href="../../category/macos/index.html">macOS</a></li><li class="category-level-0 category-parent"><a href="../../category/hardware/index.html">hardware</a></li><li class="category-level-0 category-parent"><a href="../../category/essay/index.html">essay</a></li><li class="category-level-0 category-parent"><a href="../../category/other/index.html">other</a></li><li class="category-level-0 category-parent"><a href="../../category/dev/index.html">Program</a><ul class="widget-list"><li class="category-level-1 category-child category-level-odd"><a href="../../category/cpp/index.html">c++</a></li><li class="category-level-1 category-child category-level-odd"><a href="../../category/py/index.html">python</a></li><li class="category-level-1 category-child category-level-odd"><a href="../../category/go/index.html">go</a></li><li class="category-level-1 category-child category-level-odd"><a href="../../category/siemens/index.html">siemens</a></li></ul></li><li class="category-level-0 category-parent"><a href="../../category/software/index.html">software</a></li></ul> </section>
<section class="widget">
<h3 class="widget-title">归档</h3>
<ul class="widget-list">
<li><a href="../../2019/11/index.html">November 2019</a></li><li><a href="../../2019/10/index.html">October 2019</a></li><li><a href="../../2019/09/index.html">September 2019</a></li><li><a href="../../2019/08/index.html">August 2019</a></li><li><a href="../../2019/07/index.html">July 2019</a></li><li><a href="../../2019/04/index.html">April 2019</a></li><li><a href="../../2019/03/index.html">March 2019</a></li><li><a href="../../2019/02/index.html">February 2019</a></li> </ul>
</section>
</div>
</div>
</div>
</div>
<footer id="footer" role="contentinfo">
&copy; 2019 <a href="../../../index.html">Marco Nie</a>. All rights reserved.
</footer>
</body>
</html>
