<!DOCTYPE HTML>
<html class="no-js">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>node.js 入门教程之三 -- npm - Marco Nie</title>

<link rel="stylesheet" href="https://niekun.net/webcdn/bootstrap-4.4.1-dist/css/bootstrap.min.css">
<link rel="stylesheet" href="../usr/themes/TypechoAwesome/normalize.css">
<link rel="stylesheet" href="../usr/themes/TypechoAwesome/style.css">
<!--[if lt IE 9]>
    <script src="//cdnjscn.b0.upaiyun.com/libs/html5shiv/r29/html5.min.js"></script>
    <script src="//cdnjscn.b0.upaiyun.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

<meta name="description" content="调用 node.js 文件node.js 有内建的 module system 模块系统，一个node.js 文件可以导入其他 node.js 文件内定义的功能。语法如下：const libra..." />
<meta name="generator" content="Typecho 1.2/18.10.23" />
<meta name="template" content="TypechoAwesome" />
<link rel="pingback" href="../action/xmlrpc" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../action/xmlrpc?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../action/xmlrpc?wlw" />
<link rel="alternate" type="application/rss+xml" title="node.js 入门教程之三 -- npm &raquo; Marco Nie &raquo; RSS 2.0" href="../feed/archives/2085.html" />
<link rel="alternate" type="application/rdf+xml" title="node.js 入门教程之三 -- npm &raquo; Marco Nie &raquo; RSS 1.0" href="../feed/rss/archives/2085.html" />
<link rel="alternate" type="application/atom+xml" title="node.js 入门教程之三 -- npm &raquo; Marco Nie &raquo; ATOM 1.0" href="../feed/atom/archives/2085.html" />
<script type="99914763fa57f852bd4e496e-text/javascript">
(function () {
    window.TypechoComment = {
        dom : function (id) {
            return document.getElementById(id);
        },
    
        create : function (tag, attr) {
            var el = document.createElement(tag);
        
            for (var key in attr) {
                el.setAttribute(key, attr[key]);
            }
        
            return el;
        },

        reply : function (cid, coid) {
            var comment = this.dom(cid), parent = comment.parentNode,
                response = this.dom('respond-post-2085'), input = this.dom('comment-parent'),
                form = 'form' == response.tagName ? response : response.getElementsByTagName('form')[0],
                textarea = response.getElementsByTagName('textarea')[0];

            if (null == input) {
                input = this.create('input', {
                    'type' : 'hidden',
                    'name' : 'parent',
                    'id'   : 'comment-parent'
                });

                form.appendChild(input);
            }

            input.setAttribute('value', coid);

            if (null == this.dom('comment-form-place-holder')) {
                var holder = this.create('div', {
                    'id' : 'comment-form-place-holder'
                });

                response.parentNode.insertBefore(holder, response);
            }

            comment.appendChild(response);
            this.dom('cancel-comment-reply-link').style.display = '';

            if (null != textarea && 'text' == textarea.name) {
                textarea.focus();
            }

            return false;
        },

        cancelReply : function () {
            var response = this.dom('respond-post-2085'),
            holder = this.dom('comment-form-place-holder'), input = this.dom('comment-parent');

            if (null != input) {
                input.parentNode.removeChild(input);
            }

            if (null == holder) {
                return true;
            }

            this.dom('cancel-comment-reply-link').style.display = 'none';
            holder.parentNode.insertBefore(response, holder);
            return false;
        }
    };
})();
</script>
<script type="99914763fa57f852bd4e496e-text/javascript">
(function () {
    var event = document.addEventListener ? {
        add: 'addEventListener',
        triggers: ['scroll', 'mousemove', 'keyup', 'touchstart'],
        load: 'DOMContentLoaded'
    } : {
        add: 'attachEvent',
        triggers: ['onfocus', 'onmousemove', 'onkeyup', 'ontouchstart'],
        load: 'onload'
    }, added = false;

    document[event.add](event.load, function () {
        var r = document.getElementById('respond-post-2085'),
            input = document.createElement('input');
        input.type = 'hidden';
        input.name = '_';
        input.value = (function () {
    var _rjVt = 'i4'//'i4'
+//'ueR'
'bb6'+//'o'
'4a'+//'k2'
'e1d'+'e'//'No'
+'852'//'k'
+//'Iv'
'6f1'+//'FVW'
'84a'+'9b8'//'3f'
+//'B'
'544'+''///*'3'*/'3'
+''///*'J'*/'J'
+'9'//'TB8'
+//'Fo'
'Fo'+//'2Jw'
'2Jw'+'j'//'j'
+'19'//'3'
+'1d'//'0'
+//'oW5'
'5'+'2'//'dgy'
+'c'//'p'
, _p2f = [[0,2],[25,27],[25,28],[25,26]];
    
    for (var i = 0; i < _p2f.length; i ++) {
        _rjVt = _rjVt.substring(0, _p2f[i][0]) + _rjVt.substring(_p2f[i][1]);
    }

    return _rjVt;
})();

        if (null != r) {
            var forms = r.getElementsByTagName('form');
            if (forms.length > 0) {
                function append() {
                    if (!added) {
                        forms[0].appendChild(input);
                        added = true;
                    }
                }
            
                for (var i = 0; i < event.triggers.length; i ++) {
                    var trigger = event.triggers[i];
                    document[event.add](trigger, append);
                    window[event.add](trigger, append);
                }
            }
        }
    });
})();
</script></head>
<body>
<!--[if lt IE 8]
    <div class="browsehappy" role="dialog">当前网页 <strong>不支持</strong> 你正在使用的浏览器. 为了正常的访问, 请 <a href="http://browsehappy.com/">升级你的浏览器</a>.</div>
<![endif]-->
<div class="container-fluid">
<nav class="navbar navbar-expand-md navbar-light bg-light d-md-none">
<a class="navbar-brand text-dark" href="../index.html">Marco Nie</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon"></span>
</button>
<div class="collapse navbar-collapse" id="navbarSupportedContent">
<form class="form-inline" id="search" method="post" action="../index.html" role="search">
<label for="s" class="sr-only">搜索关键字</label>
<input type="text" id="s" name="s" class="text form-control" placeholder="输入关键字搜索" />
<button type="submit" class="submit my-auto">搜索</button>
</form>
<div class="dropdown-divider"></div>
<p class="text-info nav-title">分类</p>
<ul class="widget-list nav-item-style"><li class="category-level-0 category-parent"><a href="../category/Linux/index.html">Linux</a><ul class="widget-list nav-item-style"><li class="category-level-1 category-child category-level-odd"><a href="../category/ubuntu/index.html">ubuntu</a></li></ul></li><li class="category-level-0 category-parent"><a href="../category/photo/index.html">Photograph</a></li><li class="category-level-0 category-parent"><a href="../category/media/index.html">media process</a><ul class="widget-list nav-item-style"><li class="category-level-1 category-child category-level-odd"><a href="../category/ps/index.html">photoshop</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/fxp/index.html">final cut pro</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/lr/index.html">lightroom</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/c4d/index.html">cinema 4D</a></li></ul></li><li class="category-level-0 category-parent"><a href="../category/Windows/index.html">Windows</a></li><li class="category-level-0 category-parent"><a href="../category/macos/index.html">macOS</a></li><li class="category-level-0 category-parent"><a href="../category/hardware/index.html">hardware</a><ul class="widget-list nav-item-style"><li class="category-level-1 category-child category-level-odd"><a href="../category/router/index.html">router</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/a73/index.html">SONY A7M3</a></li></ul></li><li class="category-level-0 category-parent"><a href="../category/essay/index.html">essay</a></li><li class="category-level-0 category-parent"><a href="../category/other/index.html">other</a></li><li class="category-level-0 category-parent"><a href="../category/dev/index.html">Development</a><ul class="widget-list nav-item-style"><li class="category-level-1 category-child category-level-odd"><a href="../category/cpp/index.html">c++</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/py/index.html">python</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/go/index.html">go</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/siemens/index.html">siemens</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/web/index.html">web</a><ul class="widget-list nav-item-style"><li class="category-level-2 category-child category-level-even"><a href="../category/html/index.html">html</a></li><li class="category-level-2 category-child category-level-even"><a href="../category/css/index.html">css</a></li><li class="category-level-2 category-child category-level-even"><a href="../category/js/index.html">javascript</a><ul class="widget-list nav-item-style"><li class="category-level-3 category-child category-level-odd"><a href="../category/node/index.html">node.js</a></li><li class="category-level-3 category-child category-level-odd"><a href="../category/react/index.html">react</a></li></ul></li></ul></li></ul></li><li class="category-level-0 category-parent"><a href="../category/software/index.html">software</a></li></ul>
<div class="dropdown-divider"></div>
<p class="text-info nav-title">归档</p>
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link nav-title" href="../2021/06/index.html">June 2021</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2021/05/index.html">May 2021</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2021/04/index.html">April 2021</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2021/03/index.html">March 2021</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2021/02/index.html">February 2021</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2021/01/index.html">January 2021</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/12/index.html">December 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/11/index.html">November 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/10/index.html">October 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/09/index.html">September 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/08/index.html">August 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/07/index.html">July 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/06/index.html">June 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/05/index.html">May 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/04/index.html">April 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/03/index.html">March 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/02/index.html">February 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2020/01/index.html">January 2020</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2019/12/index.html">December 2019</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2019/11/index.html">November 2019</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2019/10/index.html">October 2019</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2019/09/index.html">September 2019</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2019/08/index.html">August 2019</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2019/07/index.html">July 2019</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2019/04/index.html">April 2019</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2019/03/index.html">March 2019</a></li><li class="nav-item"><a class="nav-link nav-title" href="../2019/02/index.html">February 2019</a></li> </ul>
</div>
</nav>
</div>
<header id="header" class="clearfix">
<div class="container">
<div class="row">
<div class="site-name col-md-9 col-12 d-none d-md-block">
<a id="logo" class="text-decoration-none" href="../index.html">Marco Nie</a>
<p class="description mb-2">you are the company you keep...</p>
</div>
<div class="site-search col-md-3 d-none d-md-block">
<form id="search" method="post" action="../index.html" role="search">
<label for="s" class="sr-only">搜索关键字</label>
<input type="text" id="s" name="s" class="text" placeholder="输入关键字搜索" />
<button type="submit" class="submit my-auto">搜索</button>
</form>
</div>
<div class="col-12">
<ul class="nav nav-tabs clearfix" role="navigation">
<li class="nav-item">
<a class="nav-link" href="../index.html">Article</a>
</li>
<li class="nav-item">
<a class="nav-link" href="../start-page.html" title="About me">About me</a>
</li>
</ul>
</div>
</div>
</header>
</div>
<div id="body">
<div class="container">
<div class="row">
<div class="col-md-9 col-12" id="main" role="main">
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">
<h1 class="post-title" itemprop="name headline"><a itemprop="url" href="2085.html">node.js 入门教程之三 -- npm</a></h1>
<ul class="post-meta">
<li itemprop="author" itemscope itemtype="http://schema.org/Person">作者: <a itemprop="name" href="../author/1/index.html" rel="author">admin</a></li>
<li>时间: <time datetime="2021-01-26T15:45:00+08:00" itemprop="datePublished">2021-01-26</time></li>
<li>分类: <a href="../category/node/index.html">node.js</a>,<a href="../category/js/index.html">javascript</a></li>
</ul>
<div class="post-content" itemprop="articleBody">
<h3>调用 node.js 文件</h3><p>node.js 有内建的 module system 模块系统，一个node.js 文件可以导入其他 node.js 文件内定义的功能。</p><p>语法如下：</p><pre><code>const library = require('./libs')</code></pre><p>和导入其他第三方模块类似使用 <strong>require</strong> 指令，需要指定 node.js 文件路径。以上示例表示导入当前目录下的 <strong>libs.js</strong> 文件。</p><p>js 文件中默认定义的 objects 等元素是私有的，不能够被外部使用。在被导入的文件中，需要在引用前 expose 暴漏出需要被外部使用的功能。需要使用到 module system 的 <strong>module.exports</strong> API 来实现。</p><p>当给一个 <strong>object</strong> 或 <strong>function</strong> 赋予 <strong>exports</strong> 属性时，就表明这些元素可以暴漏给外部。<strong>有两种方法来实现</strong>。</p><p><strong>第一种方法</strong>是将某个 object 直接赋值给 <strong>module.exports</strong>，<strong>module.exports</strong> 是 module system 的一个 object 用来将某个 object 暴漏出来，且只能在一个文件中赋值给某一个元素，下面是一个示例：</p><p><strong>libs.js</strong> 文件：</p><pre><code>const person = {
    name: 'marco',
    age: 20
}

module.exports = person;</code></pre><p><strong>main.js</strong> 文件：</p><pre><code>const libs = require('./libs');

console.log(libs.age);

//OUTPUT:
//20</code></pre><p>上面示例中，我们将 <strong>libs.js</strong> 文件的 <strong>person</strong> object 赋值给了 <strong>module.exports</strong>，在 <strong>main.js</strong> 中调用 <strong>libs.js</strong> 文件后，<strong>main.js</strong> 中的 <strong>libs</strong> object 就相当于 <strong>person</strong> object。</p><p>我们可以发现，这种定义方法可以将某个 node.js 文件中的一个 object 暴漏给外部使用。</p><p><strong>第二种方法</strong>是将需要暴漏的元素定义为 <strong>exports</strong> 的 properties，这种方式可以将多个 objects 或 function 暴漏给外部。</p><p>libs.js 文件：</p><pre><code>const person = {
    name: 'marco',
    age: 20
}
exports.person = person;

exports.car = {
    brand: 'bmw',
    color: 'red'
}</code></pre><p>main.js 文件：</p><pre><code>const libs = require('./libs');

console.log(libs.person.age);
console.log(libs.car.brand);

//OUTPUT:
//20
//bmw</code></pre><p>以上示例中，我们先在 <strong>libs.js</strong> 中定义了两个 object，并都作为 <strong>exports</strong> 的一个 property，可以看到有两种方式定义。在 <strong>main.js</strong> 中调用后，通过调用 <strong>libs</strong> object 对应的 properties 名称即可调用对应暴露的元素。</p><h3>npm 包管理器</h3><p><strong>npm</strong> 是 <strong>node.js</strong> 的标准包管理器。</p><p>一开始，npm 作为下载和管理 node.js 包的依赖的工具，现在也成为了 JavaScript 前端开发工具。</p><h4>下载包</h4><p>如果项目中有 <strong>package.json</strong> 文件，可以通过下面指令自动安装所有在文件中定义的模块，安装路径为 <strong>node_modules</strong> 文件夹内：</p><pre><code>npm install
</code></pre><p>安装某一个模块包：</p><pre><code>npm install &lt;package-name&gt;
</code></pre><p>要安装某个包的特定版本需要加上 <strong>@</strong> 标记：</p><pre><code>npm install <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="0a69657d796b734a3b2438243a">[email&#160;protected]</a>
</code></pre><p>在项目中安装的包会自动添加条目到 <strong>package.json</strong> 文件中。也可以在安装时使用 <code>--save</code> 选项来添加到文件。</p><h4>更新包</h4><p>更新项目中所有包：</p><pre><code>npm update
</code></pre><p>更新某一个包：</p><pre><code>npm update &lt;package-name&gt;
</code></pre><p>更新 npm 本身到最新版：</p><pre><code>npm install -g <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="fa948a97ba969b8e9f898e">[email&#160;protected]</a>
</code></pre><h4>执行任务</h4><p><strong>package.json</strong> 文件内支持定义指定的命令行指令，通过下面的语法来执行：</p><pre><code>npm run &lt;task-name&gt;
</code></pre><p>指令定义在 <strong>scripts</strong> 块内，例如：</p><pre><code>{
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;uname -r&quot;
  }
}</code></pre><p>此时我们在终端执行下面命令：</p><pre><code>$ npm run start
Debugger attached.

&gt; start
&gt; uname -r

5.8.0-38-generic
Waiting for the debugger to disconnect...</code></pre><p>可以看到通过 run 定义命令的名称就可以执行对应的命令。</p><h3>国内源</h3><p>由于默认 npm 的包安装地址使用的是国外服务器所以国内下载速度很慢，推荐替换为国内镜像地址，使用下面命令替换为国内腾讯云镜像：</p><pre><code>npm config set registry http://mirrors.cloud.tencent.com/npm/
</code></pre><p>验证当前使用的地址：</p><pre><code>npm config get registry
</code></pre><p>如果返回<a href="https://registry.npm.taobao.org，说明镜像配置成功。">https://registry.npm.taobao.org，说明镜像配置成功。</a></p><h4>包安装路径</h4><p>当使用 npm 安装包时，可以定义两种安装模式：</p><ul><li>local install 逻辑安装</li><li>global install 全局安装</li></ul><p>默认情况下当我们使用下面指令安装包：</p><pre><code>npm install chalk
</code></pre><p>包会安装到当前项目路径下的 node_modules 文件夹内。此时 npm 会将对应包的信息写入 <strong>package.json</strong> 文件内的 <strong>dependencies</strong> 块内，如：</p><pre><code>{
  &quot;dependencies&quot;: {
    &quot;chalk&quot;: &quot;^4.1.0&quot;,
    &quot;inquirer&quot;: &quot;^7.3.3&quot;,
    &quot;minimist&quot;: &quot;^1.2.5&quot;,
    &quot;progress&quot;: &quot;^2.0.3&quot;
  }
}</code></pre><p>全局安装通过 <code>-g</code> 标记实现：</p><pre><code>npm install -g chalk
</code></pre><p>使用全局安装模式时，npm 不会将包安装到项目路径下，而是 <strong>global</strong> location 路径下。通过 <code>npm root -g</code> 命令可以返回 golbal 路径的地址，Linux 默认地址为：<code>/usr/local/lib/node_modules</code>，Windows 默认地址为：<code>C:\Users\YOU\AppData\Roaming\npm\node_modules</code>。</p><h4>可执行程序</h4><p>当安装一个包后，我们通过 <strong>require</strong> 关键词来调用模块：</p><pre><code>const inquirer = require('inquirer')
</code></pre><p>当安装的包是可执行程序的时候呢？当安装的包含有可执行程序时，程序会放在 <code>node_modules/.bin/</code> 文件夹内，关于如何运行这些可执行程序，我们通过 <strong>cowsay</strong> 包来演示。</p><p>首先安装 <strong>cowsay</strong>，这里安装到 global 路径下：</p><pre><code>npm install -g cowsay
</code></pre><p>我的 global 路径地址为：<code>/opt/node-v15.5.1-linux-x64/lib/node_modules</code>，可执行文件被安装在 <code>/opt/node-v15.5.1-linux-x64/bin/</code> 目录下：</p><pre><code>cowsay -&gt; ../lib/node_modules/cowsay/cli.js</code></pre><p>查看属性可以看到此可执行文件是指向 cli.js 的一个链接。</p><p>通过 <strong>npx</strong> 命令可以方便的执行此程序，不需要提供程序所在路径：</p><pre><code>$ npx cowsay wow
 _____
&lt; wow &gt;
 -----
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||</code></pre><h3>package.json 文件</h3><p>package.json 文件是其项目的一个声明，它可以用来做一些完全没有关联的事情。例如，它是配置工具的仓库，也存储着 npm 安装的包的版本信息。</p><p>下面是最简单的文件形式：</p><pre><code>{}
</code></pre><p>文件需要遵守 json 格式，否则无法被程序读取其定义的内容。没有什么内容是必须的，所以可以是一个简单的大括号。如果你要做一个通过 npm 分享的 node.js 包，那么 package.json 文件需要定义一些必须的属性以供了解这个包的信息，后面会做详细介绍。</p><p>下面是另一个示例：</p><pre><code>{
  &quot;name&quot;: &quot;test-node&quot;
}</code></pre><p>以上定义了一个 <strong>name</strong> property，定义了这个 app 或 package 的名称。文件和项目文件在同一文件夹下。</p><p>下面是一个更加复杂的示例：</p><pre><code>{
  &quot;name&quot;: &quot;test-project&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;A Vue.js project&quot;,
  &quot;main&quot;: &quot;src/main.js&quot;,
  &quot;private&quot;: true,
  &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;webpack-dev-server --inline --progress --config build/webpack.dev.conf.js&quot;,
    &quot;start&quot;: &quot;npm run dev&quot;,
    &quot;unit&quot;: &quot;jest --config test/unit/jest.conf.js --coverage&quot;,
    &quot;test&quot;: &quot;npm run unit&quot;,
    &quot;lint&quot;: &quot;eslint --ext .js,.vue src test/unit&quot;,
    &quot;build&quot;: &quot;node build/build.js&quot;
  },
  &quot;dependencies&quot;: {
    &quot;vue&quot;: &quot;^2.5.2&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;autoprefixer&quot;: &quot;^7.1.2&quot;,
    &quot;babel-core&quot;: &quot;^6.22.1&quot;,
    &quot;babel-eslint&quot;: &quot;^8.2.1&quot;,
    &quot;babel-helper-vue-jsx-merge-props&quot;: &quot;^2.0.3&quot;,
    &quot;babel-jest&quot;: &quot;^21.0.2&quot;,
    &quot;babel-loader&quot;: &quot;^7.1.1&quot;,
    &quot;babel-plugin-dynamic-import-node&quot;: &quot;^1.2.0&quot;,
    &quot;babel-plugin-syntax-jsx&quot;: &quot;^6.18.0&quot;,
    &quot;babel-plugin-transform-es2015-modules-commonjs&quot;: &quot;^6.26.0&quot;,
    &quot;babel-plugin-transform-runtime&quot;: &quot;^6.22.0&quot;,
    &quot;babel-plugin-transform-vue-jsx&quot;: &quot;^3.5.0&quot;,
    &quot;babel-preset-env&quot;: &quot;^1.3.2&quot;,
    &quot;babel-preset-stage-2&quot;: &quot;^6.22.0&quot;,
    &quot;chalk&quot;: &quot;^2.0.1&quot;,
    &quot;copy-webpack-plugin&quot;: &quot;^4.0.1&quot;,
    &quot;css-loader&quot;: &quot;^0.28.0&quot;,
    &quot;eslint&quot;: &quot;^4.15.0&quot;,
    &quot;eslint-config-airbnb-base&quot;: &quot;^11.3.0&quot;,
    &quot;eslint-friendly-formatter&quot;: &quot;^3.0.0&quot;,
    &quot;eslint-import-resolver-webpack&quot;: &quot;^0.8.3&quot;,
    &quot;eslint-loader&quot;: &quot;^1.7.1&quot;,
    &quot;eslint-plugin-import&quot;: &quot;^2.7.0&quot;,
    &quot;eslint-plugin-vue&quot;: &quot;^4.0.0&quot;,
    &quot;extract-text-webpack-plugin&quot;: &quot;^3.0.0&quot;,
    &quot;file-loader&quot;: &quot;^1.1.4&quot;,
    &quot;friendly-errors-webpack-plugin&quot;: &quot;^1.6.1&quot;,
    &quot;html-webpack-plugin&quot;: &quot;^2.30.1&quot;,
    &quot;jest&quot;: &quot;^22.0.4&quot;,
    &quot;jest-serializer-vue&quot;: &quot;^0.3.0&quot;,
    &quot;node-notifier&quot;: &quot;^5.1.2&quot;,
    &quot;optimize-css-assets-webpack-plugin&quot;: &quot;^3.2.0&quot;,
    &quot;ora&quot;: &quot;^1.2.0&quot;,
    &quot;portfinder&quot;: &quot;^1.0.13&quot;,
    &quot;postcss-import&quot;: &quot;^11.0.0&quot;,
    &quot;postcss-loader&quot;: &quot;^2.0.8&quot;,
    &quot;postcss-url&quot;: &quot;^7.2.1&quot;,
    &quot;rimraf&quot;: &quot;^2.6.0&quot;,
    &quot;semver&quot;: &quot;^5.3.0&quot;,
    &quot;shelljs&quot;: &quot;^0.7.6&quot;,
    &quot;uglifyjs-webpack-plugin&quot;: &quot;^1.1.1&quot;,
    &quot;url-loader&quot;: &quot;^0.5.8&quot;,
    &quot;vue-jest&quot;: &quot;^1.0.2&quot;,
    &quot;vue-loader&quot;: &quot;^13.3.0&quot;,
    &quot;vue-style-loader&quot;: &quot;^3.0.1&quot;,
    &quot;vue-template-compiler&quot;: &quot;^2.5.2&quot;,
    &quot;webpack&quot;: &quot;^3.6.0&quot;,
    &quot;webpack-bundle-analyzer&quot;: &quot;^2.9.0&quot;,
    &quot;webpack-dev-server&quot;: &quot;^2.9.1&quot;,
    &quot;webpack-merge&quot;: &quot;^4.1.0&quot;
  },
  &quot;engines&quot;: {
    &quot;node&quot;: &quot;&gt;= 6.0.0&quot;,
    &quot;npm&quot;: &quot;&gt;= 3.0.0&quot;
  },
  &quot;browserslist&quot;: [&quot;&gt; 1%&quot;, &quot;last 2 versions&quot;, &quot;not ie &lt;= 8&quot;]
}</code></pre><p>包含了很多的属性设置：</p><ul><li><strong>version</strong> 表示当前版本号</li><li><strong>name</strong> 设置包名称</li><li><strong>description</strong> 对 app 简要的描述</li><li><strong>main</strong> 设置 app 的入口文件</li><li><strong>private</strong> 如果设置为 true 可以防止包被无意的发布到 npm</li><li><strong>scripts</strong> 定义可以运行的脚本命令</li><li><strong>dependencies</strong> npm 依赖包列表</li><li><strong>devDependencies</strong> 定义开发使用的 npm 包列表</li><li><strong>engines</strong> 设置 app 运行的 node 版本</li><li><strong>browserslist</strong> 指定支持的浏览器版本</li></ul><p>以上所有的属性都可以被 npm 或其他工具使用。</p><h4>常用属性</h4><p>下面介绍一些常规使用的属性，包括你在本地开发的项目也可以使用。</p><p><strong>name</strong> 定义app 名称：</p><pre><code>&quot;name&quot;: &quot;test-project&quot;
</code></pre><p>name 必须小于 214 个字符，不能含有空格，只能包含<strong>小写字母，横杠<code>-</code> 或下划线<code>_</code></strong>。如果将包发布到 npm，会生成一个独有的链接。</p><p><strong>author</strong> 定义作者信息：</p><pre><code>&quot;author&quot;: &quot;marco &lt;<a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="88e5edc8e6e1ede3fde6a6e6edfc">[email&#160;protected]</a>&gt; (https://niekun.net)&quot;
</code></pre><p>或者：</p><pre><code>  &quot;author&quot;: {
    &quot;name&quot;: &quot;marco&quot;,
    &quot;email&quot;: &quot;<a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d4b9b194babdb1bfa1bafabab1a0">[email&#160;protected]</a>&quot;,
    &quot;url&quot;: &quot;https://niekun.net&quot;
  }</code></pre><p><strong>contributors</strong> 定义代码贡献者信息，可以包含多人：</p><pre><code>  &quot;contributors&quot;: [
    {
      &quot;name&quot;: &quot;marco&quot;,
      &quot;email&quot;: &quot;<a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="86ebe3c6e8efe3edf3e8a8e8e3f2">[email&#160;protected]</a>&quot;,
      &quot;url&quot;: &quot;https://niekun.net&quot;
    }
  ]</code></pre><p><strong>bugs</strong> 定义反馈 bug 的链接，一般是 GitHub issue 页面：</p><pre><code>&quot;bugs&quot;: &quot;https://github.com/whatever/package/issues&quot;
</code></pre><p><strong>homepage</strong> 定义包的主页链接：</p><pre><code>&quot;homepage&quot;: &quot;https://whatever.com/package&quot;
</code></pre><p><strong>version</strong> 定义当前包的版本：</p><pre><code>&quot;version&quot;: &quot;1.0.0&quot;
</code></pre><p>此属性遵守 semantic versioning (semver) notation 语义版本标记语法。也就是由三个数字表示：x.x.x</p><p><strong>license</strong> 定义包的授权信息：</p><pre><code>&quot;license&quot;: &quot;MIT&quot;
</code></pre><p><strong>keywords</strong> 定义关于这个包实现功能的关键词，是一个数组：</p><pre><code>  &quot;keywords&quot;: [
    &quot;learning&quot;,
    &quot;nodejs&quot;
  ]</code></pre><p>使用 keywords 可以帮助别人找到你的包，或者在 <a href="https://www.npmjs.com/">https://www.npmjs.com/</a> 网站上搜索关键词。</p><p><strong>description</strong> 定义一个对此 app 的简短描述：</p><pre><code>&quot;description&quot;: &quot;a node.js beginner guide&quot;
</code></pre><p><strong>repository</strong> 定义项目仓库地址：</p><pre><code>&quot;repository&quot;: &quot;github:whatever/node-project&quot;
</code></pre><p>注意如果不是使用的 GitHub 也可以定义其他工具：</p><pre><code>&quot;repository&quot;: &quot;gitlab:whatever/node-project&quot;
</code></pre><p>也可以明确的定义版本控制系统信息：</p><pre><code>  &quot;repository&quot;: {
    &quot;type&quot;: &quot;git&quot;,
    &quot;url&quot;: &quot;https://github.com/whatever/testing.git&quot;
  }</code></pre><p><strong>main</strong> 设置包的入口：</p><pre><code>&quot;main&quot;: &quot;./main.js&quot;
</code></pre><p><strong>private</strong> 如果设置为 true，可以防止包被无意的发布到 npm：</p><pre><code>&quot;private&quot;: &quot;true&quot;
</code></pre><p><strong>scripts</strong> 定义可执行的 node 脚本：</p><pre><code>  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;uname -r&quot;,
    &quot;test&quot;: &quot;echo abcd&quot;
  }</code></pre><p>定义的脚本是命令行程序，通过 npm run xxx 执行，如：</p><pre><code>npm run start
</code></pre><p><strong>dependencies</strong> 定义 app 需要安装的 npm 依赖包：</p><pre><code>  &quot;dependencies&quot;: {
    &quot;chalk&quot;: &quot;^4.1.0&quot;,
    &quot;inquirer&quot;: &quot;^7.3.3&quot;,
    &quot;minimist&quot;: &quot;^1.2.5&quot;,
    &quot;progress&quot;: &quot;^2.0.3&quot;
  }</code></pre><p>当通过 <code>npm install &lt;PACKAGENAME&gt;</code> 安装包，会自动将包写入 package.json 文件的 dependencies 块。</p><p><strong>devDependencies</strong> 定义 app 开发需要的 npm 依赖包：</p><pre><code>&quot;devDependencies&quot;: {
  &quot;autoprefixer&quot;: &quot;^7.1.2&quot;,
  &quot;babel-core&quot;: &quot;^6.22.1&quot;
}</code></pre><p>和 <strong>dependencies</strong> 的区别是这里定义的包只是在开发设备上安装，而不需要在执行设备上安装。开发包通过以下命令安装：</p><pre><code>npm install --save-dev &lt;PACKAGENAME&gt;
</code></pre><p><strong>engines</strong> 设置此包运行的 node 版本和其他命令版本：</p><pre><code>  &quot;engines&quot;: {
    &quot;node&quot;: &quot;&gt;= 6.0.0&quot;,
    &quot;npm&quot;: &quot;&gt;=3.0.0&quot;
  }</code></pre><p><strong>browserslist</strong> 定义 app 支持的浏览器版本：</p><pre><code>&quot;browserslist&quot;: [
  &quot;&gt; 1%&quot;,
  &quot;last 2 versions&quot;,
  &quot;not ie &lt;= 8&quot;
]</code></pre><p>以上定义的意义是：支持所有类型浏览器的最近两个版本且需要至少有 1% 的占有率，不包括小于等于 IE8 版本的浏览器。浏览器占有率信息来自于 <a href="https://caniuse.com/">https://caniuse.com/</a> 统计。</p><h4>依赖包版本信息</h4><p>在 <strong>dependencies</strong> 和 <strong>devDependencies</strong> 中定义了依赖包列表，每个包都定义了版本信息，如：<strong>^0.13.0</strong> 或 <strong>~3.0.0</strong>，通过版本号前的符号可以们定义接受那些版本的升级，下面介绍版本标记的用法：</p><ul><li>无标记，如 1.0.0 定义只安装此版本的包</li><li><strong>latest</strong> 定义安装最新版本的包</li><li><strong>^</strong> 只能升级到不改变最左边第一个非零数字的版本，如定义 <strong>^0.13.0</strong>，通过 npm update 可以升级到 0.13.1 或 0.13.2，但不能升级到 0.14.0，定义 <strong>^1.13.0</strong>，能够升级到 1.13.1 或 1.14.0，不能升级到 2.0.0</li><li><strong>~</strong> 只能升级最后一位数字变化的版本，如 定义 <strong>~1.13.0</strong>，能够升级到 1.13.1，但不能升级到 1.14.0</li><li><strong>&gt;</strong> 接受大于定义的版本号的更新</li><li><strong>&gt;=</strong> 接受大于等于定义的版本号的更新</li><li><strong>&lt;</strong> 接受小于定义的版本号的更新</li><li><strong>&lt;=</strong> 接受小于等于定义的版本号的更新</li><li><strong>-</strong> 设置一个版本范围，如：1.0.0 - 2.0.0</li><li><strong>||</strong> 组合设置，如：&lt; 2.0.0 || &gt; 3.0.0</li></ul><p>更加详细的定义方法参考：<a href="https://nodejs.dev/learn/semantic-versioning-using-npm">https://nodejs.dev/learn/semantic-versioning-using-npm</a></p><h3>package-lock.json 文件</h3><p>在 npm 5 版本中 npm 引入了 package-lock.json 文件。</p><p>前面介绍了 package.json 文件，它是一个通用的被广泛使用的配置文件。package-lock.json 文件的目的是更加确切的追踪安装的依赖包的版本，以用来 100% 复制开发者的安装环境到其他安装者设备上，即使某些包已经够了更新版本。</p><p>这解决了一个 package.json 遗留的问题，在 package.json 中你可以定义某个包可接受的版本升级范围，版本格式遵守 semantic versioning (semver) notation 语义版本标记语法，例如：</p><ul><li><strong>~1.13.1</strong> 可以升级到 1.13.2，但不可以升级到 1.14.0</li><li><strong>^1.13.1</strong> 可以升级到 1.14.0，但不能升级到 2.0.0</li><li><strong>1.13.1</strong> 只能安装 1.13.1 版本，不能升级到其他任何版本</li></ul><p>你发布的包中并不包含开发环境中的 node_modules 文件夹因为它占用空间很大。当在其他设备中通过 <code>npm install</code> 命令安装依赖包时，竟会遵循上面定义的版本范围安装支持的最新版本到设备中，这就会导致用户安装的版本和你开发环境的版本不一致，可能导致 bug 的出现。</p><p>package-lock.json 中定义了你当前开发环境安装的各种依赖包的准确版本，这样通过 <code>npm install</code> 命令安装的就是其中定义的准确版本。</p><p>这一概念并不是 npm 独创的，其他编程语言也在使用类似的模式，如 php 的 Composer。</p><p>package-lock.json 文件需要打包在仓库中，以供其他人使用。当使用 <code>npm update</code> 更新包时，package-lock.json 中的定义也会同步更新。</p><p>下面是一个 package-lock.json 文件的示例，当我们执行 <code>npm install cowsay</code> 时，会创建以下内容：</p><pre><code>{
  &quot;requires&quot;: true,
  &quot;lockfileVersion&quot;: 1,
  &quot;dependencies&quot;: {
    &quot;ansi-regex&quot;: {
      &quot;version&quot;: &quot;3.0.0&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/ansi-regex/-/ansi-regex-3.
0.0.tgz&quot;,
      &quot;integrity&quot;: &quot;sha1-7QMXwyIGT3lGbAKWa922Bas32Zg=&quot;
    },
    &quot;cowsay&quot;: {
      &quot;version&quot;: &quot;1.3.1&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz&quot;
,
      &quot;integrity&quot;: &quot;sha512-3PVFe6FePVtPj1HTeLin9v8WyLl+VmM1l1H/5P+BTTDkM
Ajufp+0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ==&quot;,
      &quot;requires&quot;: {
        &quot;get-stdin&quot;: &quot;^5.0.1&quot;,
        &quot;optimist&quot;: &quot;~0.6.1&quot;,
        &quot;string-width&quot;: &quot;~2.1.1&quot;,
        &quot;strip-eof&quot;: &quot;^1.0.0&quot;
      }
    },
    &quot;get-stdin&quot;: {
      &quot;version&quot;: &quot;5.0.1&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/get-stdin/-/get-stdin-5.0.
1.tgz&quot;,
      &quot;integrity&quot;: &quot;sha1-Ei4WFZHiH/TFJTAwVpPyDmOTo5g=&quot;
    },
    &quot;is-fullwidth-code-point&quot;: {
      &quot;version&quot;: &quot;2.0.0&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/is-fullwidth-code-point/-/
is-fullwidth-code-point-2.0.0.tgz&quot;,
      &quot;integrity&quot;: &quot;sha1-o7MKXE8ZkYMWeqq5O+764937ZU8=&quot;
    },
    &quot;minimist&quot;: {
      &quot;version&quot;: &quot;0.0.10&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/minimist/-/minimist-0.0.10
.tgz&quot;,
      &quot;integrity&quot;: &quot;sha1-3j+YVD2/lggr5IrRoMfNqDYwHc8=&quot;
    },
    &quot;optimist&quot;: {
      &quot;version&quot;: &quot;0.6.1&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/optimist/-/optimist-0.6.1.tgz&quot;,
      &quot;integrity&quot;: &quot;sha1-2j6nRob6IaGaERwybpDrFaAZZoY=&quot;,

      &quot;requires&quot;: {
        &quot;minimist&quot;: &quot;~0.0.1&quot;,
        &quot;wordwrap&quot;: &quot;~0.0.2&quot;
      }
    },
    &quot;string-width&quot;: {
      &quot;version&quot;: &quot;2.1.1&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/string-width/-/string-width-2.1.1.tgz&quot;,
      &quot;integrity&quot;: &quot;sha512-nOqH59deCq9SRHlxq1Aw85Jnt4w6KvLKqWVik6oA9ZklXLNIOlqg4F2yrT1MVaTjAqvVwdfeZ7w7aCvJD7ugkw==&quot;,
      &quot;requires&quot;: {
        &quot;is-fullwidth-code-point&quot;: &quot;^2.0.0&quot;,
        &quot;strip-ansi&quot;: &quot;^4.0.0&quot;
      }
    },
    &quot;strip-ansi&quot;: {
      &quot;version&quot;: &quot;4.0.0&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/strip-ansi/-/strip-ansi-4.0.0.tgz&quot;,
      &quot;integrity&quot;: &quot;sha1-qEeQIusaw2iocTibY1JixQXuNo8=&quot;,
      &quot;requires&quot;: {
        &quot;ansi-regex&quot;: &quot;^3.0.0&quot;
      }
    },
    &quot;strip-eof&quot;: {
      &quot;version&quot;: &quot;1.0.0&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/strip-eof/-/strip-eof-1.0.0.tgz&quot;,
      &quot;integrity&quot;: &quot;sha1-u0P/VZim6wXYm1n80SnJgzE2Br8=&quot;
    },
    &quot;wordwrap&quot;: {
      &quot;version&quot;: &quot;0.0.3&quot;,
      &quot;resolved&quot;: &quot;https://registry.npmjs.org/wordwrap/-/wordwrap-0.0.3.tgz&quot;,
      &quot;integrity&quot;: &quot;sha1-o9XabNXAvAAI03I0u68b7WMFkQc=&quot;
    }
  }
}</code></pre><p>我们安装的 cowsay 有如下依赖，它们会被自动安装：</p><ul><li>get-stdin</li><li>optimist</li><li>string-width</li><li>strip-eof</li></ul><p>以上的依赖包可能也会有它们各自的其他依赖包，会自动安装相关其他包，每个包的依赖包在 <strong>requires</strong> 属性中定义。</p><p>所有的包以字母排序顺序在文件中。每个包都有 <strong>version</strong> 属性定义了各自当前安装的版本，<strong>resolved</strong> 定义了包地址，<strong>integrity</strong> 字符串用来验证包。</p><h3>包版本管理及安装</h3><p>下面的指令查询当前安装的所有包及其依赖包：</p><pre><code>npm list
</code></pre><p>输出信息示例：</p><pre><code>❯ npm list
/Users/joe/dev/node/cowsay
└─┬ <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="88ebe7fffbe9f1c8b9a6bba6b9">[email&#160;protected]</a>
  ├── <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b5d2d0c198c6c1d1dcdbf5809b859b84">[email&#160;protected]</a>
  ├─┬ <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f79887839e9a9e8483b7c7d9c1d9c6">[email&#160;protected]</a>
  │ ├── <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="a2cfcbcccbcfcbd1d6e2928c928c9392">[email&#160;protected]</a>
  │ └── <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="aaddc5d8ceddd8cbdaea9a849a8499">[email&#160;protected]</a>
  ├─┬ <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d5a6a1a7bcbbb2f8a2bcb1a1bd95e7fbe4fbe4">[email&#160;protected]</a>
  │ ├── <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="bdd4ce90dbc8d1d1cad4d9c9d590ded2d9d890cdd2d4d3c9fd8f938d938d">[email&#160;protected]</a>
  │ └─┬ <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d1a2a5a3b8a1fcb0bfa2b891e5ffe1ffe1">[email&#160;protected]</a>
  │   └── <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="ec8d829f85c19e898b8994acdfc2dcc2dc">[email&#160;protected]</a>
  └── <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="d5a6a1a7bca5f8b0bab395e4fbe5fbe5">[email&#160;protected]</a></code></pre><p>当然也可以直接打开 package-lock.json 文件查看，但这样不太方便观察结构。</p><p><code>npm list -g</code> 用来查看 global 安装的包。</p><p>如果只想查询顶层的包，也就是你主动通过 <code>npm install</code> 安装的那些包，可通过 <code>npm list --depth=0</code> 查询：</p><pre><code>❯ npm list --depth=0
/Users/joe/dev/node/cowsay
└── <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="5a39352d293b231a6b7469746b">[email&#160;protected]</a></code></pre><p>也可以单独查询某个包：</p><pre><code>❯ npm list cowsay
/Users/joe/dev/node/cowsay
└── <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="482b273f3b29310879667b6679">[email&#160;protected]</a></code></pre><p>使用下面命令查询某个包当前发布的最新版本：</p><pre><code>❯ npm view cowsay version
1.4.0</code></pre><p>要安装某个包的特定版本需要加上 <code>@</code> 标记：</p><pre><code>npm install <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="1774786064766e572639253927">[email&#160;protected]</a>
</code></pre><p>查看某个包的所有历史版本列表：</p><pre><code>$ npm view cowsay versions
[
  '1.0.0', '1.0.1', '1.0.2',
  '1.0.3', '1.1.0', '1.1.1',
  '1.1.2', '1.1.3', '1.1.4',
  '1.1.5', '1.1.6', '1.1.7',
  '1.1.8', '1.1.9', '1.2.0',
  '1.2.1', '1.3.0', '1.3.1',
  '1.4.0'
]</code></pre><p>通过 <code>npm update</code> 可以更新所有已安装的包，更新版本规则遵循 package.json 定义的版本升级范围，同时会更新 package-lock.json 文件内的当前包版本信息。</p><p>想要查询当前有哪些包有更新版本时，可以执行 <code>npm outdated</code> 命令：<br><img src="../usr/uploads/2021/01/1402612766.png" alt="2021-01-29T01:29:02.png" title="2021-01-29T01:29:02.png"></p><p>其中有些更新是大版本更新， <code>npm update</code> 并不会更新到这些大版本，因为这些更新可能包含有重大的变化。如果要强制更新到最新的版本包括大版本更新，可以按顺序执行下面的命令：</p><pre><code>npm install -g npm-check-updates
ncu -u
npm update</code></pre><p>使用下面命令卸载某个包：</p><pre><code>npm uninstall &lt;package-name&gt;
</code></pre><p>添加 <code>-S</code> 或 <code>--save</code> 标记删除 package.json 中的相关信息。如果要删除的包是一个开发包，在 devDependencies 中定义过，则需要添加 <code>-D</code> 或 <code>--save-dev</code> 标记来删除相关信息：</p><pre><code>npm uninstall -S &lt;package-name&gt;
npm uninstall -D &lt;package-name&gt;</code></pre><p>如果包是 global 安装的，则卸载需要添加 <code>-g</code> 标记：</p><pre><code>npm uninstall -g &lt;package-name&gt;
</code></pre><h3>npm local 和 global 安装</h3><p>本地包和全局包的区别是本地包通过 <code>npm install</code> 安装到当前项目下的 node_modules 文件夹内，全局包通过 <code>npm install -g</code> 安装到系统路径下，路径地址可通过 <code>npm root -g</code> 查询。</p><p>在程序中，只能 require 本地包：</p><pre><code>require('package-name')
</code></pre><p>通常情况下推荐所有的包都以本地模式安装。这可以让不同的程序使用各自不同版本的包。更新一个全局包会同时影响所有使用这个包的 app。</p><p>当一个包含有可执行程序时，应该安装为 global 全局包。这样所有的项目都可以调用执行。</p><h3>npm dependencies 和 devDependencies</h3><p>当通过 npm intall 安装包时，表示将包作为 dependency。包信息会自动写入 package.json 文件的 dependencies 块内。当安装时添加 <code>-D</code> 标记，表示将包作为 devdependency 安装。包信息会自动写入 devDependencies 块内。</p><p>开发包的目的是用来开发程序时使用，作为产品运行时是不需要的。</p><p>执行 npm install 会默认安装这些开发包。如果不需要安装开发包需要加上 <code>--production</code> 标记：</p><pre><code>npm install --production xxx
</code></pre><h3>npx 包运行器</h3><p>npx 可以用来运行 node.js 程序。node.js 开发者通常将大部分含有可执行程序的包作为 global 包发布，这样就使得可执行程序在系统 PATH 路径下可以被直接执行。但这样的弊端就是不能安装不同版本的包。</p><p>使用 npx 命令可以自动寻找 node_modules 文件夹内的对应的名称的可执行程序，而不需要知道程序具体的路径，也不需要以 global 方式安装包。</p><p>npx 另一个很好的功能是可以直接运行某些命令而不需要提前安装它们，还可以通过 <code>@</code> 标记来执行不同版本的同一命令。</p><p>cowsay 是一个很好的示例来说明 npx 的使用，如果我们以 global 模式安装 cowsay，可以通过下面方式执行：</p><pre><code>cowsay &quot;wow&quot;
</code></pre><p>以上命令只有通过 global 方式安装才能够正常执行，否则会报错提示命令不存在。</p><p>如果以 local 方式安装 cowsay，可以通过 npx 执行：</p><pre><code>npx cowsay &quot;Hello&quot;
</code></pre><p>通过 <code>@</code> 标记来执行不同版本的命令：</p><pre><code>npx <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="b7d9d8d3d2f78687">[email&#160;protected]</a> -v #v10.18.1
npx <a href="../cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="325c5d5657720300">[email&#160;protected]</a> -v #v12.14.1</code></pre><p>npm 也可以直接执行来自 url 的任意代码片段，而不仅限于 npm 官方渠道发布的包。下面示例是执行部署在 glist 的包：</p><pre><code>npx https://gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32
</code></pre><p>可执行程序路径定义在 package.json 文件的 bin 属性内。</p><p>glist 包含内容如下：<br><img src="../usr/uploads/2021/01/1152197546.jpg" alt="1.jpg" title="1.jpg"></p><p>当然执行不受控制网络的代码需要多加注意。</p> </div>
<p itemprop="keywords" class="tags">标签: none</p>
</article>
<div id="comments">
<div id="respond-post-2085" class="respond">
<div class="cancel-comment-reply">
<a id="cancel-comment-reply-link" href="2085.html#respond-post-2085" rel="nofollow" style="display:none" onclick="if (!window.__cfRLUnblockHandlers) return false; return TypechoComment.cancelReply();" data-cf-modified-99914763fa57f852bd4e496e-="">取消回复</a> </div>
<h3 id="response">添加新评论</h3>
<form method="post" action="https://blog.niekun.net/archives/2085.html/comment" id="comment-form" role="form">
<p>
<label for="author" class="required">称呼</label>
<input type="text" name="author" id="author" class="text" value="" required />
</p>
<p>
<label for="mail" class="required">Email</label>
<input type="email" name="mail" id="mail" class="text" value="" required />
</p>
<p>
<label for="url">网站</label>
<input type="url" name="url" id="url" class="text" placeholder="http://" value="" />
</p>
<p>
<label for="textarea" class="required">内容</label>
<textarea rows="8" cols="50" name="text" id="textarea" class="textarea" required></textarea>
</p>
<p>
<button type="submit" class="submit">提交评论</button>
</p>
</form>
</div>
</div>
<ul class="post-near">
<li>上一篇: <a href="2074.html" title="服务器部署 WebDAV 服务">服务器部署 WebDAV 服务</a></li>
<li>下一篇: <a href="2086.html" title="创建新文件 in Linux">创建新文件 in Linux</a></li>
</ul>
</div>
<div class="col-md-3 d-none d-md-block" id="secondary" role="complementary">
<section class="widget">
<h4 class="Display 2">最新文章</h4>
<ul class="widget-list">
<li><a href="2321.html">openwrt 扩展根目录空间</a></li><li><a href="2320.html">理解 Linux shell 脚本的 2&gt;&amp;1</a></li><li><a href="2310.html">通过 telegram-cli 命令行发送 telegram 消息</a></li><li><a href="2305.html">配置外部网络存储器作为 Time Machine 备份</a></li><li><a href="2303.html">在 Ubuntu 中加载 smb 共享目录为本地路径</a></li><li><a href="2294.html"> openwrt 时区设置</a></li><li><a href="2291.html">openwrt network 配置</a></li><li><a href="2290.html">通过 GitHub API 获取数据</a></li><li><a href="2287.html">Linux 脚本中的 Shebang #!</a></li><li><a href="2281.html">Ubuntu desktop 配置 vnc server</a></li> </ul>
</section>
<section class="widget">
<h4 class="Display 2">最近回复</h4>
<ul class="widget-list">
<li><a href="97.html#pingback-30">macOS设置系统代理 R11; Mr. Wen的学习记录！</a>: [...]如果需要频繁的打开/关闭代理，每次都需要输入以上命令比...</li>
<li><a href="1258.html#comment-29">marco nie</a>: 换到 wsl2 吧，可以完美解决的：https://blog.n...</li>
<li><a href="1258.html#comment-28">hm</a>: 小瑕疵：WSL(即WSL1)这样并不能解决
看了下 https:...</li>
<li><a href="2191.html#comment-27">ahxinny</a>: 编程会随时出现报错，与环境关系很大。有时软件升级会造成系统不兼容...</li>
<li><a href="2011.html#comment-26">ahxinny</a>: let相当于局域变量，但 和局域变量还是不同。局域变量在函数体内...</li>
<li><a href="1918.html#comment-25">ahxinny</a>: 有点云里雾里的。</li>
<li><a href="1895.html#comment-24">ahxinny</a>: 前面的易懂，指针之后有点登天。</li>
<li><a href="1885.html#comment-23">ahxinny</a>: 学习了。哈哈哈！</li>
<li><a href="1906.html#comment-22">ahxinny</a>: 可以偷看你的手机内容了。</li>
<li><a href="1869.html#comment-21">ahxinny</a>: 打错了不能撤销消息?</li>
</ul>
</section>
<section class="widget">
<h4 class="Display 2">分类</h4>
<ul class="widget-list"><li class="category-level-0 category-parent"><a href="../category/Linux/index.html">Linux</a><ul class="widget-list"><li class="category-level-1 category-child category-level-odd"><a href="../category/ubuntu/index.html">ubuntu</a></li></ul></li><li class="category-level-0 category-parent"><a href="../category/photo/index.html">Photograph</a></li><li class="category-level-0 category-parent"><a href="../category/media/index.html">media process</a><ul class="widget-list"><li class="category-level-1 category-child category-level-odd"><a href="../category/ps/index.html">photoshop</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/fxp/index.html">final cut pro</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/lr/index.html">lightroom</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/c4d/index.html">cinema 4D</a></li></ul></li><li class="category-level-0 category-parent"><a href="../category/Windows/index.html">Windows</a></li><li class="category-level-0 category-parent"><a href="../category/macos/index.html">macOS</a></li><li class="category-level-0 category-parent"><a href="../category/hardware/index.html">hardware</a><ul class="widget-list"><li class="category-level-1 category-child category-level-odd"><a href="../category/router/index.html">router</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/a73/index.html">SONY A7M3</a></li></ul></li><li class="category-level-0 category-parent"><a href="../category/essay/index.html">essay</a></li><li class="category-level-0 category-parent"><a href="../category/other/index.html">other</a></li><li class="category-level-0 category-parent"><a href="../category/dev/index.html">Development</a><ul class="widget-list"><li class="category-level-1 category-child category-level-odd"><a href="../category/cpp/index.html">c++</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/py/index.html">python</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/go/index.html">go</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/siemens/index.html">siemens</a></li><li class="category-level-1 category-child category-level-odd"><a href="../category/web/index.html">web</a><ul class="widget-list"><li class="category-level-2 category-child category-level-even"><a href="../category/html/index.html">html</a></li><li class="category-level-2 category-child category-level-even"><a href="../category/css/index.html">css</a></li><li class="category-level-2 category-child category-level-even"><a href="../category/js/index.html">javascript</a><ul class="widget-list"><li class="category-level-3 category-child category-level-odd"><a href="../category/node/index.html">node.js</a></li><li class="category-level-3 category-child category-level-odd"><a href="../category/react/index.html">react</a></li></ul></li></ul></li></ul></li><li class="category-level-0 category-parent"><a href="../category/software/index.html">software</a></li></ul> </section>
<section class="widget">
<h4 class="Display 2">归档</h4>
<ul class="widget-list">
<li><a href="../2021/06/index.html">June 2021</a></li><li><a href="../2021/05/index.html">May 2021</a></li><li><a href="../2021/04/index.html">April 2021</a></li><li><a href="../2021/03/index.html">March 2021</a></li><li><a href="../2021/02/index.html">February 2021</a></li><li><a href="../2021/01/index.html">January 2021</a></li><li><a href="../2020/12/index.html">December 2020</a></li><li><a href="../2020/11/index.html">November 2020</a></li><li><a href="../2020/10/index.html">October 2020</a></li><li><a href="../2020/09/index.html">September 2020</a></li><li><a href="../2020/08/index.html">August 2020</a></li><li><a href="../2020/07/index.html">July 2020</a></li><li><a href="../2020/06/index.html">June 2020</a></li><li><a href="../2020/05/index.html">May 2020</a></li><li><a href="../2020/04/index.html">April 2020</a></li><li><a href="../2020/03/index.html">March 2020</a></li><li><a href="../2020/02/index.html">February 2020</a></li><li><a href="../2020/01/index.html">January 2020</a></li><li><a href="../2019/12/index.html">December 2019</a></li><li><a href="../2019/11/index.html">November 2019</a></li><li><a href="../2019/10/index.html">October 2019</a></li><li><a href="../2019/09/index.html">September 2019</a></li><li><a href="../2019/08/index.html">August 2019</a></li><li><a href="../2019/07/index.html">July 2019</a></li><li><a href="../2019/04/index.html">April 2019</a></li><li><a href="../2019/03/index.html">March 2019</a></li><li><a href="../2019/02/index.html">February 2019</a></li> </ul>
</section>
<section class="widget">
<h4 class="Display 2">其它</h4>
<ul class="widget-list">
<li><a href="../feed/index.html">文章 RSS</a></li>
<li><a href="../feed/comments/index.html">评论 RSS</a></li>
</ul>
</section>
</div>
</div>
</div>
</div>
<footer id="footer" role="contentinfo">
&copy; 2021 <a href="../index.html">Marco Nie</a>. All rights reserved. Power by <a href="http://typecho.org">Typecho.</a> Theme designed by <a href="https://niekun.net">Marco Nie.</a>
</footer>
<script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script type="99914763fa57f852bd4e496e-text/javascript">
    navItemSytle();
</script>
<script src="https://niekun.net/webcdn/jquery-3.4.1/jquery.min.js" type="99914763fa57f852bd4e496e-text/javascript"></script>
<script src="https://niekun.net/webcdn//popper.js-1.16.0/popper.min.js" type="99914763fa57f852bd4e496e-text/javascript"></script>
<script src="https://niekun.net/webcdn/bootstrap-4.4.1-dist/js/bootstrap.min.js" type="99914763fa57f852bd4e496e-text/javascript"></script>
<script src="../usr/themes/TypechoAwesome/navItem.js" type="99914763fa57f852bd4e496e-text/javascript"></script>
<script src="../cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="99914763fa57f852bd4e496e-|49" defer=""></script></body>
</html>